window.netflix=window.netflix||{},netflix.cadmium=netflix.cadmium||{},netflix.cadmium.ui=netflix.cadmium.ui||{},netflix.cadmium.ui.mdx=netflix.cadmium.ui.mdx||{},netflix.mdx=netflix.mdx||{},netflix.mdx.ui=netflix.mdx.ui||{},netflix.mdx.EVENTS=Object.freeze({mdx_init:"init",mdx_initerror:"initerror",mdx_state:"mdxstate",READY:"READY",NOT_READY:"NOT_READY",sessionstartresponse:"startSessionResponse",sessionended:"sessionended",messagedelivered:"messagedelivered",messagingerror:"messagingerror",pairingdeleted:"pairingdeleted",pairingresponse:"pairingresponse",regpairresponse:"regpairresponse",devicefound:"devicefound",devicelost:"devicelost",remoteDeviceReady:"remoteDeviceReady",pairingtimeout:"pairingtimeout",sessiontimeout:"sessiontimeout",heartbeat:"heartbeat"}),netflix.mdx.bootstrap=function(){function e(){a=!0;var e=document.documentElement,n=document.createElement("script");n.src=netflix.constants.page.merchMdxJs;var i=o.fromEvent(n,"load");i.take(1).doAction(s,s,t).subscribe(s,s),e.appendChild(n)}function t(){l=!0,n()}function n(){function e(){r.init(function(e){e.success?(netflix.player.nccp=e.nccp,netflix.player.mdx=e.mdx,netflix.mdx.Manager.INSTANCE.start()):o.log("init error",e.error)})}var t=netflix.cadmium,i=t.objects.videoPlayer(),r=t.objects.videoSession(),o=t.logging,s=t.UiEvents,a=t.objects;if(null!=i)a.videoPlayerLoaded()?e():i.addEventListener("loaded",function(){e()});else{var l=function(){n()};s.addEventListener(s.knownEvents.NEW_PLAYER_CREATED,l)}}function i(){if(chrome.cast&&chrome.cast.isAvailable)a||e();else{window.__onGCastApiAvailable=function(t,n){a||(t?e():console.log(n))};var t=document.getElementsByTagName("script")[0],n=document.createElement("script");n.src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js",t.parentNode.insertBefore(n,t)}}function r(e){"complete"===document.readyState&&(clearTimeout(u),document.removeEventListener("readystatechange",r),i())}var o=Rx.Observable,s=function(){},a=!1,l=!1;if(navigator.userAgent.toLowerCase().indexOf("chrome")>=0&&navigator.userAgent.indexOf("Edge/")<0){var u=setTimeout(function(){document.removeEventListener("readystatechange",r),i()},1e3);document.addEventListener("readystatechange",r)}return{readyToInit:function(){return l&&a},tryInitMdx:n}}(),netflix.cadmium.util=function(){function e(e){var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}function t(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}function n(e){return"[object Object]"===Object.prototype.toString.call(e)}function i(e,t,n){e=e||{},t=t||{},n=n||{};for(var i in e)!n.hasOwnProperty(i)&&e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function r(e,t,n){try{return e.apply(t,n)}catch(i){return i}}return{isEmptyObject:e,isArray:t,isObject:n,mix:i,NOOP:function(){},tryCatch:r}}(),function(){"use strict";var e=netflix.cadmium.util.NOOP;Rx.Observable.fromEvent||(Rx.Observable.fromEvent=function(e,t){return Rx.Observable.create(function(n){function i(){n.onNext.apply(n,arguments)}return e.addEventListener(t,i),function(){e.removeEventListener(t,i)}})}),Rx.Observable.prototype.filter||(Rx.Observable.prototype.filter=Rx.Observable.prototype.where),Rx.Observable.prototype.map||(Rx.Observable.prototype.map=function(e,t){return Rx.Observable.prototype.select.call(t||this,e)}),Rx.Observable["throw"]||(Rx.Observable["throw"]=Rx.Observable.throwException),Rx.Observable.flatMap||(Rx.Observable.prototype.flatMap=Rx.Observable.prototype.selectMany),Rx.Observable["return"]||(Rx.Observable["return"]=Rx.Observable.returnValue),Rx.Observable.wrap||(Rx.Observable.wrap=function(t){return 0===arguments.length?Rx.Observable.empty():t instanceof Rx.Observable?t:t instanceof Error?Rx.Observable["throw"](t):Rx.Observable.create(function(n){return n.onNext(t),n.onCompleted(),e})}),Rx.Observable["catch"]||(Rx.Observable["catch"]=Rx.Observable.catchException),Rx.Observable.prototype["catch"]||(Rx.Observable.prototype["catch"]=Rx.Observable.prototype.catchException),Rx.Observable.prototype.share||(Rx.Observable.prototype.share=function(){return this.publish().refCount()}),Rx.Observable.prototype.shareValue||(Rx.Observable.prototype.shareValue=function(e){return this.publishValue(e).refCount()}),Rx.Observable.prototype.shareReplay||(Rx.Observable.prototype.shareReplay=function(e,t,n){return this.replay(null,e,t,n).refCount()}),Rx.Observable.prototype.retryWithBackoff=function(e,t){e=e||5,t=t||1e3;var n=this,i=t,r=1,o=Rx.Observable.defer(function(){return Rx.Observable.timer(i).flatMap(function(){return i=Math.pow(2,r++)*t,n})});return this["catch"](o.retry(e))}}(),netflix.cadmium.animate=function(){"use strict";function e(e){"opacity"==e.propertyName&&window.getComputedStyle(e.target).opacity<.1&&e.currentTarget.classList.add(i)}function t(t){t.removeEventListener(o,e,!1),t.addEventListener(o,e,!1),t.classList.add(r)}function n(t){t.removeEventListener(o,e,!1),t.classList.remove(i),requestAnimationFrame(function(){t.classList.remove(r)})}var i="display-none",r="opacity-transparent",o="transitionend";return{fadeIn:n,fadeOut:t}}(),function(){var e=!1,t=/\b_super\b/,n=function(e,t){return function(){var n,i=this._super;return this._super=t,n=e.apply(this,arguments),this._super=i,n}};netflix.cadmium.Class=function(){},netflix.cadmium.Class.extend=function(i){var r,o,s,a,l,u,c,d=this.prototype,p=t,m=n;e=!0,r=new this,e=!1;for(o in i)if(i.hasOwnProperty(o)){if(s=i.__lookupGetter__(o),a=i.__lookupSetter__(o),s||a){s&&r.__defineGetter__(o,s),a&&r.__defineSetter__(o,a);continue}l=i[o],r[o]="function"==typeof l&&"function"==typeof(u=d[o])&&p.test(l)?m(l,u):l}return c=function(){!e&&this.init&&this.init.apply(this,arguments)},c.prototype=r,c.constructor=c,c.extend=arguments.callee,c}}(),netflix.cadmium.browser=function(){function e(){var e=n.lowercase;if("ms"===e){var t=window.innerHeight===screen.height,i=!1,r="#metroForce"===window.location.hash;try{i=!!new ActiveXObject("htmlfile")}catch(o){}return t&&!i||r}return!1}var t=!1,n=function(){var e=window.getComputedStyle(document.documentElement,""),t=Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)[1],n="WebKit|Moz|MS|O".match(new RegExp("("+t+")","i"))[1];return{dom:n,lowercase:t,css:"-"+t+"-",js:t[0].toUpperCase()+t.substr(1)}}(),i=Object.freeze({pen:"pen",mouse:"mouse",touch:"touch"});return function(){var e="data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA==",n=new Image;n.onload=function(e){t="load"===e.type&&1===n.width},n.onerror=function(e){t=!1},n.src=e}(),{prefix:function(){return n},pointerTypes:i,isMetroMode:e,supportsWebP:function(){return t}}}(),netflix.cadmium.customerEvents=function(){var e="/LogCustomerEvent",t=function(e,t){if(!e)return"";var n=0,i=[];for(var r in e)e.hasOwnProperty(r)&&(0!==n&&i.append(t),i.append(encodeURIComponent(r)),i.append("="),i.append(encodeURIComponent(e[r])),n++);return i.join("")},n=function(n,i,r,o){var s={legacy:!1,authURL:netflix.cadmium.objects.initParams().xsrfToken};"number"==typeof n?s.eventId=n:"string"==typeof n&&(s.custEventDef=n),i&&(s.eventData=t(i,",")),r&&(s.trackId=r);var a=new XMLHttpRequest;a.onreadystatechange=function(){4===a.readyState&&"200"===a.status&&o&&o(a.response)},a.open("GET",e+"?"+t(s,"&"),!0),a.send()};return{send:n}}(),Function.prototype.debounce=function(e,t){var n,i=this;return function(){function r(){t||i.apply(o,s),n=null}var o=this,s=arguments;n?clearTimeout(n):t&&i.apply(o,s),n=setTimeout(r,e||100)}},netflix.cadmium.dom=function(){"use strict";for(var e=["DIV","P","LI","UL","SPAN","IMG","H1","H2","H3","SECTION","A","BUTTON","INPUT"],t={},n=function(e,t){if(void 0!==t&&null!==t)if(t.nodeType)e.appendChild(t);else if("string"==typeof t||"number"==typeof t){var i=document.createTextNode(t);e.appendChild(i)}else if(t.constructor===Array)for(var r=0;r<t.length;r++)n(e,t[r]);else for(var o in t)t.hasOwnProperty(o)&&e.setAttribute(o,t[o])},i=function(e){return function(){for(var t=arguments.length,i=document.createElement(e),r=0;t>r;r++){var o=arguments[r];n(i,o)}return i}},r=0;r<e.length;r++)t[e[r]]=i(e[r]);return t.get=i,t}(),netflix.cadmium.element=function(){"use strict";function e(){return null!==d?d:(d=t("img"),d.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",d)}function t(e,t,n){var i=document.createElement(e);return t&&(t.id&&(i.id=t.id),t["class"]&&(i.className=t["class"])),n&&n.appendChild(i),i}function n(e){var t=function(e){var t=window.getComputedStyle(e);return"visible"===t.visibility&&parseInt(t.opacity)>=1},n=t(e);if(!n)return!1;for(;e=e.offsetParent;)if(!t(e)){n=!1;break}return n}function i(e){var t=e.getBoundingClientRect();return{x:t.left,y:t.top,w:t.width,h:t.height}}function r(e){function t(e){e&&e.parentNode&&e.parentNode.removeChild(e)}if(e&&e.length>0)for(var n=e.length,i=0;n>i;++i)t(e[i]);else e&&t(e)}function o(e,t){return[t.x-e.x,t.y-e.y]}function s(e,t,n,i){return l(n,i,o(t,e))}function a(e,t,n,i){return l(o(t,i),o(t,n),o(t,e))}function l(e,t,n){function i(e,t){return e[0]*t[0]+e[1]*t[1]}var r=i(e,e),o=i(e,t),s=i(e,n),a=i(t,t),l=i(t,n),u=1/(r*a-o*o),c=(a*s-o*l)*u,d=(r*l-o*s)*u;return c>=0&&d>=0&&1>c+d}function u(e,t){var n;if(!(e.w/e.h>4/3))return"0";var i=e.w-4*e.h/3,r=e.h/t;return n="-"+i/2/r+"em"}function c(e,t){function n(t){return parseInt(getComputedStyle(e).getPropertyValue(t),10)}if(t=t||{},e instanceof Element){var i=n("line-height")||n("font-size"),r=t.maxLines,o=i*r,s=e.getBoundingClientRect().height;if(!(isNaN(s)||isNaN(o)||o>=s)){var a=e.textContent.replace(/\s{2,}/g," ").split(" "),l=a.length;t.isClamped?a.splice(l-2,1):(a.pop(),a.push("&hellip;"),t.isClamped=!0),e.innerHTML=a.join(" "),c(e,t)}}}var d=null;return{getTransparentImage:e,create:t,getDimensions:i,intendsToBeVisible:n,remove:r,vector:o,isPointInCachedTriangle:s,isPointInTriangle:a,calcScaledScreenOffset:u,limitLinesOfText:c,classNames:Object.freeze({visible:"player-visible",active:"player-active",hidden:"player-hidden",animate:"player-animate"})}}(),function(){var e=netflix.cadmium;e.Eventable=e.Class.extend({init:function(){this.events={}},addEventListener:function(e,t,n){var i={handler:t,scope:n};this.events.hasOwnProperty(e)?this.events[e].push(i):this.events[e]=[i]},removeEventListener:function(e,t,n){if(this.events.hasOwnProperty(e))for(var i=0;i<this.events[e].length;i++){var r=this.events[e][i];if(r.handler==t&&r.scope==n)return void this.events[e].splice(i,1)}},fireEvent:function(e,t){if(this.events.hasOwnProperty(e)){t&&t.length||(t=[]);for(var n=this.events[e].slice(0),i=n.length,r=0;i>r;r++)n[r].handler&&n[r].handler.apply(n[r].scope,t)}}})}(),netflix.cadmium.logging=function(){"use strict";function e(e,t){t=Array.prototype.slice.call(t);var n=netflix.player&&netflix.player.log,i=netflix.cadmium.objects;n&&i&&i.videoSession()&&n[e].apply(n,t)}var t=/logging=true/.test(window.location.search),n="trace",i="info",r="error";return{log:function(){t&&window.console&&console.log.apply(console,arguments),e(n,arguments)},info:function(){t&&window.console&&console.info.apply(console,arguments),e(i,arguments)},error:function(){t&&window.console&&console.error.apply(console,arguments),e(r,arguments)},uilog:function(){t&&window.console&&console.log.apply(console,arguments),e(n,arguments)},onErrorLogger:function(){var n,i;arguments.length>1?(i=arguments[0],n=arguments[1],i=i+"\n"+(n&&n.stack||n)):(n=arguments[0],i=n&&n.stack||n),t&&console.error(n),e(r,i)}}}(),netflix.cadmium.time=function(){function e(e,t,i,r){var o=n(e),s=function(e){return t&&10>e?"0"+e:e},a=function(e){return netflix.I18n.getWithParams(e,["H","M","S"],[o.h,s(o.m),s(o.s)])};return a(o.h>0?o.m>0?o.s>0&&!i?r+"-hours-minutes-seconds":r+"-hours-minutes":o.s&&!i>0?r+"-hours-seconds":r+"-hours":o.m>0?o.s>0&&!i?r+"-minutes-seconds":r+"-minutes":r+"-seconds")}function t(e){var t="",i=n(e);return i.h>0&&(t=i.h+":",i.m<10&&(t+="0")),t+=i.m+":",t+(i.s>=10?i.s:"0"+i.s)}function n(e){var t=parseInt(e),n=0,i=0;return t>3600&&(n=parseInt(t/3600),t%=3600),t>60&&(i=parseInt(t/60),t%=60),{h:n,m:i,s:t}}function i(e,t){return t=t||10,Math.max(0,(e/t>>0)*t)}return{convert:t,convertUsingKey:e,getFloored:i}}(),netflix.cadmium.url=function(){function e(){var n,i;n=location.search.substr(1),i=n.indexOf("#"),i>=0&&(n=n.substr(0,i));var r=t(n);return e=function(){return r},r}function t(e){for(var t,n=/[+]/g,i=(e||"").split("&"),r={},o=0;o<i.length;o++)e=y(i[o]),t=e.indexOf("="),t>=0?r[decodeURIComponent(e.substr(0,t).replace(n,"%20")).toLowerCase()]=decodeURIComponent(e.substr(t+1).replace(n,"%20")):r[e.toLowerCase()]=null;return r}function n(e){return e instanceof RegExp?e.test(window.location.search):!1}function i(e,t,n){if(n=n||0,t=parseInt(t,10),netflix.cadmium.ui.master.isAkira()){var i=t+"?trackId="+n,r={};r[e]=t,r.trackId=r.trackingId=n,history.replaceState(r,"",i)}else{var o=e===l.EPISODE_ID?E:v;o(t),n&&d(l.TRACK_ID,n)}}function r(){var e=window.history.state||{};if(e.videoId||e.episodeId)return e;var t=+m(l.EPISODE_ID),n=+m(l.VIDEO_ID),i=+m(l.TRACK_ID)||0;return(t||n)&&(e={},e[t?"episodeId":"videoId"]=t||n,e.trackId=e.trackingId=i),e}function o(){if(!a){var e;e=netflix&&netflix.cadmium&&netflix.cadmium.objects&&netflix.cadmium.objects.initParams()&&netflix.cadmium.objects.initParams().apiUrl?netflix.cadmium.objects.initParams().apiUrl.replace("http://","https://"):"https://"+location.hostname+"/api/",a=e}return a}var s,a,l=Object.freeze({EPISODE_ID:"episodeId",VIDEO_ID:"videoId",COMMENTARY_PREFERRED:"commentaryPreferred",TRACK_ID:"trackId",BOOKMARK:"t"}),u={},c=function(){var e=window.location.hash;return e.length>0&&"#"===e[0]&&(e=e.substring(1)),e},d=function(e,t){var n=c();n!==s&&h(),u[e]=t,f()},p=function(e){delete u[e],f()},m=function(e){var t=c();return t!==s&&(s=t,h()),u[e]},h=function(){u={};var e=c();if(e.length>0)for(var t=e.split("&"),n=0;n<t.length;n++){var i=t[n].split("=");u[i[0]]=i[1]}},f=function(){var e="";for(var t in u)u.hasOwnProperty(t)&&(e=e+t+"="+u[t]+"&");e.length>0&&(e=e.substring(0,e.length-1)),(s||e)&&(s=e,window.location.hash=e)},v=function(e){g(),d(l.VIDEO_ID,e)},E=function(e){g(),d(l.EPISODE_ID,e)},g=function(){p(l.EPISODE_ID),p(l.VIDEO_ID),p(l.BOOKMARK)},_=function(e,t){e+="?";for(var n in t)t.hasOwnProperty(n)&&(e+=n+"="+t[n]+"&");return e.substr(0,e.length-1)},b=function(e){var t=/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/,n=t.exec(e);return n[1]+":"+n[2]+n[3]},y=function(){var e=/^\s+|\s+$/gm;return function(t){return t.replace(e,"")}}();return{setNextVideo:i,getNextVideo:r,addHash:d,getHash:m,addVideoIDHash:v,addEpisodeIDHash:E,removeHash:p,constructUrl:_,getOriginFromUrl:b,getQueryString:e,urlContains:n,CONSTANTS:l,getSecureApiPath:o}}(),netflix.cadmium.xhr=function(){"use strict";function e(e){return e=e||{},Rx.Observable.create(function(n){function i(){n.onNext(s),n.onCompleted()}function o(){n.onError(s)}var s=new XMLHttpRequest,a=e.url,l=e.method,u=e.headers,c=e.data||null;s.onload=function(){var e=s.status;e&&e>=200&&300>e?i():o()},s.onerror=o,s.open(l,a,!0),r(e,s),t(s,u);try{s.send(c)}catch(d){n.onError(d)}return function(){s&&4!==s.readyState&&s.abort()}})}function t(e,t){if(!e||!t)return e;for(var n in t)e.setRequestHeader(n,t[n]);return e}function n(e){function t(e,t){o.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}var n,r,o=[];if(a.isObject(e))for(n in e)e.hasOwnProperty(n)&&i(n,e[n],t);else for(n in e)e.hasOwnProperty(n)&&t(n,e[n]);return r=0===o.length?"":o.join("&").replace(/%20/g,"+")}function i(e,t,n){var r=/\[\]$/;if(a.isArray(t))t.forEach(function(t,o){r.test(e)?n(e,o):i(e+"["+(a.isObject(o)||a.isArray(o)?t:"")+"]",o,n)});else if(a.isObject(t))for(var o in t)t.hasOwnProperty(o)&&i(e+"["+o+"]",t[o],n);else n(e,t)}function r(e,t){e=e||{},t=t||{};var n,i=function(e){return"requestType"===e||"withCredentials"===e};for(n in e)e.hasOwnProperty(n)&&i(n)&&(t[n]=e[n]);return t}function o(t,i){i=i||{},netflix.constants&&netflix.constants.page&&netflix.constants.page.xsrf&&i.data&&(i.data.authURL=netflix.constants.page.xsrf);var r=n(i.data),o={method:"GET",responseType:"json"};return r?o.url=t+"?"+r:o.url=t,a.mix(i,o,{data:!0}),e(o).map(function(e){var t=e.response;return"string"==typeof t&&(t=JSON.parse(t)),t})}function s(t,i){i=i||{};var r={url:t,method:"POST",requestType:"json"};return a.mix(i,r,{data:!0}),i.data&&(r.headers=r.headers||{},netflix.constants&&netflix.constants.page&&netflix.constants.page.xsrf&&(i.data.authURL=netflix.constants.page.xsrf),i.urlEncoded?(r.headers["Content-Type"]="application/x-www-form-urlencoded",r.data=n(i.data)):(r.headers["Content-Type"]="application/json",r.data=JSON.stringify(i.data))),e(r).map(function(e){var t=e.response;return"string"==typeof t&&t&&(t=JSON.parse(t)),t})}var a=netflix.cadmium.util;return{get:o,post:s}}(),netflix.cadmium.popup=function(){function e(e){return e=e||{},!a||a.closed||e.url!==l?n(e):a.focus(),m}function t(){p&&p.onNext(),a&&a.close(),a=null,l=null,u=null,c=null,d=null,p=null,m=null}function n(e){t(),l=e.url,u=e.name,c=i(e.features),p=new Rx.Subject;var n=r(c);a=window.open(l,u,n),d=f.getOriginFromUrl(l),o()}function i(e){var t=e.width||300,n=e.height||200,i={width:t,height:n},r={};if(e.centered){var o=document.body.getBoundingClientRect(),s=o.width,a=o.height;i.top=a/2-n/2+screenTop,i.left=s/2-t/2+screenLeft}return h.mix(e,r,{centered:!0}),h.mix(i,r)}function r(e){var t,n="";for(var i in e)e.hasOwnProperty(i)&&(t=e[i],t===!0?t="yes":t===!1?t="no":t+="",n+=(n.length?",":"")+i+"="+t);return n}function o(){a&&!a.closed&&(m=Rx.Observable.fromEvent(window,"message").takeUntil(p).filter(s))}function s(e){return e&&e.origin===d}var a,l,u,c,d,p,m,h=netflix.cadmium.util,f=netflix.cadmium.url;return{open:e,close:t}}(),function(){"use strict";function e(){for(var e,t="",n=[],i=0;i<arguments.length;i++){e=arguments[i];{if("string"!=typeof e){n=[t,e];break}t&&(t+=": "),t+=e}}return n.length?n:[t]}var t=netflix.cadmium,n=t.logging,i=t.Class,r=i.extend({init:function(e){this._namespace=e},log:function(){this._logit("log",arguments)},error:function(){this._logit("error",arguments)},info:function(){this._logit("info",arguments)},getErrorHandler:function(t){var n=this;return function(i){n.error.apply(n,e(n._namespace,t,i&&i.stack||i))}},_logit:function(t,i){Array.prototype.unshift.call(i,this._namespace),n[t].apply(n,e.apply(null,i)),"error"===t&&console.error.apply(console,i)}});r.create=function(e){return new r(e)},t.Logger=r}(),function(){"use strict";function e(){return a().getActiveVideo&&a().getActiveVideo()||{}}function t(){var e=s().initParams&&s().initParams();return!(!e||!e.enableTrickPlay)}function n(e){return t()?i(e):r(e)}function i(e){var t=s().videoPlayer&&s().videoPlayer(),n=t&&t.getTrickPlayFrame(e),i=n&&n.image;if(i)try{return URL.createObjectURL(new Blob([i],{type:"image/jpeg"}))}catch(r){return l.log(r&&r.stack||r),null}return null}function r(t){var n,i=t/1e3,r=e().progressImageRoot,o=null;return r&&(n=i/10,o=r+u.substring((n+"").length)+n+".jpg"),o}function o(e,i,r){var o=n(i);o&&e?(e.src=o,t()?e.onload=function(){window.URL.revokeObjectURL(this.src),r&&r(!0)}:r&&r(!0)):r&&r(!1)}function s(){return netflix.cadmium&&netflix.cadmium.objects||{}}function a(){return netflix.cadmium&&netflix.cadmium.metadata||{}}var l=netflix.cadmium.Logger.create("trickplay"),u="00000";netflix.cadmium.trickplay={getImageUrlAtTime:n,setImageTagSourceAtTime:o}}(),function(){"use strict";var e=netflix.cadmium;e.mixins={mixin:function(e,t,n){(n||Object.keys(t)).forEach(function(n){e[n]=t[n]})},ui:{}}}(),netflix.cadmium.MutationUtils=function(){"use strict";function e(e,t){return window.MutationObserver?Rx.Observable.create(function(n){var i;return i=new window.MutationObserver(function(e){n.onNext(e)}),i.observe(e,t),function(){i.disconnect()}}):Rx.Observable.empty()}function t(t,n){return t&&n?e(t,{childList:!0,subtree:!1}).flatMap(function(e){return Rx.Observable.fromArray(e)}).filter(function(e){return e.addedNodes&&e.addedNodes.length}).flatMap(function(e){return Rx.Observable.fromArray([].slice.call(e.addedNodes))}).filter(function(e){return n.some(function(t){return e!==t})}).doAction(function(e){e&&e.remove()}):Rx.Observable["throw"]("Must provide a target element and whitelist.")}return{createMutationObserver:e,observeAndRemoveUnsafeNodes:t}}(),function(){"use strict";var e=netflix.cadmium,t=e.Eventable.extend({knownEvents:Object.freeze({SHOW_MENU:"showmenu",HIDE_MENU:"hidemenu",METADATA_LOADED:"metadata-loaded",SHOWN_TRICKPLAY_PREVIEW:"trickplay-shown",HIDDEN_TRICKPLAY_PREVIEW:"trickplay-hidden",CINEMA_MODE_ENTER:"cinema-enter",CINEMA_MODE_EXIT:"cinema-exit",KEYBOARD_SEEK_ENTER:"keyboard-seek-enter",DRAG_MODE_ENTER:"drag-enter",FORCE_SHOW_MENU:"force-show-menu",REMOVE_FORCE_SHOW_MENU:"remove-force-show-menu",DRAG_START_SCRUBBER:"drag-start-scrubber",DRAG_FINISH_SCRUBBER:"drag-finish-scrubber",AUTOPLAY_NEXT_EPISODE:"autoplay-next-episode",SHOW_AUTOPLAY_INTERRUPTER:"show-autoplay-interrupter",HIDE_AUTOPLAY_INTERRUPTER:"hide-autoplay-interrupter",FULLSCREEN_CHANGE:"fullscreenchange",PAUSE_TOGGLED:"pause-toggled",INCOGNITO_CHANGED:"incognito-changed",VIDEO_FIRST_PLAY:"videoFirstPlay",VIDEO_ENDED:"VideoEnded",VIDEO_POSTPLAY_ENTER:"videoPostplayEnter",NEW_PLAYER_CREATED:"playerCreated",NEW_PLAYER_DOM_CREATED:"playerDomCreated",MDX_LOADED:"mdxLoaded",WINDOW_RESIZE:"resize",ERROR:"ui-error",SHUTDOWN:"ui-shutdown"}),init:function(){this._super()},destroy:function(){this.events={}}});netflix.cadmium.UiEvents=new t}(),function(){"use strict";function e(e,t){return"function"!=typeof e?void s.error("Handler is not a function."):void(t?c.unshift(e):c.push(e))}function t(e){c.forEach(function(t,n){t===e&&c.splice(n,1)})}function n(){var e=netflix.cadmium.playbackShutdown;Rx.Observable.merge(Rx.Observable.fromEvent(window,"beforeunload"),Rx.Observable.fromEvent(window,"popstate").filter(function(){var e=location.pathname.toLowerCase();return e.indexOf("watch")<0&&e.indexOf("wiplayer")<0})).takeUntil(l).takeUntil(e).take(1).doAction(function(e){var t,n={isPopStateEvent:e instanceof window.PopStateEvent,event:e};for(t=0;t<c.length;t++)c[t](n)},r,r).subscribe(a,s.getErrorHandler("beforeUnload"),a)}function i(){u&&r(),u=!0,o=netflix.cadmium,s=o.Logger.create("UnloadActions"),a=o.util.noop,l=new Rx.Subject,n()}function r(){l.onNext(),s=null,a=null,l=null,d=c.length,u=!1}var o,s,a,l,u=!1,c=[],d=0;netflix.cadmium.playbackShutdown=netflix.cadmium.playbackShutdown||new Rx.Subject,netflix.cadmium.addBeforeUnloadHandler=e,netflix.cadmium.removeBeforeUnloadHandler=t,netflix.cadmium.unloadActions={init:i}}(),netflix.cadmium.playbackEvents=function(){"use strict";function e(){s()&&!o()&&n(!0),d.fireEvent(d.knownEvents.VIDEO_ENDED)}function t(){r()||n()}function n(e){x[w]=!0,d.fireEvent(d.knownEvents.VIDEO_POSTPLAY_ENTER,{hidePlayer:!!e})}function i(){if(!A){A=!0;var n,i=u.videoIsKnown(w);i&&(n=u.getActiveVideo(),f=n.creditsOffset||v,f&&s()&&y.fromEvent(h,"currenttimechanged").takeUntil(g).sample(k).filter(function(){return h?(E=h.getCurrentTime()/1e3,!h.getPaused()&&E>=f):!1}).doAction(t).subscribe(_,m.getErrorHandler("event|currenttimechanged"),_)),T?y.fromEvent(h,"currenttimechanged").takeUntil(g).sample(k).filter(function(){return h?(E=h.getCurrentTime(),E>=v-1500):!1}).doAction(e).subscribe(_,m.getErrorHandler("event|webkit-currenttimechanged"),_):y.fromEvent(h,"endedchanged").takeUntil(g).filter(function(){return h&&h.getEnded()}).doAction(e).subscribe(_,m.getErrorHandler("event|endedchanged"),_)}}function r(){return!!x[w]}function o(){var e=c.playerWrapper();return e&&e.classList.contains("player-postplay")||!1}function s(){var e=u.getActiveVideo()||{},t=b.ui.preplay.preplayNeeded();return!t&&!p.getClipValues(e)}function a(){L&&l(),L=!0,u=b.metadata,c=b.objects,d=b.UiEvents,p=b.clips,m=b.Logger.create("playback.events"),y=Rx.Observable,m.log("init"),g=new Rx.Subject,x={},_=b.util.NOOP;var e=y.fromEvent(d,d.knownEvents.VIDEO_FIRST_PLAY).delay(3e3),t=y.fromEvent(d,d.knownEvents.METADATA_LOADED);y.concat(e,t).take(1).takeUntil(g).doAction(function(){w=c.videoId(),h=c.videoPlayer(),v=h.getDuration(),i()}).subscribe(_,m.getErrorHandler("events|firstplay+metadataloaded"),_)}function l(){g&&g.onNext(),m.log("deinit"),u=null,c=null,d=null,y=null,p=null,m=null,x={},w=null,h=null,f=null,v=null,E=null,A=!1,g=null,_=null,L=!1}var u,c,d,p,m,h,f,v,E,g,_,b=netflix.cadmium,y=Rx.Observable,x={},k=500,w=null,T="webkit"===b.browser.prefix().lowercase,L=!1,A=!1;return{init:a,deinit:l}}(),netflix.cadmium.ui.errors=function(){"use strict";function e(e,n){i.fireEvent(i.knownEvents.ERROR,[t(e,n)])}function t(e,t){t=t&&"-"+t||"";var i,a=r+e+t,l=null,u=[];switch(e){case o.UI_NO_METADATA:u.push("ui_no_metadata");break;case o.UI_PLAYER_CREATION_EXCEPTION:u.push("ui_player_creation_exception");break;case o.UI_TITLE_UNAVAILABLE:i=n&&n.objects&&n.objects.getCountry(),s[i]?u.push("title-unavailable-"+i):u.push("title-unavailable");break;case o.UI_UNKNOWN:default:u.push("default")}return u.push(a),{messageIdList:u,display:{code:a,text:l}}}var n=netflix.cadmium,i=n.UiEvents,r="UI",o=Object.freeze({UI_UNKNOWN:3e3,UI_NO_METADATA:3001,UI_PLAYER_CREATION_EXCEPTION:3002,UI_TITLE_UNAVAILABLE:3003}),s={us:"us",ca:"ca",mx:"mx",br:"br",uk:"uk",ie:"ie",dk:"dk",fi:"fi",no:"no",se:"se",nl:"nl",fr:"fr",de:"de",ch:"ch",at:"at",be:"be",lu:"lu"};return{type:o,throwUIError:e}}(),netflix.cadmium.cinemamode=function(){"use strict";function e(){A=!1}function t(){A=!0,s()}function n(){N=!0}function i(){N=!1}function r(){var e=!1;return w&&A&&!N?O&&(e=L&&L.some(function(e){return e&&e.contains(O)&&E.intendsToBeVisible(O)}))?void x.log("Not entering cinema mode",{lastMouseTarget:O&&O.toString()}):(x.log("Entering cinema mode",{lastMouseTarget:O&&O.toString()}),P&&clearTimeout(P),void _.fireEvent(_.knownEvents.CINEMA_MODE_ENTER)):void x.log("Can't enter cinema mode",{initialized:w,cinemaModeEnabled:A,modal:N})}function o(){w&&(clearTimeout(P),_.fireEvent(_.knownEvents.CINEMA_MODE_EXIT),k.getBusy()||s())}function s(){clearTimeout(P),P=setTimeout(r,R)}function a(){clearTimeout(P),e(),T.removeEventListener("mousemove",M,!1),T.removeEventListener("mousemove",D,!1),_.removeEventListener(_.knownEvents.KEYBOARD_SEEK_ENTER,a),_.removeEventListener(_.knownEvents.DRAG_START_SCRUBBER,a),_.addEventListener(_.knownEvents.DRAG_MODE_ENTER,l),_.addEventListener(_.knownEvents.DRAG_FINISH_SCRUBBER,l)}function l(){t(),s(),T.addEventListener("mousemove",M,!1),T.addEventListener("mousemove",D,!1),_.removeEventListener(_.knownEvents.DRAG_MODE_ENTER,l),_.removeEventListener(_.knownEvents.DRAG_FINISH_SCRUBBER,l),_.addEventListener(_.knownEvents.KEYBOARD_SEEK_ENTER,a),_.addEventListener(_.knownEvents.DRAG_START_SCRUBBER,a)}function u(e){o()}function c(){o()}function d(){w&&(k.getBusy()||o())}function p(e){e&&Array.isArray(e)&&(L=L.concat(e))}function m(){w&&(x.log("cinemamode.manager.deinit"),w=!1,clearTimeout(P),T.removeEventListener("mousemove",M),T.removeEventListener("mousemove",D),document.body.removeEventListener("keydown",u),k.removeEventListener("busychanged",d),k.removeEventListener("pausedchanged",c),_.removeEventListener(b.FORCE_SHOW_MENU,e),_.removeEventListener(b.REMOVE_FORCE_SHOW_MENU,t),_.removeEventListener(b.SHOW_AUTOPLAY_INTERRUPTER,n),_.removeEventListener(b.HIDE_AUTOPLAY_INTERRUPTER,i),_.removeEventListener(b.KEYBOARD_SEEK_ENTER,a),_.removeEventListener(b.DRAG_START_SCRUBBER,a),O=null,f=null,g=null,E=null,y=null,v=null,L=null,T=null,k=null,b=null,_=null,x.log("cinemamode.manager.deinit complete"))}function h(){w&&m(),w=!0,f=netflix.cadmium,g=f.metadata,_=f.UiEvents,E=f.element,y=f.objects,v=f.ui,x=f.logging,b=_.knownEvents,k=y.videoPlayer(),T=y.playerWrapper();var r=f.url.getQueryString().trackpointerpos;r&&(S="true"===r),L=[],x.log("cinemamode.manager.init",{playerWrapperEl:T&&T.toString()}),T.addEventListener("mousemove",M,!1),T.addEventListener("mousemove",D,!1),document.body.addEventListener("keydown",u,!1),k.addEventListener("busychanged",d),k.addEventListener("pausedchanged",c),_.addEventListener(b.FORCE_SHOW_MENU,e),_.addEventListener(b.REMOVE_FORCE_SHOW_MENU,t),_.addEventListener(b.SHOW_AUTOPLAY_INTERRUPTER,n),_.addEventListener(b.HIDE_AUTOPLAY_INTERRUPTER,i),_.addEventListener(b.KEYBOARD_SEEK_ENTER,a),_.addEventListener(b.DRAG_START_SCRUBBER,a),o()}var f,v,E,g,_,b,y,x,k,w=!1,T=null,L=[],A=!0,P=null,I=null,C=null,O=null,S=!0,N=!1,R=2200,D=function(e){I=e.clientX,C=e.clientY,O=e.target},M=function(e){N||(S?(e.clientX!=I||e.clientY!=C)&&o():o())}.debounce(20,!0);return{init:h,deinit:m,addExclusionEls:p,disableCinemaMode:e,enableCinemaMode:t}}(),netflix.cadmium.metadata=function(){"use strict";function e(){T=null,L=!1,A=null,_=null,b=null,y=null,x=null,k=[]}function t(e){return e&&e.video&&e.video.type}function n(e){return L&&e.video.type===P.show}function i(e){function t(e){return e.episodes.length}var n,i=T.video.seasons;return i.forEach(function(i){return i.id===e?t(i):(n=i.episodes,void n.forEach(function(n){return n.id===e?t(i):void 0}))}),0}function r(e){return c(e)&&n(T)?k.length:0}function o(e){function i(e,t){T.video.seasons[e].episodes[t].active=!0,_=o[e],b=_.episodes[t],_.episodes[t+1]?(x=_,y=_.episodes[t+1]):o[e+1]&&(x=o[e+1],y=x.episodes[0])}if(b=null,_=null,y=null,x=null,k=[],!t(T))return void(L=!1);if(L=!0,n(T)){var r,o=T.video.seasons;o.forEach(function(t,n){t.id===e&&i(n,0),r=t.episodes,r.forEach(function(t,r){k.push(t.id),t.id===e?i(n,r):T.video.seasons[n].episodes[r].active=!1})})}else T.video.active=!0,b=T.video,k.push(b.id)}function s(e,t,n){var i=+e,r=netflix.cadmium,s=r.UiEvents;t&&(T=t,o(i),A=i),s.fireEvent(s.knownEvents.METADATA_LOADED),r.logging.log("success loading metadata"),n&&"function"==typeof n&&n(T)}function a(e,t){for(var n=e.split("."),i=T,r=0;r<n.length;r++)r==n.length-1?i[n[r]]=t:i&&(i=i[n[r]])}function l(e,t,n){function i(e){e&&null!=e.version?s(o,e,t):r({status:I.INVALID_METADATA})}function r(e){L=!1,n&&"function"==typeof n&&n(e.status)}var o=+e,a=netflix&&netflix.cadmium&&netflix.cadmium.objects&&"function"==typeof netflix.cadmium.objects.initParams&&netflix.cadmium.objects.initParams()||{};if(A!==o)if(c(o))s(o,T);else if(netflix.cadmium.ui.master.isAkira())w||(w=Requireify.require("js/utils/player/playerMetadata.js")),w.getMetadataCall(o,window.pathEvaluator).timeout(15e3).retryWithBackoff(3,1e3).doAction(i).subscribe(C,r,C);else{var l=a.metadataBaseServer||"",u=l+"/WiPlayerMetadata?id="+o+"&type=cadmium",d=new XMLHttpRequest;d.onload=function(){var e;try{e=JSON.parse(d.responseText)}catch(t){}e?i(e):r(d)},d.onerror=function(){r(d)},d.open("GET",u,!0),d.withCredentials=!0,d.send()}else s(o)}function u(e,t,n){t&&(T=t,o(e)),t&&c(e)?s(e,t):l(e,null,n)}function c(e){return k&&k.indexOf(e)>=0}function d(){return T}function p(){return b}function m(){return n(T)?_:null}function h(){return n(T)?y:null}function f(){return n(T)?x:null}function v(e,t){var n,i=0,r=null;return e&&e.length>0&&e.forEach(function(e,o){n=e.h*e.w,t(n,i)&&(i=n,r=o)}),null!==r?e[r]:null}function E(e){return v(e,function(e,t){return e>t})}function g(e){return v(e,function(e,t){return 0>=t||t>e})}var _,b,y,x,k,w,T=null,L=!1,A=null,P=Object.freeze({show:"show",movie:"movie"}),I=Object.freeze({INVALID_METADATA:1e3}),C=netflix.cadmium.util.NOOP;return{prepare:u,setMetadata:s,setMetadataField:a,retrieveData:l,getMetadata:d,getActiveVideo:p,getActiveSeason:m,getTotalEpisodeCount:r,getSeasonEpisodeCount:i,getNextEpisode:h,getNextEpisodeSeason:f,getLargestImage:E,getSmallestImage:g,isShowData:n,videoTypes:P,videoIsKnown:c,clear:e}}(),netflix.cadmium.clips=function(){function e(e,t){return t||(t=netflix.cadmium.objects.initParams()),t&&t.clipsMode&&t.clipsMode[e]}return{getClipValues:e}}(),netflix.cadmium.objects=function(){"use strict";function e(e){E=e||E}function t(e){e>=0&&(g=e)}function n(){g=0}function i(e){y=e}function r(e){w=e}function o(e){x=e}function s(){_=null}function a(){if(null!==_)return L.log("reusing video session"),!1;var e=w;return e.renderTimedText=!0,
_=new netflix.player.VideoSession(e),!0}function l(e){_&&_.applyConfig(e)}function u(e,t){if(w){if(e=parseInt(e,10),t=parseInt(t,10),isNaN(e)||isNaN(t))return void L.error("Invalid params videoId="+e+", position="+t);w.bookmarkByMovieId=w.bookmarkByMovieId||{},w.bookmarkByMovieId[e]=t,l(w)}}function c(){b.removeEventListener(I,c),k=!1}function d(n,i,r){e(n),t(i);var o,s,a,l,u,p=T.UiEvents,f=T.ui.errors;k?b.close(function(){k=!1,d(n,i,r)}):(a={},l={},o={trackingId:g},s=netflix.cadmium.clips.getClipValues(E),s&&(o.clipStart=s.start,o.clipDuration=s.duration),a.uiplaycontext=m(),L.info("Setting play context:",A,",trackId: "+g),o.sessionParams=a,w.assistiveAudioPreferred&&(l.assistiveAudioPreferred=!0),l.pinCapableClient=!(!w.pinConfig||!w.pinConfig.isEnabled),o.authParams=l,u=netflix.cadmium.util.tryCatch(_.createPlayer,_,[E,o]),u instanceof Error?(L.error(u),f.throwUIError(f.type.UI_PLAYER_CREATION_EXCEPTION),r&&r(new Error(f.type.UI_PLAYER_CREATION_EXCEPTION))):(b=u,T.timedtext.create(b,w),p.fireEvent(p.knownEvents.NEW_PLAYER_CREATED),b.addEventListener("loaded",function v(e){h(!0),b.removeEventListener("loaded",v)}),b.load(),b.addEventListener(I,c),k=!0,r&&r(null,b)))}function p(e){A=e}function m(){if(w&&w.playcontext&&!A&&(A=w.playcontext,delete w.playcontext),!A)return null;var e=-99,t="unknown";return{row:void 0!=A.row?A.row:e,rank:void 0!=A.rank?A.rank:e,location:A.location||t,request_id:A.request_id||t}}function h(e){P=e,w&&w.bookmarkByMovieId&&delete w.bookmarkByMovieId[E]}function f(e,t){function n(){e||(_=null,w=null,E=null,y=null,A=null,g=0,x=null,L.log("full drain")),b=null,k=!1,P=!1,L.log("drained")}if(t)n();else try{_?_.closeAllPlayers(n):n()}catch(i){n()}}function v(){var e,t=T&&T.ui&&T.ui.master&&T.ui.master.isAkira&&T.ui.master.isAkira();return e=t?netflix&&netflix.contextData&&netflix.contextData.userContext&&netflix.contextData.userContext.data&&netflix.contextData.userContext.data.geo&&netflix.contextData.userContext.data.geo.preferredLocale&&"string"==typeof netflix.contextData.userContext.data.geo.preferredLocale.country&&netflix.contextData.userContext.data.geo.preferredLocale.country.toLowerCase()||"":netflix&&netflix.constants&&netflix.constants.page&&netflix.constants.page.COUNTRY&&"string"==typeof netflix.constants.page.COUNTRY&&netflix.constants.page.COUNTRY.toLowerCase()||""}var E,g=0,_=null,b=null,y=null,x=null,k=!1,w=null,T=netflix.cadmium,L=T.Logger.create("object.pool"),A=null,P=!1,I="closed";return{videoSession:function(){return _},createVideoSession:a,destroyVideoSession:s,videoPlayer:function(){return b},createVideoPlayer:d,videoPlayerCreated:function(){return k},trackId:function(){return g},setTrackId:t,clearTrackId:n,videoId:function(){return E},setVideoId:e,initParams:function(){return w},setInitParams:r,playerWrapper:function(){return y},setPlayerWrapper:i,videoPlayerLoaded:function(){return P},mdxManager:function(){return x},setMdxManager:o,playContext:m(),setPlayContext:p,overrideBookmark:u,getCountry:v,drain:f}}(),netflix.cadmium.sizing=function(){function e(){p&&(p=!1,window.removeEventListener("resize",_,!1)),m=1,c.removeEventListener(c.knownEvents.FULLSCREEN_CHANGE,g)}function t(){d&&!p&&(u.initParams().windowScaling&&(p=!0,window.addEventListener("resize",_,!1)),c.addEventListener(c.knownEvents.FULLSCREEN_CHANGE,g),""===o.style.fontSize||s&&""===s.style.fontSize?setTimeout(g,v):m=parseFloat(o.style.fontSize)||1)}function n(e){a=netflix.cadmium,l=a.element,u=a.objects,c=a.UiEvents,o=e,d||(d=!0,r=l.create("div",{"class":"player-sizing"},o)),t()}function i(){e(),l.remove(r),d=!1,r=null,o=null,s=null,p=!1,m=1,a=null,l=null,u=null,c=null}var r,o,s,a,l,u,c,d=!1,p=!1,m=1,h=10,f=40,v=17,E="MS"===netflix.cadmium.browser.prefix()?h:f,g=function(){var e,t=l.getDimensions(o).h,n=l.getDimensions(r).h,i=t/100;n>i?(e=n/i,m/=e):i>n&&(e=i/n,m*=e),o.style.fontSize=m+"em",s&&(s.style.fontSize=m+"em")},_=function(){g(),c.fireEvent(c.knownEvents.WINDOW_RESIZE)}.debounce(E,!1);return{init:n,deinit:i,start:t,stop:e,setMdxControlWrapperEl:function(e){s=e,s.style.fontSize=m+"em"},clearMdxControlWrapperEl:function(){s=null}}}(),netflix.cadmium.fullscreen=function(){"use strict";function e(){var e=netflix.cadmium.objects.playerWrapper();return e?e.msRequestFullscreen?document.msFullscreenElement:void 0!==document.webkitIsFullScreen?document.webkitIsFullScreen:void 0!==document.mozFullScreen?document.mozFullScreen:(a.error("Could not determine fullscreen status."),!1):!1}function t(){var e=netflix.cadmium.objects.playerWrapper();e&&(e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen())}function n(){var e=netflix.cadmium.objects.playerWrapper();if(e)if(e.exitFullscreen)document.exitFullscreen();else if(e.msRequestFullscreen)document.msExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else{if(!document.webkitCancelFullScreen)return a.error("Could not exit fullscreen"),!1;document.webkitCancelFullScreen()}}function i(){e()?n():t()}function r(){netflix.cadmium.UiEvents.fireEvent(netflix.cadmium.UiEvents.knownEvents.FULLSCREEN_CHANGE,[e()])}function o(){document.removeEventListener("webkitfullscreenchange",r),document.removeEventListener("MSFullscreenChange",r),document.removeEventListener("mozfullscreenchange",r),l=!1}function s(){l&&o(),document.addEventListener("webkitfullscreenchange",r,!1),document.addEventListener("MSFullscreenChange",r,!1),document.addEventListener("mozfullscreenchange",r,!1),l=!0}var a=netflix.cadmium.Logger.create("fullscreen"),l=!1;return netflix.cadmium.playbackShutdown.take(1).doAction(o).subscribe(netflix.cadmium.util.NOOP,function(e){console.error(e)}),{init:s,deinit:o,isFullscreen:e,enter:t,exit:n,toggle:i}}(),function(){"use strict";function e(){c=!0}function t(){c=!1}function n(){var e;e=l.tryCatch(a&&a.toggle),e instanceof Error&&s.error(e)}function i(e){var t=e.keyCode;return a.isFullscreen()&&e.preventDefault(),t==p?void n():void(y[t]&&this.fireEvent(y[t],[e]))}function r(){this._super(),u=new Rx.Subject,Rx.Observable.fromEvent(document,"keydown").takeUntil(u).filter(function(){return c}).doAction(i.bind(this)).subscribe(d,s.getErrorHandler("keydown"),d)}var o=netflix.cadmium,s=o.Logger.create("keyboard.events"),a=o.fullscreen,l=o.util,u=null,c=!0,d=function(){},p="70",m="77",h="40",f="38",v="37",E="39",g="32",_="13",b={TOGGLE_MUTE:"togglemute",DECREASE_VOLUME:"decreasevolume",INCREASE_VOLUME:"increasevolume",SEEK_BACKWARD:"seekbackward",SEEK_FORWARD:"seekforward",TOGGLE_PLAY:"toggleplay"},y={};y[m]=b.TOGGLE_MUTE,y[h]=b.DECREASE_VOLUME,y[f]=b.INCREASE_VOLUME,y[v]=b.SEEK_BACKWARD,y[E]=b.SEEK_FORWARD,y[g]=b.TOGGLE_PLAY,y[_]=b.TOGGLE_PLAY;var x=o.Eventable.extend({init:r,enableShortcut:e,disableShortcut:t,knownEvents:b});o.keyboard=new x}(),netflix.cadmium.session=function(){"use strict";function e(){b.keepAlive()}function t(e){v.log("session.manager",e&&e.stack||e)}function n(e){var t=a(e);return b.newSession()||!t}function i(){E&&E.onNext()}function r(e,t){_.notify(e,t)}function o(){if(!y){if(m=netflix.cadmium,h=m.UiEvents,f=m.objects,v=m.Logger.create("session.manager"),v.log("init"),!b||!_)return void v.log("consolidated logging library failed to load.");y=!0,E=E||new Rx.Subject,g=g||new Rx.Subject;var n=h.knownEvents,i=Rx.Observable.fromEvent(h,n.VIDEO_FIRST_PLAY),r=Rx.Observable.fromEvent(h,n.VIDEO_ENDED),o=m.util.NOOP;i.takeUntil(g).take(1).map(function(){return f.videoPlayer()}).flatMap(function(e){return Rx.Observable.interval(x).map(function(){return e})}).takeUntil(g).takeUntil(E).takeUntil(r).filter(function(e){return e&&!e.getPaused()}).doAction(e).subscribe(o,t,o)}}function s(){var e=localStorage.getItem(k);if(e)try{e=JSON.parse(e)}catch(t){e=null}return e}function a(e){return y?u(e).currentSessionData:null}function l(e,t){if(y){var n=u(e),i=n.id,r=n.localStorageData,o=n.sessionData;c(r),o.timestamp=Date.now(),o.data=o.data||{},o.data[e]=t,r[i]=o,localStorage.setItem(k,JSON.stringify(r))}}function u(e){var t=d(),n=s()||{},i=n[t]||{},r=i.data&&i.data[e];return{id:t,localStorageData:n,sessionData:i,currentSessionData:r}}function c(e){var t=d();for(var n in e)e.hasOwnProperty(n)&&n!==t&&delete e[n];return e}function d(){var e=_.getCurrentSession("userSession");return e&&e.sessionId}function p(){y&&(i(),g&&g.onNext(),v.log("deinit"),m=null,h=null,f=null,v=null,E=null,g=null,y=!1)}var m,h,f,v,E,g,_=netflix.clientNotifications,b=netflix.session,y=!1,x=6e5,k="NFPlaybackSession",w=Object.freeze({PIN:"pin",AUDIO:"audio",SUBTITLE:"subtitle",VOLUME:"volume"});return{init:o,deinit:p,heartBeat:e,isExpired:n,setSessionData:l,getSessionData:a,endSession:i,log:r,SESSION_TYPES:w}}(),function(){"use strict";function e(){a=netflix.cadmium,l=a.xhr,u=a.objects,c=a.metadata,d=a.UiEvents,p=a.url,m=Rx.Observable,h=a.util,f=h.NOOP,v=a.Logger.create("postplay.data"),v.log("init"),k&&_&&_.length>0&&(v.info("Getting post play data in queue."),_.shift()),k=!0,E=E||new Rx.Subject;var e=u.initParams()||{};y=e.postPlayBaseUrl,x=e.postPlayApiRevision,_&&_.length||(E.onNext(),i(y,u.videoId()))}function t(){k&&(v.log("deinit"),E.onNext(),a=null,l=null,u=null,c=null,d=null,p=null,m=null,h=null,f=null,v=null,E=null,g=null,_=null,b=null,y=null,x=null,k=!1)}function n(){if(k||e(),_&&_.length>0){var t=_[0];return delete t.replay,m["return"](_[0])}return g.map(function(e){return e&&e.length&&e[0]}).takeUntil(E)}function i(e,t){if(!e)return void(g=m["throw"](new Error("No post play url available.")).takeUntil(E));if(isNaN(t))return void(g=m["throw"](new Error("Invalid movie id.")).takeUntil(E));var n=m.fromEvent(d,d.knownEvents.VIDEO_FIRST_PLAY),i=m["return"](u.videoPlayer()).filter(function(e){return!!e}),r=m.fromEvent(d,d.knownEvents.VIDEO_ENDED),o=m.fromEvent(d,d.knownEvents.VIDEO_POSTPLAY_ENTER);g=m.merge(n,i,r,o).take(1).takeUntil(E).flatMap(function(){var n={withCredentials:!0,urlEncoded:!0,data:{movieid:t}},i=u.initParams()||{};return x&&(n.data.revision=x),"prod"!==i.environment&&p.urlContains(/forcepromo=true/)&&(n.data.debugPromoPhase=!0),a.browser.supportsWebP()&&(n.headers={Accept:"image/webp, */*;"}),l.get(e,n).takeUntil(E).timeout(w).retryWithBackoff(T,L).doAction(function(e){v.log("data received",e)},v.getErrorHandler("request error"))}).map(function(e){return b=e.requestId,e=e.postplay,e instanceof Array||(e=[e]),e}).doAction(function(e){_=e}).shareReplay(),g.subscribe(f,v.getErrorHandler("dataAsObservable.subscribe"),f)}function r(e){e=e||{},v.info("Recording impression",e);var t={withCredentials:!0,urlEncoded:!0,data:{}};return x&&(t.data.revision=x),h.mix(e,t.data,null),E=E||new Rx.Subject,l.get(y,t).takeUntil(E).timeout(w).retryWithBackoff(T,L).doAction(function(e){v.log("Impression logged:",e)}).subscribe(f,v.getErrorHandler("xhr|impression"),f)}function o(e){return e?void _.unshift(e):void v.error("Cannot enqueue a null object.")}function s(){var e=_[0];e&&!e.replay&&(e.replay=!0,o(e))}var a,l,u,c,d,p,m,h,f,v,E,g,_,b,y,x,k=!1,w=1e4,T=5,L=1e3;netflix.cadmium.PostPlayData={init:e,deinit:t,getData:n,repeatCurrentPostPlayData:s,getRequestId:function(){return b},recordImpression:r}}(),function(){"use strict";function e(e){A||(A=!0,O=e||{},w.log("init"),x=O.localStorageKey||"uitracking.impressions",g=k.objects,_=k.UiEvents,y=k.UITrackingBuffer,B=O.maxRecords||250,P=!!O.enabled,I=O.requestId,C=O.location,S=O.debug,S&&(b=netflix.UITrackingOverlay),V=new Rx.Subject,n())}function t(){if(A){if(V&&V.onNext(),P=!1,I=null,C=null,N=null,R=[],D=[],M=[],H=-1,U=null,V=null,A=!1,S)for(var e,t=document.querySelectorAll(".uitracking-debug-overlay")||[],n=0;n<t.length;n++)e=t[n],e&&e.remove&&e.remove();S=!1}}function n(){w.log("Initiating event listeners."),L.fromEvent(window,"resize").merge(L.fromEvent(_,_.knownEvents.FULLSCREEN_CHANGE)).takeUntil(V).throttle(1e3).doAction(r).subscribe(T,w.getErrorHandler("window|resize"),T),y.initPolling(O)}function i(){return document.querySelectorAll("["+j+"]")}function r(){if(A){w.log("scanning...");try{var e,t=i(),n=Date.now(),r=[[],[],[],[]];w.log("Trackable items",t.length);for(var s,a=0;s=t[a];a++)e=o(s,n),r[e].push(s);if(E(),S){var l=[r[q].length+" new elements",t.length+" trackable",Date.now()-n+" ms"].join(", ");console.log("ui scan: "+l),b&&b.updateOverlays(r)}}catch(u){w.error(u)}}}function o(e,t){t=t||Date.now();var n=c(),i=e.getBoundingClientRect(),r=F,o=e.classList.contains(W);if(S){var s=e.getAttribute(j);w.log("el rect: ",s,i),w.log("window rect",n)}return m(i,n)&&(r=G,d(e,i)&&(r=Y,o||(r=q))),r===q&&(v(e,t),e.classList.add(W)),o&&Y>r&&e.classList.remove(W),r}function s(e){var t=e.getAttribute(j);if(!t)return null;var n=t.split(",");return n.length<4?null:{video_id:a(n[0]),track_id:a(n[1]),row:a(n[2]),rank:a(n[3]),request_id:n[4]||I||X,location:n[5]||C||X}}function a(e){return e=parseInt(e,10),isNaN(e)&&(e=K),e}function l(e,t){for(var n=["video_id","track_id","row","rank"],i=[],r=0;r<n.length;r++){var o=n[r];t.hasOwnProperty(o)||w.log("trackElement - trackingContext field not found: "+o),i.push(t[o])}i.push(t.request_id||""),i.push(t.location||""),e.setAttribute(j,i.join(","))}function u(e,t){l(e,t),o(e),b&&b.updateOverlays()}function c(){if(U)return U;if(0>H){var e=document.getElementById(z);H=e&&"fixed"==f(e,"position")?e.getBoundingClientRect().bottom:0}var t=window,n=document,i=n.documentElement,r=n.getElementsByTagName("body")[0],o=t.innerWidth||i.clientWidth||r.clientWidth,s=t.innerHeight||i.clientHeight||r.clientHeight;return U={left:0,top:H,right:o,bottom:s}}function d(e,t){var n,i,r=h(e,"parentNode"),o=[];for(n=0;i=r[n];n++){if(p(i))return!1;var s=f(i,"overflow");s&&s.match(/hidden|scroll|auto/)&&o.push(i)}for(n=0;i=o[n];n++)if(!m(t,i.getBoundingClientRect()))return!1;return!p(e)}function p(e){return"hidden"==f(e,"visibility")}function m(e,t){var n=e.left+(e.right-e.left)/2,i=e.top+(e.bottom-e.top)/2;return e.left==e.right||t.left==t.right?!1:n>=t.left&&n<=t.right&&i>=t.top&&i<=t.bottom}function h(e,t,n){for(var i=[],r=e[t];r&&9!==r.nodeType&&(void 0===n||1!==r.nodeType);)1===r.nodeType&&i.push(r),r=r[t];return i}function f(e,t){var n=document.defaultView;return n&&n.getComputedStyle?n.getComputedStyle(e,null).getPropertyValue(t):e.currentStyle?e.currentStyle[t]:""}function v(e,t){var n=s(e);b&&b.markAsVisible(e),w.info("Registering impression.",n),n?(n.time=t,R.push(n)):w.log("Impression: No trackingContext for element",e)}function E(){var e=R;if(R=[],S){for(var t=[],n=0,i=e.length;i>n;n++)t.push(e[n].row+","+e[n].rank+" "+e[n].video_id);w.log(t.join("\n"))}var r=JSON.parse(localStorage.getItem(x)||"[]");S&&w.log("saved impressions: "+r.length+"\nnew impressions: "+e.length+"\nmax impressions: "+B);var o=r.length+e.length;o>B&&(w.log("Buffer is full."),r.splice(0,o-B),S&&console.log("removing "+(o-B)+" items from storage to keep length <= "+B)),r=r.concat(e);try{localStorage.setItem(x,JSON.stringify(r)),S&&localStorage.setItem(Q,"true")}catch(s){M=M.concat(r)}}var g,_,b,y,x,k=netflix.cadmium,w=k.Logger.create("presentation.tracking"),T=k.util.NOOP,L=Rx.Observable,A=!1,P=!1,I=null,C=null,O=null,S=!1,N=null,R=[],D=[],M=[],H=-1,U=null,B=250,V=null,j="data-uitrack",W="uitracking-state-visible",z="hd",F=0,G=1,Y=2,q=3,K=-99,X="unknown",Q="uitracking.debug";netflix.cadmium.UITracking={init:e,deinit:t,scan:r,trackElement:u,getTrackingContext:s,getFallbackSendBuffer:function(){return P&&M&&M.length?M:[]},TRACKING_ATTRIBUTE:j}}(),netflix.UITrackingOverlay=function(){function e(e,t){return e.className.indexOf(t)>-1}function t(t,n){e(t,n)||(t.className+=" "+n)}function n(e,t){e.className=e.className.replace(t,"")}function i(e,t){for(var n,i=Array.prototype.slice.call(document.getElementsByClassName(e));n=i.shift();)t(n)}function r(e,t){for(var n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n])}var o="uitracking-debug-state-inwindow",s="uitracking-debug-state-visible",a="uitracking-debug-state-sent",l="uitracking-debug-overlay",u="uitracking-debug-state",c="#000",d="#c11",p="#de6400",m="#480c44",h=1,f=2,v=3,E={updateDebugStates:function(e){i(o,function(e){n(e,o)});for(var r=0;r<e.length;r++)for(var s=e[r],l=0,c=s.length;c>l;l++){var d=s[l];d.setAttribute(u,r),r>=h&&t(d,o),r>=v&&n(d,a)}},markAsVisible:function(e){t(e,s)},markOverlaysAsSent:function(){var e=this;i(s,function(e){t(e,a),n(e,s)}),i(l,function(t){e.setOverlayColor(t,m)})},updateOverlays:function(e){e&&this.updateDebugStates(e),i(l,function(e){e.parentNode.removeChild(e)});var t=this;i(o,function(e){t.addDebugOverlay(e)})},addDebugOverlay:function(n){var i=n.getAttribute(u,i)||0,o=i>=f?"solid":"dotted",s=i>=v?d:p;f>i&&(s=c),e(n,a)&&(s=m);var h=netflix.cadmium.UITracking.getTrackingContext(n),E=n.getBoundingClientRect(),g=document.createElement("div");r(g,{position:"fixed",zIndex:1e3,"pointer-events":"none",left:E.left+"px",top:E.top+"px",width:E.width-4+"px",height:E.height-4+"px",border:o+" 2px"}),t(g,l);var _=document.createElement("span");_.className="has-color",r(_,{font:"10pt arial",padding:"5px",margin:0,color:"#fff","float":"left"}),_.innerHTML=h.row+","+h.rank+" &nbsp; "+h.video_id,g.appendChild(_);var b=document.createElement("div");b.className="has-color",r(b,{margin:"0 auto",position:"relative",top:Math.floor(E.height/2)-4-16+"px",width:"16px",height:"16px",borderRadius:"8px"}),g.appendChild(b),document.getElementsByTagName("body")[0].appendChild(g),this.setOverlayColor(g,s)},setOverlayColor:function(e,t){r(e,{borderColor:t});for(var n=e.getElementsByClassName("has-color"),i=0;i<n.length;i++)r(n[i],{backgroundColor:t})}};return E}(),function(){"use strict";var e,t,n,i,r,o,s,a,l,u,c,d,p,m,h={initPolling:function(f){f=f||{},s=!0,e=netflix.constants,t=netflix.cadmium,n=t.Logger.create("presentation.tracking.sender"),i=t.UITracking,r=t.xhr,o=t.util.NOOP,l="uitracking.debug",u=e.page.UITRACKING_SEND_RATE_MS||8e3,d=e.page.UITRACKING_SEND_RATE_MAX_DECAY_MULTIPLIER||5,p=1,m=0,a=f.localStorageKey||"uitracking.impressions",c=f.endpoint||"https://presentationtracking.netflix.com/users/presentationtracking",h.flush(),n.log("Init polling at "+u);var v=this;setInterval(function(){n.log("Attempting to flush buffer...");try{++m>=p&&v.flush()}catch(e){n.log("Error flushing.",e)}},u)},flush:function(){if(s){n.log("Flush.");var e=[];try{e=i.getFallbackSendBuffer(),e.length||(e=JSON.parse(localStorage.getItem(a)||"[]"),i.retrySend||localStorage.setItem(a,"[]"))}catch(t){n.log("Error flushing.",t)}if(e&&e.length){m=0,p=Math.max(p++,d),this.send(e);var r=localStorage.getItem(l)||!1;r&&(this._logSentTitles(e),netflix.UITrackingOverlay&&netflix.UITrackingOverlay.markOverlaysAsSent(),localStorage.removeItem(l))}}},send:function(t){n.log("Sending.");var i=e.page,s={esn:i.ESN||null,esnPrefix:i.ESNPrefix||null,country:i.COUNTRY,application_name:i.APP_NAME,application_v:i.APP_VERSION,sw_version:i.UITRACKING_USER_AGENT||"",data:JSON.stringify(t)};n.log("sending",s);var a={withCredentials:!0,urlEncoded:!1,data:s},l=r.post(c,a).retryWithBackoff(5,1e3).doAction(function(e){n.log("Response:",e)});return l.subscribe(o,n.getErrorHandler("xhr|post"),o),l},_logSentTitles:function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].video_id);t=t.sort(),console.log("SENT TITLES: "+t.length,t),console.log("----------------------------------------------------")}};netflix.cadmium.UITrackingBuffer=h}(),function(){"use strict";function e(e,t){var n,i;for(n in t)i=t[n],i.ns?e.setAttributeNS(i.ns,n,i.value):e.setAttribute(n,i)}function t(e,t){e.ui=e.ui||{},t=t||e.ui.timedText&&e.ui.timedText._config||{};var r=e.getTimedTextTrack();e.ui.timedText&&"function"==typeof e.ui.timedText.destroy&&e.ui.timedText.destroy(),r&&r.isImageBased?e.ui.timedText=new i(e,t):e.ui.timedText=new n(e,t)}var n=netflix.cadmium.Class.extend({_player:null,_config:null,init:function(e,t){this._player=e,this._config=t||{}},destroy:function(){this._player=null},setBounds:function(e){this._player&&this._player.setTimedTextBounds(e)}}),i=n.extend({_elementsInView:null,_containerEl:null,_boundingReferenceEl:null,_timedTextContainerEl:null,_debugEl:null,_disposed:null,_recycledImageTags:null,_bounds:null,_viewBox:null,_config:null,_configure:function(e){e=e||{},this._config={},this._config.forceCCPaint=!!e.forceCCPaint,this._config.ccQNREnabled="undefined"==typeof e.ccQNREnabled?!0:!!e.ccQNREnabled,this._config.ccQNRsla=e.ccQNRsla||100},init:function(e,t){this._super(e),this._elementsInView={},this._disposed=new Rx.Subject,this._recycledImageTags=[],this._timeoutHandle=null,this._configure(t),this._createElements(),this._createEventSubscriptions()},destroy:function(){this._disposed&&!this._disposed.isStopped&&(this._disposed.onNext(),this._disposed.onCompleted(),this._containerEl&&this._containerEl.parentNode&&this._containerEl.parentNode.removeChild(this._containerEl),this._player=null,this._elementsInView=null,this._containerEl=null,this._timedTextContainerEl=null,this._disposed=null,this._recycledImageTags=null,this._boundingReferenceEl=null,this._bounds=null,this._viewBox=null,this._config=null)},show:function(e){this._addTimedText(e)},hide:function(e){this._removeTimedText(e.id)},setBounds:function(e){if(this._disposed&&!this._disposed.isStopped&&(e=e||{},void 0!==e.bottom&&e.bottom!==(this._bounds&&this._bounds.bottom))){this._player.ui._timedTextBounds=this._bounds=e;var t=this;requestAnimationFrame(function(){t._disposed&&!t._disposed.isStopped&&(t._containerEl.style.bottom=t._getBottomOffset(t._bounds.bottom)+"px",t._forceRedraw())})}},_getBottomOffset:function(e){var t=this._boundingReferenceEl.getBoundingClientRect(),n=t.top,i=Math.floor(n-e),r=0;return 0>i&&(r=-1*i),r},_createElements:function(){this._elementsInView={},this._recycledImageTags=[],this._containerEl=document.createElement("div"),this._containerEl.style.cssText="display: block;position: absolute;top: 0;right: 0;bottom: 0;left: 0;transform: translateZ(0);-webkit-transform: translateZ(0);",this._timedTextContainerEl=document.createElementNS("http://www.w3.org/2000/svg","svg"),e(this._timedTextContainerEl,{width:"100%",height:"100%",style:"position: absolute; top: 0; bottom: 0; left: 0; right: 0;"}),this._boundingReferenceEl=document.createElementNS("http://www.w3.org/2000/svg","rect"),e(this._boundingReferenceEl,{fill:"none",stroke:"none",x:"0",y:"0"}),this._timedTextContainerEl.appendChild(this._boundingReferenceEl),this._containerEl.appendChild(this._timedTextContainerEl),this._player.getElement().appendChild(this._containerEl)},_createEventSubscriptions:function(){var e=Rx.Observable,t=netflix.cadmium.util.NOOP,n=e.fromEvent(this._player,"closed");e.fromEvent(this._player,"showsubtitle").takeUntil(this._disposed).takeUntil(n).doAction(this.show.bind(this)).subscribe(t,function(e){console.error(e)},t),e.fromEvent(this._player,"removesubtitle").takeUntil(this._disposed).takeUntil(n).doAction(this.hide.bind(this)).subscribe(t,function(e){console.error(e)},t)},_createTimedTextElement:function(t,n){var i=URL.createObjectURL(new Blob([t.imageData],{type:"image/png"})),r=this._createImageTag();return r.onload=function(e){URL.revokeObjectURL(this.href),n&&n(r)},e(r,{href:{ns:"http://www.w3.org/1999/xlink",value:i},width:t.sizeX,height:t.sizeY,x:t.originX,y:t.originY}),r},_createImageTag:function(){return this._recycledImageTags.pop()||document.createElementNS("http://www.w3.org/2000/svg","image")},_addTimedText:function(t){var n=this,i=this._createTimedTextElement(t,function(){n._config.ccQNREnabled&&n._removeNodesFromQueue()});if(this._timeoutHandle&&clearTimeout(this._timeoutHandle),this.setBounds(this._player.ui._timedTextBounds),this._viewBox||(this._viewBox="0 0 "+t.rootContainerExtentX+" "+t.rootContainerExtentY,e(this._timedTextContainerEl,{viewBox:this._viewBox}),e(this._boundingReferenceEl,{width:t.rootContainerExtentX,height:t.rootContainerExtentY,fill:"none"})),this._timedTextContainerEl.appendChild(i),this._elementsInView[t.id]=i,window.DEBUG){this._debugEl||(this._debugEl=this._boundingReferenceEl,e(this._debugEl,{stroke:"yellow","stroke-width":"4",fill:"none"}),this._timedTextContainerEl.appendChild(this._debugEl));var r='<g xmlns="http://www.w3.org/2000/svg"><rect x="'+t.originX+'" y="'+t.originY+'" width="'+t.sizeX+'" height="'+t.sizeY+'" fill="rgba(0,0,0,0)" stroke="yellow"></rect><text x="'+t.originX+'" y="'+(t.originY-6)+'" font-size="18" fill="yellow">( '+[t.originX,t.originY,t.sizeX,t.sizeY].join(", ")+" )</text></g>",o=(new DOMParser).parseFromString(r,"text/xml").firstChild;this._timedTextContainerEl.appendChild(o),this._elementsInView[t.id+"_debug"]=o}else this._debugEl&&(e(this._debugEl,{stroke:"none"}),this._debugEl=null)},_removeNodesFromQueue:function(){if(this._idRemovalQueue){for(;this._idRemovalQueue.length;)this._removeNodeForId(this._idRemovalQueue.pop());this._forceRedraw()}},_removeNodeForId:function(e){var t=this._elementsInView[e],n=e+"_debug",i=this._elementsInView[n];t&&this._timedTextContainerEl.removeChild(t),i&&this._timedTextContainerEl.removeChild(i),this._recycleImageTag(t),t&&delete this._elementsInView[e],i&&delete this._elementsInView[n]},_removeTimedText:function(e){var t;this._config.ccQNREnabled?(t=this,this._idRemovalQueue=this._idRemovalQueue||[],this._idRemovalQueue.push(e),this._timeoutHandle=setTimeout(function(){t._removeNodesFromQueue()},this._config.ccQNRsla)):(this._removeNodeForId(e),this._forceRedraw())},_forceRedraw:function(){if(this._config.forceCCPaint){var e=this;this._containerEl.style.display="none",requestAnimationFrame(function(){e._containerEl.style.display=""})}},_recycleImageTag:function(e){if(e&&e.attributes){var t,n;for(t=0;t<e.attributes.length;t++)n=e.attributes.item(t),n&&e.removeAttribute(n.name);this._recycledImageTags.push(e)}}});window.netflix.cadmium.timedtext={create:function(e,n){var i=netflix.cadmium.util.NOOP,r=Rx.Observable.fromEvent(e,"closed");t(e,n),Rx.Observable.fromEvent(e,"timedtexttrackchanged").takeUntil(r).map(function(e){return e.target}).doAction(t).subscribe(i,function(e){console.error(e)},i)}}}(),netflix.cadmium.views=function(){function e(e,t){o[t].push(e)}function t(e,t){s||(o[r.standard].forEach(function(e){e.deinit()}),o[r.fatal].indexOf(e)>=0&&(s=!0),e.init.apply(this,t))}function n(){s=!1}var i,r=Object.freeze({standard:1,fatal:2}),o={},s=!1;for(i in r)r.hasOwnProperty(i)&&(i=r[i],o[i]=[]);return{types:r,register:e,show:t,deinit:n}}(),function(){var e=netflix.cadmium;e.ui.Component=e.Eventable.extend({parentNode:null,initialized:!1,config:{id:"player-component"},destroy:function(){if(this.initialized){this.initialized=!1,this.events={};for(var e in this)this.hasOwnProperty(e)&&(this[e]=null)}},init:function(e,t){this._super(),this.initialized&&this.destroy(),this.initialized=!0,this.parentNode=e,this.config=t||this.config}})}(),function(){"use strict";var e=netflix.cadmium,t=e.element,n=t.classNames.hidden,i=t.classNames.active,r=e.dom.DIV;e.ui.RadialProgressComponent=e.ui.Component.extend({progressEl:null,percent:0,destroy:function(){this.initialized&&(this.initialized=!1,t.remove(this.progressEl),this._super())},init:function(e,t){this._super(e,t);var o,s=["player-progress-round",this.config.hideWhenEmpty?n:i].join(" ");this.progressEl=r({"class":s,id:this.config.id},r({"class":"player-progress-loading"}),o=r({"class":"player-progress-val"},"0%")),this.progressVal=o,this.parentNode.appendChild(this.progressEl)},update:function(e){var t=Math.floor(e);if(this.initialized&&this.percent!==t){this.percent=t;var r=0===this.percent&&this.config.hideWhenEmpty||100===this.percent&&this.config.hideWhenFull,o=this;r?(o.progressEl.classList.remove(i),requestAnimationFrame(function(){o.progressEl.classList.add(n)})):(this.progressEl.classList.add(i),requestAnimationFrame(function(){o.initialized&&o.progressEl.classList.remove(n)})),this.progressVal.textContent=this.percent+"%"}}})}(),function(){var e=netflix.cadmium,t=e.element,n=e.objects,i=e.UiEvents,r=e.browser.pointerTypes,o=t.classNames,s=o.active,a=o.hidden,l=o.animate;e.ui.ScrubberComponent=e.ui.Component.extend({config:{id:"scrubber-component"},value:0,max:0,buffer:0,dragging:!1,pointerEventData:null,dragIncorrectDirectionPercentAllowed:.3,knownEvents:Object.freeze({DRAG_START:"dragstart",DRAG_END:"dragend",NEW_VALUE:"newvalue",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_MOVE:"mousemove",CLICK:"click"}),orientation:null,wrapperEl:null,progressEl:null,completedEl:null,handleEl:null,snapbackDragEl:null,type:null,playerWrapperEl:null,setupPointerData:function(e){this.setupPointerDataDimensions(),this.pointerEventData.drag={start:{value:this.value,max:this.max},pointer:{x:e.pageX,y:e.pageY}}},setupPointerDataDimensions:function(){var e=this.progressEl;if(e&&this.max){var n=this.value/this.max,i=n*e.offsetWidth,r=n*e.offsetHeight;this.pointerEventData.dimensions={handleEl:{left:i,top:r,dimensions:t.getDimensions(this.handleEl)},wrapperEl:t.getDimensions(this.wrapperEl),playerWrapperEl:t.getDimensions(this.playerWrapperEl)}}},pointerDownHandler:function(e){this.wrapperEl.contains(e.target)&&(e.component=this,this.dragging||(this.setupPointerData(e),this.dragging=!0,this.pointerEventData.drag.current=this.determineEventValues(e,!1),this._updateSnapBackEl(this.pointerEventData.drag.current),this.fireEvent(this.knownEvents.MOUSE_ENTER,[e,this]),this.fireEvent(this.knownEvents.DRAG_START,[e,this])))},pointerMoveHandler:function(e){var t=!1;if(e.component=this,this.dragging){var n=this.pointerEventData.dimensions.wrapperEl,i=this.pointerEventData.dimensions.playerWrapperEl;this.isValidEventLocation(e)&&(Math.abs(e.pageY-this.pointerEventData.drag.pointer.y)>i.h*this.dragIncorrectDirectionPercentAllowed&&(t=!0),e.wrapperDimensions=n,this.pointerEventData.drag.current=this.determineEventValues(e,t),this._updateDOM(this.pointerEventData.drag.current))}else this.isValidPointerType(e)&&this.wrapperEl.contains(e.target)&&(this.pointerEventData&&this.pointerEventData.dimensions||this.setupPointerData(e),this.isValidEventLocation(e)&&(this.handleEl.contains(e.target)||this.handleEl.classList.remove(s),this.pointerEventData.drag.current=this.determineEventValues(e,t),this.fireEvent(this.knownEvents.MOUSE_MOVE,[e,this])))},pointerUpHandler:function(e){var t=e.pointerType;e.component=this,this.dragging?(this.dragging=!1,this.pointerEventData&&this.pointerEventData.dimensions||this.setupPointerData(e),e.wrapperDimensions=this.pointerEventData.dimensions.wrapperEl,e.haveHandleTargetted=this.handleEl.contains(e.target)&&t===r.mouse,this.fireEvent(this.knownEvents.DRAG_END,[e,this])):this.isValidPointerType(e)&&this.wrapperEl.contains(e.target)&&(this.pointerEventData&&this.pointerEventData.dimensions||this.setupPointerData(e),this.pointerEventData.drag.current=this.determineEventValues(e,!1),this.fireEvent(this.knownEvents.CLICK,[e,this]))},pointerEnterHandler:function(e){this.isValidPointerType(e)&&this.isValidEventLocation(e)&&(e.component=this,this.pointerEventData&&this.pointerEventData.dimensions||this.setupPointerData(e),this.pointerEventData.drag.current=this.determineEventValues(e,!1),this.fireEvent(this.knownEvents.MOUSE_ENTER,[e,this]))},pointerLeaveHandler:function(e){!this.dragging&&this.isValidPointerType(e)&&(e.component=this,this.handleEl.classList.remove(s),this.fireEvent(this.knownEvents.MOUSE_LEAVE,[e,this]))},mouseDownHandler:function(e){e.pointerType=r.mouse,this.pointerDownHandler(e)},mouseMoveHandler:function(e){e.pointerType=r.mouse,this.pointerMoveHandler(e)},mouseUpHandler:function(e){e.pointerType=r.mouse,this.pointerUpHandler(e)},mouseOverHandler:function(e){this.wrapperEl.contains(e.relatedTarget)||(e.component=this,e.pointerType=r.mouse,this.pointerEventData&&this.pointerEventData.dimensions||this.setupPointerData(e),this.isValidEventLocation(e)&&(this.pointerEventData.drag.current=this.determineEventValues(e,!1),this.fireEvent(this.knownEvents.MOUSE_ENTER,[e,this])))},mouseOutHandler:function(e){this.dragging||this.wrapperEl.contains(e.relatedTarget)||(e.component=this,e.pointerType=r.mouse,this.handleEl.classList.remove(s),this.fireEvent(this.knownEvents.MOUSE_LEAVE,[e,this]));
},isValidEventLocation:function(e){var t=this.pointerEventData&&this.pointerEventData.dimensions&&this.pointerEventData.dimensions.wrapperEl;return t?this.orientation==this.type.orientations.horizontal?e.pageX>=t.x&&e.pageX<=t.x+t.w:e.pageY>=t.y&&e.pageY<=t.y+t.h:!1},isValidPointerType:function(e){var t=e.pointerType;return t===r.touch||t===r.mouse||t===r.pen},determineEventValues:function(e,n){var i,r,o,s,a=e.wrapperDimensions||t.getDimensions(this.wrapperEl),l=!1;return this.orientation===this.type.orientations.horizontal?(n?(r=this.pointerEventData.dimensions.handleEl.left,i=this.pointerEventData.drag.start.value,l=!0):(r=e.pageX-a.x,s=Math.min(100,Math.max(0,r/a.w)),i=s*this.max),o=e.pageX):(n?(r=this.pointerEventData.dimensions.handleEl.bottom,i=this.max-this.pointerEventData.drag.start.value,l=!0):(r=this.max-(e.pageY-a.y),s=Math.min(100,Math.max(0,r/a.h)),i=s*this.max),o=e.pageY),{value:i,animate:l,relativePosition:r,absolutePosition:o,wrapperDimensions:a}},_updateSnapBackEl:function(e){e=e||{},this.value="undefined"!=typeof e.value?e.value:this.value,this.max=e.max||this.max;var t=this.value/this.max,n=100*t+"%",i=this.orientation===this.type.orientations.horizontal?"left":"bottom";this.snapbackDragEl.style[i]=n},_updateDOM:function(e){e=e||{},this.value="undefined"!=typeof e.value?e.value:this.value,this.max=e.max||this.max,this.buffer=e.buffer||this.buffer;var t=this.value/this.max,n=this.buffer/this.max,i=e.animate?"add":"remove",r=100*t+"%",o=100*(n-t)+"%",s=this;this.fireEvent(this.knownEvents.NEW_VALUE,[this]),this.handleEl.classList[i](l),this.completedEl.classList[i](l),window.setTimeout(function(){s.orientation===s.type.orientations.horizontal?(s.handleEl.style.left=r,s.completedEl.style.width=r,s.bufferedTimeEl.style.width=o):(s.handleEl.style.bottom=r,s.completedEl.style.height=r)},1)},update:function(e,t,n){this.dragging||this._updateDOM({value:e,max:t,buffer:n,animate:!1})},incrementScrubberPosition:function(e){var n,i,r=Math.min(this.max,Math.max(0,this.value+e)),o=r/this.max,s=t.getDimensions(this.wrapperEl);this.orientation===this.type.orientations.horizontal?(n=s.w*o,i=s.x+n):(n=s.h*o,i=s.y-(100-n)),this.pointerEventData||(this.pointerEventData={}),this.pointerEventData.drag||(this.pointerEventData.drag={}),this.pointerEventData.drag.current={value:r,animate:!1,relativePosition:n,absolutePosition:i,wrapperDimensions:s},this.update(r,this.max)},updatePercent:function(e){var t=e*this.max;window.requestAnimationFrame(function(){this._updateDOM({value:t})}.bind(this))},show:function(){this.wrapperEl.classList.add(a)},hide:function(){this.dragging||this.wrapperEl.classList.remove(a)},destroy:function(){this.initialized&&(this.initialized=!1,window.navigator.msPointerEnabled?(this.playerWrapperEl.removeEventListener("MSPointerDown",this.boundPointerDownHandler,!1),this.playerWrapperEl.removeEventListener("MSPointerMove",this.boundPointerMoveHandler,!1),this.playerWrapperEl.removeEventListener("MSPointerUp",this.boundPointerUpHandler,!1),this.wrapperEl.removeEventListener("MSPointerEnter",this.boundPointerEnterHandler,!1),this.wrapperEl.removeEventListener("MSPointerLeave",this.boundPointerLeaveHandler,!1)):(this.playerWrapperEl.removeEventListener("mousedown",this.boundMouseDownHandler,!1),this.playerWrapperEl.removeEventListener("mousemove",this.boundMouseMoveHandler,!1),this.playerWrapperEl.removeEventListener("mouseup",this.boundMouseUpHandler,!1),this.wrapperEl.removeEventListener("mouseover",this.boundMouseOverHandler,!1),this.wrapperEl.removeEventListener("mouseout",this.boundMouseOutHandler,!1)),i.removeEventListener(i.knownEvents.WINDOW_RESIZE,this.setupPointerDataDimensions),t.remove([this.handleEl,this.completedEl,this.progressEl,this.wrapperEl])),this._super()},init:function(r,o){this._super(r,o),this.type=e.ui.ScrubberComponent,this.pointerEventData=o&&o.pointerEventData||{},this.orientation=o&&o.orientation||this.type.orientations.horizontal,this.wrapperEl=t.create("div",{"class":"player-scrubber "+this.orientation.clazz,id:this.config.id||null}),this.progressEl=t.create("div",{"class":"player-scrubber-progress"}),this.completedEl=t.create("div",{"class":"player-scrubber-progress-completed"},this.progressEl),this.bufferedTimeEl=t.create("div",{"class":"player-scrubber-progress-buffered"},this.progressEl),this.wrapperEl.appendChild(this.progressEl),this.handleEl=t.create("button",{"class":"player-scrubber-target"},this.wrapperEl),this.indicatorEl=t.create("div",{"class":"player-scrubber-handle"},this.handleEl),this.snapbackDragEl=t.create("div",{"class":"trickplay-position trickplay-snapback"},this.progressEl),this.parentNode.appendChild(this.wrapperEl),this.playerWrapperEl=n.playerWrapper(),this.boundPointerDownHandler=this.pointerDownHandler.bind(this),this.boundPointerMoveHandler=this.pointerMoveHandler.bind(this),this.boundPointerUpHandler=this.pointerUpHandler.bind(this),this.boundPointerEnterHandler=this.pointerEnterHandler.bind(this),this.boundPointerLeaveHandler=this.pointerLeaveHandler.bind(this),this.boundMouseDownHandler=this.mouseDownHandler.bind(this),this.boundMouseMoveHandler=this.mouseMoveHandler.bind(this),this.boundMouseUpHandler=this.mouseUpHandler.bind(this),this.boundMouseOverHandler=this.mouseOverHandler.bind(this),this.boundMouseOutHandler=this.mouseOutHandler.bind(this),window.navigator.msPointerEnabled?(this.playerWrapperEl.addEventListener("MSPointerDown",this.boundPointerDownHandler,!1),this.playerWrapperEl.addEventListener("MSPointerMove",this.boundPointerMoveHandler,!1),this.playerWrapperEl.addEventListener("MSPointerUp",this.boundPointerUpHandler,!1),this.wrapperEl.addEventListener("MSPointerEnter",this.boundPointerEnterHandler,!1),this.wrapperEl.addEventListener("MSPointerLeave",this.boundPointerLeaveHandler,!1)):(this.playerWrapperEl.addEventListener("mousedown",this.boundMouseDownHandler,!1),this.playerWrapperEl.addEventListener("mousemove",this.boundMouseMoveHandler,!1),this.playerWrapperEl.addEventListener("mouseup",this.boundMouseUpHandler,!1),this.wrapperEl.addEventListener("mouseover",this.boundMouseOverHandler,!1),this.wrapperEl.addEventListener("mouseout",this.boundMouseOutHandler,!1)),i.addEventListener(i.knownEvents.WINDOW_RESIZE,this.setupPointerDataDimensions,this)}}),e.ui.ScrubberComponent.orientations=Object.freeze({horizontal:{id:1,clazz:"horizontal"},vertical:{id:2,clazz:"vertical"}})}(),function(){"use strict";var e=netflix.cadmium,t=e.UiEvents,n=e.element,i=n.classNames,r=i.visible,o=i.active,s=e.browser.pointerTypes,a=Rx.Observable,l=function(){},u=3e3;e.ui.MenuComponent=e.ui.Component.extend({openerEl:null,config:{id:"menu-component"},useMouseTriangleDetection:!1,menuMouseTriangle:null,hideMenuTimeout:null,hideMenuDelay:300,showEvent:"mouseover",mouseOverEvent:"menu-mouseover",menuEl:null,destroy:function(){this.initialized&&(this.initialized=!1,window.navigator.msPointerEnabled&&(document.removeEventListener("MSPointerMove",this.boundPointermoveHandler),this.menuEl.removeEventListener("MSPointerOut",this.boundPointeroutMenuHandler),this.menuEl.removeEventListener("MSPointerOver",this.boundPointeroverMenuHandler)),this.openerEl.removeEventListener(this.showEvent,this.boundMouseoverOpenerHandler),this.openerEl.removeEventListener("mouseout",this.boundMouseoutOpenerHandler),t.removeEventListener(t.knownEvents.SHOW_MENU,this.boundMenuShownHandler),document.removeEventListener("mousemove",this.boundMousemoveHandler),this.menuEl.removeEventListener("mouseout",this.boundMouseoutMenuHandler),this.menuEl.removeEventListener("mouseover",this.boundMouseoverMenuHandler),this.menuEl.removeEventListener("transitionend",this.boundFadeoutEndedHandler),n.remove(this.menuEl),this.menuMouseTriangle=null,this.menuEl=null),this._super()},init:function(e,i,r){this._super(e,r),this.openerEl=i,this.hideMenuDelay=r.hideMenuDelay||this.hideMenuDelay,this.showEvent=r.showEvent||this.showEvent,this.menuEl=n.create("div",{"class":"player-menu",id:this.config.id||null},this.parentNode),this.boundMouseoverOpenerHandler||(window.navigator.msPointerEnabled?(this.boundPointermoveHandler=this.pointermoveHandler.bind(this),this.boundPointeroutMenuHandler=this.pointeroutMenuHandler.bind(this),this.boundPointeroverMenuHandler=this.pointeroverMenuHandler.bind(this)):(this.boundMousemoveHandler=this.mousemoveHandler.bind(this),this.boundMouseoutMenuHandler=this.mouseoutMenuHandler.bind(this),this.boundMouseoverMenuHandler=this.mouseoverMenuHandler.bind(this)),this.boundMouseoverOpenerHandler=this.mouseoverOpenerHandler.bind(this),this.boundMouseoutOpenerHandler=this.mouseoutOpenerHandler.bind(this),this.boundMenuShownHandler=this.menuShownHandler.bind(this),this.boundFadeoutEndedHandler=this.fadeoutEndedHandler.bind(this),this.boundHide=this.hide.bind(this)),this.openerEl.addEventListener(this.showEvent,this.boundMouseoverOpenerHandler),this.openerEl.addEventListener("mouseout",this.boundMouseoutOpenerHandler),t.addEventListener(t.knownEvents.SHOW_MENU,this.boundMenuShownHandler)},update:function(e){this.initialized&&(e?this.show():this.hide())},show:function(){if(!this.isShowing()){window.navigator.msPointerEnabled?document.addEventListener("MSPointerMove",this.boundPointermoveHandler):document.addEventListener("mousemove",this.boundMousemoveHandler),this.useMouseTriangleDetection=!1,window.clearTimeout(this.hideMenuTimeout),this.menuEl.classList.add(r),this.openerEl.classList.add(o);var e=this;window.setTimeout(function(){if(this.initialized){var i=n.getDimensions(e.menuEl),r=n.getDimensions(e.openerEl);t.fireEvent(t.knownEvents.SHOW_MENU,[e.config.id]),e.menuMouseTriangle={a:{x:r.x+r.w/2,y:r.y+r.h},b:{x:i.x,y:i.y+.95*i.h},c:{x:i.x+i.w,y:i.y+.95*i.h}},e.menuEl.classList.add(o),window.navigator.msPointerEnabled?(e.menuEl.addEventListener("MSPointerOut",e.boundPointeroutMenuHandler),e.menuEl.addEventListener("MSPointerOver",e.boundPointeroverMenuHandler)):(e.menuEl.addEventListener("mouseout",e.boundMouseoutMenuHandler),e.menuEl.addEventListener("mouseover",e.boundMouseoverMenuHandler))}}.bind(this),1)}},showTickler:function(){this.show(),t.fireEvent(t.knownEvents.FORCE_SHOW_MENU),a.timer(u).takeUntil(a.fromEvent(this,this.mouseOverEvent)).doAction(this.hide.bind(this),l,function(){t.fireEvent(t.knownEvents.REMOVE_FORCE_SHOW_MENU)}).subscribe()},hide:function(){this.isShowing()&&(window.navigator.msPointerEnabled?(document.removeEventListener("MSPointerMove",this.boundPointermoveHandler),this.menuEl.removeEventListener("MSPointerOut",this.boundPointeroutMenuHandler),this.menuEl.removeEventListener("MSPointerOver",this.boundPointeroverMenuHandler)):(document.removeEventListener("mousemove",this.boundMousemoveHandler),this.menuEl.removeEventListener("mouseout",this.boundMouseoutMenuHandler),this.menuEl.removeEventListener("mouseover",this.boundMouseoverMenuHandler)),t.fireEvent(t.knownEvents.HIDE_MENU,[this.config.id]),this.menuEl.addEventListener("transitionend",this.boundFadeoutEndedHandler),this.menuEl.classList.remove(o),this.openerEl.classList.remove(o))},fadeoutEndedHandler:function(e){e.target===this.menuEl&&(e.stopPropagation(),this.menuEl.classList.contains(o)||this.menuEl.classList.remove(r),this.menuEl.removeEventListener("transitionend",this.boundFadeoutEndedHandler))},menuShownHandler:function(e){e!==this.config.id&&this.update(!1)},mousemoveHandler:function(e){this.useMouseTriangleDetection&&null!==this.menuMouseTriangle&&(n.isPointInTriangle({x:e.pageX,y:e.pageY},this.menuMouseTriangle.a,this.menuMouseTriangle.b,this.menuMouseTriangle.c)||this.hide())},pointermoveHandler:function(e){var t=e.pointerType;t!==s.mouse?(e.preventDefault(),this.menuEl.contains(e.target)||this.openerEl.contains(e.target)||this.update(!1)):this.mousemoveHandler(e)},mouseoverMenuHandler:function(){this.useMouseTriangleDetection=!1,this.fireEvent(this.mouseOverEvent),window.clearTimeout(this.hideMenuTimeout)},pointeroverMenuHandler:function(e){var t=e.pointerType;t!==s.mouse?e.preventDefault():(this.fireEvent(this.mouseOverEvent),this.mouseoverMenuHandler())},mouseoutMenuHandler:function(e){var t=e.relatedTarget;this.menuEl.contains(t)||this.openerEl.contains(t)||(this.hideMenuTimeout=window.setTimeout(this.boundHide,this.hideMenuDelay))},pointeroutMenuHandler:function(e){var t=e.pointerType;t!==s.mouse?e.preventDefault():this.mouseoutMenuHandler(e)},mouseoverOpenerHandler:function(){this.update(!0)},mouseoutOpenerHandler:function(e){this.openerEl.contains(e.relatedTarget)||(this.useMouseTriangleDetection=!0)},isShowing:function(){return this.menuEl.classList.contains(o)}})}(),function(){var e=netflix.cadmium,t=e.element,n=e.objects,i=e.UiEvents,r=e.keyboard,o=e.session,s=.1,a="icon-player-volume-";e.ui.VolumeMenuComponent=e.ui.MenuComponent.extend({id:null,wrapper:null,scrubber:null,volumeControlHeight:0,volumeTextNode:null,muted:!1,savedVolume:0,videoPlayer:null,disposed:null,normalize:function(e){var t=e/(this.volumeControlHeight||1);return.05>t?t=0:t>.97&&(t=1),t},updateVolumeDisplay:function(e){for(var t=parseInt(e),n=Math.min(Math.ceil(t/33),3),i=0;4>i;i++)this.parentNode.classList.remove(a+i);this.parentNode.classList.add(a+n)},volumeLevelChanged:function(e){var t=e.value,n=this.normalize(t);n!==this.getVolume()&&(this.setVolume(n),this.updateVolumeDisplay(100*n))},clickScrubberHandler:function(e,t){t.value=t.pointerEventData.drag.current.value,this.volumeLevelChanged(t),this.scrubber.updatePercent(this.getVolume())},setVolume:function(e){e!==this.getVolume()&&(this.videoPlayer.setVolume(e),this.muted=0===e,this.videoPlayer.setMuted(this.muted),o.setSessionData(o.SESSION_TYPES.VOLUME,{percentage:e,mute:this.muted}))},getVolume:function(){return this.videoPlayer.getVolume()},muteOn:function(){this.savedVolume=this.getVolume(),this.updateVolumeDisplay(0),this.scrubber.updatePercent(0),this.muted=!0,this.videoPlayer.setMuted(this.muted)},muteOff:function(){this.updateVolumeDisplay(100*this.savedVolume),this.scrubber.updatePercent(this.savedVolume),this.muted=!1,this.videoPlayer.setMuted(this.muted)},toggleMute:function(){this.scrubber.max?this.muted?this.muteOff():this.muteOn():(this.muted=!this.muted,this.videoPlayer.setMuted(this.muted),this.updateVolumeDisplay(this.muted?0:100*this.getVolume()))},adjustVolume:function(e){var t=.1>e?0:e>1?1:e;this.scrubber.max?this.scrubber.updatePercent(t):(this.setVolume(t),this.updateVolumeDisplay(100*t))},showHandler:function(e){e===this.id&&(this.volumeControlHeight=this.scrubber.wrapperEl.offsetHeight,this.scrubber.update(this.getVolume()*this.volumeControlHeight,this.volumeControlHeight))},keyHandler:function(e){var t=this.getVolume();this.adjustVolume(t+e)},addBehaviors:function(){function t(e,t,n){return Rx.Observable.fromEvent(e,t).takeUntil(l).doAction(n).subscribe(a,u,a)}var n=this.scrubber,o=n.knownEvents,a=e.util.NOOP,l=this.disposed,u=function(t){e.logging.log(t&&t.stack||t)};n.addEventListener(o.DRAG_END,this.clickScrubberHandler),l.onNext(function(){n.removeEventListener(o.DRAG_END,this.clickScrubberHandler)}.bind(this)),t(n,o.NEW_VALUE,this.volumeLevelChanged),t(i,i.knownEvents.SHOW_MENU,this.showHandler);var c=this;Rx.Observable.fromEvent(r,r.knownEvents.TOGGLE_MUTE).takeUntil(l).doAction(function(){c.toggleMute()}).subscribe(a,u,a),Rx.Observable.fromEvent(r,r.knownEvents.INCREASE_VOLUME).takeUntil(l).doAction(function(){c.keyHandler(s)}).subscribe(a,u,a),Rx.Observable.fromEvent(r,r.knownEvents.DECREASE_VOLUME).takeUntil(l).doAction(function(){c.keyHandler(-1*s)}).subscribe(a,u,a)},createContents:function(){this.wrapper=t.create("div",{"class":"volume-menu-content"}),this.scrubber=new e.ui.ScrubberComponent(this.wrapper,{orientation:e.ui.ScrubberComponent.orientations.vertical}),this.addBehaviors(),this.menuEl.appendChild(this.wrapper),setTimeout(function(){this.updateVolumeDisplay(100*this.getVolume())}.bind(this),1)},init:function(e,t,i){this._super(e,t,i),this.videoPlayer=n.videoPlayer(),this.muted=this.videoPlayer.getMuted(),this.id=i.id,this.disposed=new Rx.Subject,this.volumeLevelChanged=this.volumeLevelChanged.bind(this),this.clickScrubberHandler=this.clickScrubberHandler.bind(this),this.showHandler=this.showHandler.bind(this),this.keyHandler=this.keyHandler.bind(this);var r=o.getSessionData(o.SESSION_TYPES.VOLUME);if(r&&void 0!=r.percentage){var s=r.percentage;this.savedVolume=s,this.setVolume(s)}this.createContents()},destroy:function(){this.disposed&&this.disposed.onNext(),this.id=null,this.wrapper=null,this.scrubber=null,this.volumeTextNode=null,this.muted=null,this.videoPlayer=null,this.disposed=null,this.volumeLevelChanged=null,this.clickScrubberHandler=null,this.showHandler=null,this.keyHandler=null,this._super()}})}(),function(){"use strict";var e=netflix.cadmium,t=e.metadata,n=e.element;e.ui.NextEpisodeMenuComponent=e.ui.MenuComponent.extend({createContents:function(){var e,i=t.getNextEpisode(),r=netflix.I18n;i&&(this.menuHeaderEl=n.create("h1"),this.menuHeaderEl.textContent=r.get("ce-next-episode-header"),this.menuDataWrapperEl=n.create("div",{"class":"player-next-episode-info"}),e=t.getSmallestImage(i.stills),e&&e.w&&e.h&&e.url&&(this.menuNextEpisodeImageContainer=n.create("div",{"class":"image-container"}),this.menuNextEpisodeImage=n.create("img",{"class":"next-episode-image"},this.menuNextEpisodeImageContainer),this.menuNextEpisodeImage.setAttribute("data-img-src",e.url),this.menuNextEpisodeImage.style["margin-left"]=n.calcScaledScreenOffset(e,6),n.create("div",{"class":"play-icon"},this.menuNextEpisodeImageContainer),this.menuDataWrapperEl.appendChild(this.menuNextEpisodeImageContainer)),this.menuTextWrapperEl=n.create("div",{"class":"player-next-episode-description"}),this.menuTextHeaderEl=n.create("h2"),this.menuTextHeaderEl.textContent=r.getWithParams("ce-next-episode-title",["NUMBER","TITLE"],[i.seq,i.title]),this.menuTextEl=n.create("p"),this.menuTextEl.textContent=i.synopsis,this.menuTextWrapperEl.appendChild(this.menuTextHeaderEl),this.menuTextWrapperEl.appendChild(this.menuTextEl),this.menuDataWrapperEl.appendChild(this.menuTextWrapperEl),this.menuEl.appendChild(this.menuHeaderEl),this.menuEl.appendChild(this.menuDataWrapperEl))},show:function(){this.menuNextEpisodeImage.src||(this.menuNextEpisodeImage.src=this.menuNextEpisodeImage.getAttribute("data-img-src")),this._super()},init:function(e,t,n){this._super(e,t,n),this.createContents()}})}(),function(){var e,t,n,i=netflix.cadmium,r=i.metadata,o=i.element,s=null,a="change-video",l=function(e){e.target.classList.contains("episode-list-item--expanded")&&e.target.classList.add("episode-list-item--transition-ready"),e.target.removeEventListener("transitionend",l)},u=function(i){var o=i.target;if(t.contains(o))for(;t.contains(o);o=o.parentNode){if(o.classList.contains("episode-list-item--expanded")){var s=o.getAttribute("data-episode-id");return void(s!=r.getActiveVideo().id&&this.fireEvent(a,[{videoId:s}]))}if(o.classList.contains("episode-list-item")){var l=document.getElementsByClassName("episode-list-item--expanded")[0];return l&&c(l),void d(o,!0)}if(o.classList.contains("back-to-seasons"))return void e.classList.remove("show-episode-list")}else if(n.contains(o))for(;n.contains(o);o=o.parentNode)if(o.classList.contains("season"))return this.createEpisodeListPanel(o.getAttribute("data-season-id")),void e.classList.add("show-episode-list")},c=function(e){e.classList.remove("episode-list-item--expanded"),e.classList.remove("episode-list-item--transition-ready"),e.style.height=""},d=function(e,t){t?(e.addEventListener("transitionend",l),e.classList.add("episode-list-item--expanded"),e.style.height=e.getAttribute("data-expanded-height")):(e.classList.add("episode-list-item--no-transition"),e.classList.add("episode-list-item--expanded"),e.style.height=e.getAttribute("data-expanded-height"),setTimeout(function(){e.classList.remove("episode-list-item--no-transition")},1));var n=e.getElementsByClassName("episode-list-image")[0];n.src||(n.src=n.getAttribute("data-img-src"))};i.ui.EpisodeSelectorMenuComponent=i.ui.MenuComponent.extend({createSeasonPanel:function(){var t=r.getMetadata();n=o.create("div",{"class":"season-list-container"},e);var i=o.create("h2",{"class":"seasons-title"},n);i.textContent=t.video.title;for(var s=o.create("ul",{"class":"season-list"},n),a=0;a<t.video.seasons.length;a++){var l=o.create("li",{"class":"season icon-player-forward-arrow"},s),u=t.video.seasons[a],c=o.create("span",null,l);c.textContent=u.title,l.setAttribute("data-season-id",u.id)}},createEpisodeListPanel:function(n){for(var i,a,l,u,c=0;c<s.video.seasons.length;c++)s.video.seasons[c].id==n&&(a=s.video.seasons[c]);l=r.getActiveSeason().id==n?r.getActiveVideo().id:a.episodes[0].id,a||(a=r.getActiveSeason()),t&&t.parentNode.removeChild(t),t=o.create("div",{"class":"episode-list-container"});var p=o.create("div",{"class":"episode-list-header"},t);if(s.video.seasons.length>1){var m=o.create("div",{"class":"back-to-seasons-container"},p);o.create("button",{"class":"back-to-seasons icon-player-back-arrow"},m)}i=o.create("h2",{"class":"seasons-title"},p),i.textContent=a.title;for(var h=o.create("ul",{"class":"episode-list"},t),c=0;c<a.episodes.length;c++){var f=a.episodes[c],v=o.create("li",{"class":"episode-list-item"},h);v.setAttribute("data-episode-id",f.id);var E=o.create("div",{"class":"episode-list-item-header"},v),g=o.create("span",{"class":"episode-list-index"},E);g.innerHTML=c+1;var _=o.create("h3",{"class":"episode-list-title"},E);_.innerHTML=f.title;var b=o.create("progress",{"class":"episode-list-progress"},E);b.max="100",f.bookmark&&f.bookmark.offset>=0&&f.runtime>0?b.value=f.bookmark.offset/f.runtime*100:b.value=0,o.create("span",{"class":"episode-list-down-arrow icon-player-down-arrow"},E);var y=o.create("div",{"class":"episode-list-description-container"},v),x=o.create("div",{"class":"episode-list-image-container"},y),k=o.create("img",{"class":"episode-list-image"},x),w=r.getSmallestImage(f.stills);w&&(k.setAttribute("data-img-src",w.url),k.style["margin-left"]=o.calcScaledScreenOffset(w,6)),f.id!==r.getActiveVideo().id&&o.create("div",{"class":"play-icon"},x);var T=o.create("p",{"class":"episode-list-synopsis"},y);T.innerHTML=f.synopsis}e.appendChild(t);var L=this.menuEl.classList.contains(o.classNames.visible);L||this.menuEl.classList.add(o.classNames.visible);for(var A=t.getElementsByClassName("episode-list-item"),c=0;c<A.length;c++){var P=A[c],I=P.cloneNode(!0);if(I.classList.add("episode-list-item--copied"),P.parentNode.appendChild(I),!u){var C=o.create("div",{"class":"measuring-stick"},I);u=C.clientWidth/1e3}var O=o.getDimensions(I).h/u-1;P.setAttribute("data-expanded-height",O+"em"),P.parentNode.removeChild(I),P.getAttribute("data-episode-id")==l&&(d(P,!1),P.parentElement.scrollTop=P.offsetTop-P.parentElement.offsetTop)}L||this.menuEl.classList.remove(o.classNames.visible)},createContents:function(t){var n=o.create("div",{"class":"episode-selector-container"},this.menuEl);e=o.create("div",{"class":"episode-selector-slider show-episode-list"},n),this.scopedClickHandler=u.bind(this),e.addEventListener("click",this.scopedClickHandler),this.createSeasonPanel(),this.createEpisodeListPanel(t)},init:function(e,t,n){this._super(e,t,n),s||(s=r.getMetadata()),this.createContents(r.getActiveSeason().id)},destroy:function(){s=null,e.removeEventListener("click",this.scopedClickHandler),this._super()},CHANGE_VIDEO_EVENT:a})}(),function(){"use strict";var e=netflix.cadmium,t=e.objects,n=e.element,i=(e.url,e.logging),r=e.util.NOOP,o="none",s="data-id",a="data-commentary",l=n.classNames.visible;e.ui.AudioSubtitleMenuComponent=e.ui.MenuComponent.extend({audioListEl:null,audioHeaderEl:null,audioItemsEls:{},textListEl:null,textHeaderEl:null,textItemsEls:{},videoPlayer:null,allowAudioTrackModification:!1,allowTextTrackModifications:!1,clickHandler:function(e){var t,n,i=e.target,r=i.getAttribute(s);this.useMouseTriangleDetection=!0,this.audioListEl.contains(i)?(t=this.audioItemsEls[r],n=t&&t.track,t&&this.videoPlayer.setAudioTrack(n)):this.textListEl.contains(i)&&(r===o?(this.videoPlayer.setTimedTextTrack(null),n=null):(t=this.textItemsEls[r],t&&(n=t.track,this.videoPlayer.setTimedTextTrack(n))))},_updateAudioListDOM:function(){var e,t,i,r=this.videoPlayer.getAudioTrackList(),o=this.videoPlayer.getAudioTrack(),u=this;if(r){for(e in this.audioItemsEls)this.audioItemsEls.hasOwnProperty(e)&&(e=this.audioItemsEls[e],n.remove(e.el));u.audioItemsEls={},r.forEach(function(e){if(e){if(i=e.trackId,t=n.create("li",{"class":o&&o.trackId===i?"player-track-selected":null},u.audioListEl),t.setAttribute(s,i),"COMMENTARY"==e.trackType){var r=e.displayName.split(" - "),l="";2==r.length?(l=netflix.I18n.get("ce-audio-tracks-commentator-title"),l=l.replace("{LANGUAGE}",r[0]),l=l.replace("{COMMENTATOR}",r[1])):l=e.displayName,t.setAttribute(a,"true"),t.appendChild(document.createTextNode(l))}else t.appendChild(document.createTextNode(e.displayName));u.audioItemsEls[i]={el:t,track:e}}}),this.audioListEl.classList.add(l),this.allowAudioTrackModification=r.length>1}else this.audioListEl.classList.remove(l),this.allowAudioTrackModification=!1},_updateTextListDOM:function(){var e,t,i,r,a=this.videoPlayer.getTimedTextTrackList(),u=this.videoPlayer.getTimedTextTrack(),c=!1,d=netflix.I18n,p=this;if(a&&a.length>0){for(e in this.textItemsEls)this.textItemsEls.hasOwnProperty(e)&&(e=this.textItemsEls[e],n.remove(e.el));p.textItemsEls={},a.forEach(function(e){e?(c=u&&u.trackId===e.trackId,i=e.trackId,r=e.displayName+("ASSISTIVE"===e.trackType?" [CC]":"")):(e=o,c=!u,i=e,r=d.get("ce-none-track")),t=n.create("li",{"class":c?"player-track-selected":null},p.textListEl),t.setAttribute(s,i),t.appendChild(document.createTextNode(r)),p.textItemsEls[i]={el:t,track:e}}),this.textListEl.classList.add(l),this.allowTextTrackModifications=a.length>1}else this.textListEl.classList.remove(l),this.allowTextTrackModifications=!1},createContents:function(){this.videoPlayer=t.videoPlayer();var e=netflix.I18n;this.audioListEl=n.create("ol",{"class":"player-audio-tracks"}),this.audioHeaderEl=n.create("lh",{},this.audioListEl),this.audioHeaderEl.appendChild(document.createTextNode(e.get("ce-audio-tracks-title"))),this._updateAudioListDOM(),this.menuEl.appendChild(this.audioListEl),this.textListEl=n.create("ol",{"class":"player-timed-text-tracks"}),this.textHeaderEl=n.create("lh",{},this.textListEl),this.textHeaderEl.appendChild(document.createTextNode(e.get("ce-text-tracks-title"))),this._updateTextListDOM(),this.menuEl.appendChild(this.textListEl)},audioTrackListChangedHandler:function(){this._updateAudioListDOM()},audioTrackChangedHandler:function(){this._updateAudioListDOM()},textTrackListChangedHandler:function(){this._updateTextListDOM()},textTrackChangedHandler:function(){this._updateTextListDOM()},attachListeners:function(){function e(e,i,o){Rx.Observable.fromEvent(e,i).takeUntil(t).doAction(o).subscribe(r,n,r)}i.log("initializing component.audio.subtitle.menu");var t=this._disposed,n=function(e){i.error(e&&e.stack||e)};e(this.menuEl,"click",this.clickHandler),e(this.videoPlayer,"audiotracklistchanged",this.audioTrackListChangedHandler),e(this.videoPlayer,"audiotrackchanged",this.audioTrackChangedHandler),e(this.videoPlayer,"timedtexttracklistchanged",this.textTrackListChangedHandler),e(this.videoPlayer,"timedtexttrackchanged",this.textTrackChangedHandler)},init:function(e,t,n){this._super(e,t,n),this.clickHandler=this.clickHandler.bind(this),this.audioTrackListChangedHandler=this.audioTrackListChangedHandler.bind(this),this.audioTrackChangedHandler=this.audioTrackChangedHandler.bind(this),this.textTrackListChangedHandler=this.textTrackListChangedHandler.bind(this),this.textTrackChangedHandler=this.textTrackChangedHandler.bind(this),this._disposed=new Rx.Subject,this.createContents(),this.attachListeners()},destroy:function(){this._disposed&&this._disposed.onNext(),this.audioListEl=null,this.audioHeaderEl=null,this.audioItemsEls={},this.textListEl=null,this.textHeaderEl=null,this.textItemsEls={},this.videoPlayer=null,this._super()}})}(),function(){var e,t,n=netflix.cadmium,i=n.objects,r=Rx.Observable,o=n.element,s=n.UiEvents,a="data-ip",l=!1,u="mdxTicklerShowCount",c=3e3,d=n.util.NOOP;n.ui.MdxMenuComponent=n.ui.MenuComponent.extend({mdxListEl:null,mdxHeaderEl:null,mdxItemsEls:{},videoPlayer:null,allowMdxTrackModification:!1,allowTextTrackModifications:!1,clickHandler:function(e){var t=e.target.getAttribute(a);n.ui.master.toggleMdxMode(!0,t)},_mdxLoadedHandler:function(){e=i.mdxManager();var n=Number(window.localStorage.getItem(u));3>n?(window.localStorage.setItem(u,n+1),l=!0,this._updateMdxListDOM()):r.timer(c).take(1).subscribe(function(){l=!0},d,d);var o=this;r.fromEvent(e,e.EVENTS.devicefound).takeUntil(t).doAction(this._updateMdxListDOM.bind(o),d,d).subscribe(),s.removeEventListener(s.knownEvents.MDX_LOADED,this._mdxLoadedHandler,this)},_updateMdxListDOM:function(){if(e){for(var t,n=e.getTargetList(),i=this;this.mdxListEl.firstChild;)this.mdxListEl.removeChild(this.mdxListEl.firstChild);if(this.mdxListEl.appendChild(this.mdxHeaderEl),netflix.cadmium.util.isEmptyObject(n))this.hide();else{var r,s=null;for(r in n)s=n[r],s&&s._config&&(t=o.create("li",null,i.mdxListEl),t.setAttribute(a,r),t.appendChild(document.createTextNode(s._config.friendlyName)));l&&this.showTickler()}}},createContents:function(){this.videoPlayer=i.videoPlayer(),this.mdxListEl=o.create("ol",{"class":"player-mdx-list"}),this.mdxHeaderEl=o.create("lh",{},this.mdxListEl),this.mdxHeaderEl.appendChild(document.createTextNode(netflix.I18n.get("mdx-play-on"))),e=i.mdxManager(),this._updateMdxListDOM(),this.menuEl.appendChild(this.mdxListEl)},attachListeners:function(){this.boundClickHandler||(this.boundClickHandler=this.clickHandler.bind(this)),this.menuEl.addEventListener("click",this.boundClickHandler,!1)},init:function(e,n,r){this._super(e,n,r),this.createContents(),this.attachListeners(),t=new Rx.Subject,i.mdxManager()?this._mdxLoadedHandler():s.addEventListener(s.knownEvents.MDX_LOADED,this._mdxLoadedHandler,this)},destroy:function(){this.menuEl.removeEventListener("click",this.boundClickHandler,!1),s.removeEventListener(s.knownEvents.MDX_LOADED,this._mdxLoadedHandler,this),e&&e.removeEventListener(e.EVENTS.devicefound,this._updateMdxListDOM,this),t.onNext(),this._super()}})}(),function(){var e=netflix.cadmium,t=e.element;e.ui.Button=e.ui.Component.extend({knownEvents:Object.freeze({CLICK:"click"}),buttonEl:null,focus:function(){this.buttonEl.focus()},blur:function(){this.buttonEl.blur()},clickHandler:function(e){this.fireEvent(this.knownEvents.CLICK,[e,this])},destroy:function(){this.initialized&&(this.initialized=!1,this.buttonEl.removeEventListener("click",this.boundClickHandler),t.remove(this.buttonEl),this.buttonEl=null)},init:function(e,n){this._super(e,n),this.buttonEl=t.create("button",{"class":["button",this.config["class"]||""].join(" "),id:this.config.id||null},this.parentNode),this.buttonEl.setAttribute("type","button"),this.buttonEl.appendChild(this.config.contentsEl),this.boundClickHandler||(this.boundClickHandler=this.clickHandler.bind(this)),this.buttonEl.addEventListener("click",this.boundClickHandler)}}),Object.defineProperty(e.ui.Button.prototype,"enabled",{get:function(){return this._enabled},set:function(e){this._enabled=!!e,this.buttonEl.classList[this._enabled?"remove":"add"]("disabled")}})}(),function(){"use strict";var e=netflix.cadmium,t=e.element;e.ui.LoaderProgress=e.ui.Component.extend({_loader:null,rootEl:null,_onLoadStart:function(){this._loader.removeEventListener(this._loader.knownEvents.START_LOAD,this._onLoadStart),this.parentNode.appendChild(this.rootEl),setTimeout(function(){this.initialized&&this._spinnerEl.classList.add(t.classNames.visible)}.bind(this),100)},init:function(e){this._super(e.rootEl,{}),this._loader=e,this.rootEl=t.create("div"),this._spinnerEl=t.create("div",{"class":"player-progress-loading"},this.rootEl),this._onLoadStart=this._onLoadStart.bind(this),this._loader.addEventListener(this._loader.knownEvents.START_LOAD,this._onLoadStart)},destroy:function(){this.initialized&&(this.initialized=!1,
t.remove(this.rootEl),this._loader&&this._loader.removeEventListener(this._loader.knownEvents.START_LOAD,this._onLoadStart),this._loader=null,this._spinnerEl=null,this.rootEl=null,this.parentNode=null)}}),e.ui.LoaderProgress.create=function(t){return new e.ui.LoaderProgress(t)}}(),function(){"use strict";var e=netflix.cadmium,t=e.element,n=e.browser,i=e.metadata,r=t.classNames.visible,o="with-logo",s=3,a=2,l=2,u=e.ui.LoaderMetadata=e.ui.Component.extend({_backgroundImageEl:null,_backgroundGradientEl:null,_headerEl:null,_descriptionEl:null,_loader:null,rootEl:null,_metadataReadyHandler:function(){this._loader.removeEventListener(this._loader.knownEvents.METADATA_READY,this._metadataReadyHandler),this._attemptPopulateDescription()},_attemptPopulateDescription:function(){var e=i.getActiveVideo(),t=e&&i.getLargestImage(e.stills);t?(this._backgroundImageEl.addEventListener("load",this._populateDescription),this._backgroundImageEl.addEventListener("error",this._populateDescription),this._backgroundImageEl.src=t.url):this._populateDescription()},_populateDescription:function(){var e,o,u=this,c=i.getMetadata(),d=i.getActiveVideo(),p=i.isShowData(c),m=t.create("h1",{},this._descriptionEl);m.innerHTML=c.video.title,this._backgroundImageEl&&(this._backgroundImageEl.removeEventListener("load",this._populateDescription),this._backgroundImageEl.removeEventListener("error",this._populateDescription),this._backgroundGradientEl.style.backgroundImage=n.prefix().css+"linear-gradient(top, rgba(0,0,0,.2), rgba(0,0,0,.65)), url("+this._backgroundImageEl.src+")"),p&&(e=i.getActiveSeason(),e&&(o=t.create("h2",{},this._descriptionEl),o.innerHTML=netflix.I18n.getWithParams("ce-loading-show-title",["SEASON","EPISODE","TITLE"],[e.seq,d.seq,d.title]))),this.parentNode.appendChild(this.rootEl),requestAnimationFrame(function(){u.initialized&&(u._headerEl.classList.add(r),u._backgroundGradientEl.classList.add(r),p?(t.limitLinesOfText(m,{maxLines:a}),t.limitLinesOfText(o,{maxLines:l})):t.limitLinesOfText(m,{maxLines:s}))})},init:function(e,n){n=n||{},this._super(e.rootEl,n),this._loader=e;var i=n.initParams||{};this._populateDescription=this._populateDescription.bind(this),this._metadataReadyHandler=this._metadataReadyHandler.bind(this),this.rootEl=t.create("div"),this._backgroundImageEl=t.create("img"),this._headerEl=t.create("div",{"class":"header-container"},this.rootEl),i.referrerIsNetflix||(t.create("div",{"class":"logo"},this._headerEl),this._headerEl.classList.add(o)),this._backgroundGradientEl=t.create("div",{"class":"player-loading-background"},this.rootEl),this._descriptionEl=t.create("div",{"class":"description"},this._headerEl),this._loader.addEventListener(this._loader.knownEvents.METADATA_READY,this._metadataReadyHandler)},destroy:function(){this.initialized&&(t.remove(this.rootEl),this.rootEl=null,this._backgroundImageEl&&(this._backgroundImageEl.removeEventListener("load",this._populateDescription),this._backgroundImageEl.removeEventListener("error",this._populateDescription)),this._backgroundImageEl=null,this.parentNode=null,this._backgroundGradientEl=null,this._headerEl=null,this._descriptionEl=null,this._loader&&this._loader.removeEventListener(this._loader.knownEvents.METADATA_READY,this._metadataReadyHandler),this._loader=null,e.ui.Component.prototype.destroy.call(this))}});u.create=function(e,t){return new u(e,t)}}(),function(){"use strict";var e=netflix.cadmium,t=e.element,n=e.ui.LoaderProgress,i=t.classNames.visible;e.ui.LoaderProgressPrePlay=n.extend({_logoEl:null,_lightingEl:null,_shadowEl:null,_onLoadStart:function(){this._loader.removeEventListener(this._loader.knownEvents.START_LOAD,this._onLoadStart),this.parentNode.appendChild(this.rootEl),setTimeout(function(){this.rootEl.classList.add(i)}.bind(this),1)},init:function(e){this._super(e),this.rootEl.classList.add("preplay-loader-container"),this._logoEl=t.create("div",{id:"logo"},this.rootEl),this._lightingEl=t.create("div",{id:"light"},this.rootEl),this._shadowEl=t.create("div",{id:"shadow"},this.rootEl)},destroy:function(){n.prototype.destroy.call(this),this._logoEl=null,this._lightingEl=null,this._shadowEl=null}}),e.ui.LoaderProgressPrePlay.create=function(t){return new e.ui.LoaderProgressPrePlay(t)}}(),function(){var e,t,n,i,r,o,s,a,l,u=netflix.cadmium,c=u.UiEvents,d=u.element,p=u.objects,m=u.xhr,h=u.Logger.create("component.incognito"),f=0,v=u.util.NOOP,E=function(){o={"private":{menuTitle:netflix.I18n.get("ce-incognito-private-menu"),menuOptions:[{text:netflix.I18n.get("ce-incognito-private-on"),incognito:!0},{text:netflix.I18n.get("ce-incognito-private-off"),incognito:!1}]},anonymous:{menuTitle:netflix.I18n.get("ce-incognito-anonymous-menu"),menuOptions:[{text:netflix.I18n.get("ce-incognito-anonymous-on"),incognito:!0},{text:netflix.I18n.get("ce-incognito-anonymous-off"),incognito:!1}]},history:{menuTitle:netflix.I18n.get("ce-incognito-history-menu"),menuOptions:[{text:netflix.I18n.get("ce-incognito-history-save"),incognito:!1},{text:netflix.I18n.get("ce-incognito-history-hide"),incognito:!0}]},sauron:{menuTitle:netflix.I18n.get("ce-incognito-private-menu"),menuOptions:[{text:netflix.I18n.get("ce-incognito-private-on"),incognito:!0},{text:netflix.I18n.get("ce-incognito-private-off"),incognito:!1}]}}},g={DATA_IS_INCOGNITO:"data-is-incognito",SELECTED_CLASS:"incognito-mode-selected",INCOGNITO_API_URL:"incognito",MAX_ERROR_COUNT:2,RETRY_BACKOFF:500,API_TIMEOUT:3e3},_=function(e){var n={method:e.method,xid:p.videoPlayer().getXid(),videoId:p.videoId()};"test"===netflix.cadmium.objects.initParams().environment&&(n.revision="latest"),void 0!=e.isIncognito&&(n.on=e.isIncognito,n.seq=f++),l=!0,r.classList.add("loading"),m.get(t,{data:n}).takeUntil(s).timeout(g.API_TIMEOUT).retryWithBackoff(g.MAX_ERROR_COUNT,g.RETRY_BACKOFF).flatMap(function(e){return"success"===e.result?Rx.Observable["return"](e):Rx.Observable["throw"](new Error)}).doAction(b).subscribe(v,y)},b=function(e){a=e.isIncognito,c.fireEvent(c.knownEvents.INCOGNITO_CHANGED,[e]),l=!1,r.classList.remove("loading"),k()},y=function(){l=!1,r.classList.remove("loading"),h.getErrorHandler("request error"),u.ui.popup.showGenericError(netflix.I18n.get("ce-incognito-api-error-title"),netflix.I18n.get("ce-incognito-api-error-text"))},x=function(t){var n=t.target;if(e.contains(n))for(;e.contains(n);n=n.parentNode)n.classList.contains("incognito-option")&&String(a)!==n.getAttribute(g.DATA_IS_INCOGNITO)&&_({method:"toggle",isIncognito:!a})},k=function(){for(var t=e.getElementsByClassName("incognito-option"),n=0;n<t.length;n++){var i=t[n];String(a)===i.getAttribute("data-is-incognito")?i.classList.add(g.SELECTED_CLASS):i.classList.remove(g.SELECTED_CLASS)}};u.ui.IncognitoMenuComponent=u.ui.MenuComponent.extend({createContents:function(){var i=p.initParams().incognitoConfig.mode;e=d.create("ul",{"class":"incognito-options"});var a=d.create("lh",{"class":"incognito-title"},e);a.appendChild(document.createTextNode(o[i].menuTitle));for(var u=o[i].menuOptions,c=0;c<u.length;c++){var m=d.create("li",{"class":"incognito-option"});m.appendChild(document.createTextNode(u[c].text)),m.setAttribute(g.DATA_IS_INCOGNITO,u[c].incognito),u[c].incognito===!1&&m.classList.add(g.SELECTED_CLASS),e.appendChild(m)}this.menuEl.appendChild(e),r=this.menuEl,Rx.Observable.fromEvent(this.menuEl,"click").takeUntil(s).filter(function(){return!l}).doAction(x).subscribe(v,function(){h.getErrorHandler("request error")}),t=p.initParams().apiUrl+g.INCOGNITO_API_URL,n=p.videoPlayer().getXid()},destroy:function(){s.onNext(),this._super()},init:function(e,t,n){this._super(e,t,n),c=u.UiEvents,i=e,s=new Rx.Subject,a=!1,l=!1,E(),this.createContents()},sendIncognitoReq:_,toggleIncognito:function(){_({method:"toggle",isIncognito:!a})},isLoading:function(){return l}})}(),function(){var e=netflix.cadmium,t=e.element,n=e.logging,i=e.util.NOOP,r="&#9679";e.ui.PIN=e.ui.Component.extend({knownEvents:Object.freeze({COMPLETE:"complete",INPUT:"input"}),containerEl:null,pinEl:null,caretEl:null,pinCells:null,_type:null,_caretOffset:null,_fontSize:null,_caretIncrement:null,_initElements:function(){this.containerEl=t.create("div",{"class":"pin-container",id:this.config.id||null}),this.pinEl=t.create("input",{"class":["pin-input",this.config.inputClass||"","type-"+this._type].join(" ")},this.containerEl),this.pinEl.setAttribute("maxlength",this._pinLength),this.caretEl=t.create("div",{"class":"pin-caret"},this.containerEl);for(var e,n,i=0;i<this._pinLength;i++)e=t.create("div",{"class":"pin-ui"},this.containerEl),n=t.create("span",{},e),this.pinCells.push(n)},_initHandlers:function(){var e=Rx.Observable.fromEvent(this.pinEl,"keyup"),t=Rx.Observable.fromEvent(this.pinEl,"change"),n=Rx.Observable.fromEvent(this.pinEl,"focus"),r=Rx.Observable.fromEvent(this.containerEl,"click");e.merge(t).takeUntil(this._disposed).map(function(e){return e.preventDefault(),e.stopPropagation(),this.getValue()}.bind(this)).distinctUntilChanged().doAction(this._inputChangeHandler).subscribe(i,this._rxErrorHandler,i),n.merge(r).takeUntil(this._disposed).doAction(this._clickAndFocusHandler).subscribe(i,this._rxErrorHandler,i)},_updateComputedValues:function(){this._caretOffset=this._caretOffset||parseInt(getComputedStyle(this.caretEl).left),this._fontSize=this._fontSize||parseInt(getComputedStyle(this.pinEl).fontSize),this._caretIncrement=this._caretIncrement||parseInt(getComputedStyle(this.containerEl.querySelector(".pin-ui")).width)},_inputChangeHandler:function(){var e,t=this.pinEl.value,n=t.length,i="password"===this._type;e=n===this._pinLength?this._caretOffset+(n-1)*this._caretIncrement+this._fontSize:this._caretOffset+n*this._caretIncrement,this.caretEl.style.cssText="left: "+e+"px;",this.pinCells.forEach(function(e,n){var o=t.charAt(n);o?e.innerHTML=i?r:o:e.innerHTML=""}),t&&n===this._pinLength?(this.caretEl.classList.add("hide"),this.fireEvent(this.knownEvents.COMPLETE,[t])):(this.caretEl.classList.remove("hide"),this.fireEvent(this.knownEvents.INPUT,[t]))},_clickAndFocusHandler:function(e){e.preventDefault(),this._updateComputedValues(),this.focus(),this.pinEl.value=this.pinEl.value},_rxErrorHandler:function(e){n.log("component.pin.input",e&&e.stack||e)},focus:function(){return this.pinEl.focus(),this},blur:function(){return this.pinEl&&this.pinEl.blur(),this},clear:function(){return this.pinEl.value="",this._inputChangeHandler(),this},getValue:function(){return this.pinEl&&this.pinEl.value},destroy:function(){this.initialized&&(this.initialized=!1,this._disposed.onNext(),t.remove(this.containerEl),this.containerEl=null,this.pinCells=null,this.events=null,this._disposed=null)},init:function(e,t){t=t||{},this._super(e,t),this._disposed=new Rx.Subject,this._pinLength=t.pinLength||4,this._type=t.type||"password",this.pinCells=[],this._inputChangeHandler=this._inputChangeHandler.bind(this),this._clickAndFocusHandler=this._clickAndFocusHandler.bind(this),this._initElements(),this._initHandlers(),e.appendChild(this.containerEl)}})}(),function(){"use strict";var e,t,n,i=netflix.cadmium,r=netflix.I18n,o=i.metadata,s=i.dom,a=i.xhr,l=i.logging,u=Rx.Observable,c=s.DIV,d=function(){},p=function(e){l.error("error:"+e.stack)},m=function(){this.menuEl.removeChild(e),e=null,this.menuEl.appendChild(c({"class":"completed"},r.get("ce-dontshare-unshared"))),o.setMetadataField("video.social.facebook.do_not_share.enabled",!1)},h=function(e){var i=o.getMetadata().social.netflix.user.id,r=t.replace("TITLE_ID",o.getActiveVideo().id).replace("USER_ID",i),s={withCredentials:!0};a.post(r,s).takeUntil(n).doAction(m.bind(this)).retryWithBackoff(5,1e3).subscribe(d,p,d)},f=function(){e=c({"class":"dont-share-button"},r.get("ce-dontshare-prompt")),n=new Rx.Subject,u.fromEvent(e,"click").takeUntil(n).take(1).doAction(h.bind(this)).subscribe(d,p,d),this.menuEl.appendChild(e)};i.ui.DontShareMenuComponent=i.ui.MenuComponent.extend({init:function(e,n,r){this._super(e,n,r),t=i.objects.initParams().apiUrl+"users/USER_ID/social/titles/TITLE_ID?output=json",f.bind(this)()},destroy:function(){n.onNext(),this._super()}})}(),function(){var e,t,n,i,r=netflix.cadmium,o=17,s=r.ui.ExitPlaybackComponent=r.ui.Component.extend({_backToBrowsingEl:null,_rootEl:null,_render:function(){null===this._backToBrowsingEl&&(this._backToBrowsingEl=i({"class":"player-exit-playback icon-player-cancel no-select"}))},destroy:function(){this.initialized&&this._backToBrowsingEl&&(this._backToBrowsingEl.removeEventListener("click",r.ui.master.goBackToBrowsing,!1),e.remove(this._backToBrowsingEl),this._backToBrowsingEl=null),this._super()},init:function(s){this._super(s.rootEl),this._rootEl=s.rootEl,this._initialized=!0,e=r.element,t=r.objects,n=r.dom,i=n.A;var a=this;t.initParams().inPagePlayer||(this._render(),setTimeout(function(){a.initialized&&(a._rootEl.appendChild(a._backToBrowsingEl),a._backToBrowsingEl.addEventListener("click",r.ui.master.goBackToBrowsing,!1))},o))},getBackToBrowsingEl:function(){return this._backToBrowsingEl}});s.create=function(e,t){return new s(e,t)}}(),function(){"use strict";var e=netflix.cadmium,t=e.util,n=e.objects,i=e.dom.DIV,r=e.dom.get("H2"),o=e.element,s=e.Logger.create("cadmium.ui.VideoInterstitialComponent"),a="webkit"===e.browser.prefix().lowercase,l=500,u=e.util.NOOP,c=Rx.Observable,d=e.ui.VideoInterstitialComponent=e.ui.Component.extend({_rootEl:null,_videoPlayerWrapperEl:null,_videoTitleEl:null,_videoPlayer:null,_videoDuration:null,_videoCurrentTime:null,_autoPlayTimer:null,_disposed:new Rx.Subject,videoEvents:{INTERSTITIAL_VIDEO_END:"interstitialVideoEnd",INTERSTITIAL_VIDEO_START:"interstitialVideoStart"},_render:function(){null===this._rootEl&&(this._rootEl=i({"class":"player-video-interstitial",style:"background-image: url("+this.config.background+");"},this._videoPlayerWrapperEl=i({"class":"player-video-interstitial-wrapper"}),this._videoTitleEl=this.config.title&&r({"class":"player-video-interstitial-title"},this.config.title)))},_createEventSubscriptions:function(){this.initialized&&(c.fromEvent(this._videoPlayer,"loaded").takeUntil(this._disposed).doAction(function(){this.fireEvent(this.videoEvents.INTERSTITIAL_VIDEO_START),this._videoPlayerWrapperEl.style.display="",this._videoDuration=this._videoPlayer.getDuration(),this._addChangeListeners()}.bind(this)).subscribe(u,s.getErrorHandler("event|loaded"),u),this._onTransitionEnd=this._onTransitionEnd.bind(this),this.getElement().addEventListener("transitionend",this._onTransitionEnd))},_onTransitionEnd:function(){var e=this.getElement();e.removeEventListener("transitionend",this._onTransitionEnd),e.style.display="none"},_addChangeListeners:function(){var e;e=a?c.fromEvent(this._videoPlayer,"currenttimechanged").takeUntil(this._disposed).throttle(l).filter(function(){return this._videoCurrentTime=this._videoPlayer.getCurrentTime(),this._videoCurrentTime>=this._videoDuration-1500}.bind(this)).take(1):c.fromEvent(this._videoPlayer,"endedchanged").takeUntil(this._disposed).filter(function(){return this._videoPlayer.getEnded()}.bind(this)),e.doAction(function(){this._videoPlayerWrapperEl.classList.add("interstitial-video-ended"),this.fireEvent(this.videoEvents.INTERSTITIAL_VIDEO_END)}.bind(this)).subscribe(u,s.getErrorHandler("event|currenttimechanged"),u)},destroy:function(){this._disposed.onNext(),o.remove(this._rootEl),this._videoPlayer&&this._videoPlayer.close(),this._super()},init:function(e,i){var r,o=n.videoSession();this._super(e,i),this._initialized=!0,r=t.tryCatch(o.createPlayer,o,[i.videoId,i.trackId||0]),r instanceof Error?s.error(r):(this._render(),this._videoPlayer=r,this._videoPlayerWrapperEl.appendChild(this._videoPlayer.getElement()),this._videoPlayerWrapperEl.style.display="none",this._createEventSubscriptions())},_prepareForVideoPlayback:function(){this._videoTitleEl&&(this._videoTitleEl.style.display="none"),this._rootEl.style.backgroundImage=""},getElement:function(){return this._rootEl},startAutoPlay:function(){var e=this.config.autoPlayTimer||5;this._autoPlayTimer=setTimeout(function(){this._prepareForVideoPlayback(),this._videoPlayer.seek(0),this._videoPlayer.load()}.bind(this),1e3*e)},cancelAutoPlay:function(){clearTimeout(this._autoPlayTimer)},hasVideoPlayer:function(){return!!this._videoPlayer}});d.create=function(e,t){return new d(e,t)}}(),function(){"use strict";var e,t=netflix.cadmium,n=t.dom,i=n.DIV,r=n.SPAN,o=function(){var t=i({"class":"report-problem-button"},r(e.get("ce-report-problem-menu")));return t};t.ui.ReportProblemMenuComponent=t.ui.MenuComponent.extend({init:function(t,n,i){e=netflix.I18n,this._super(t,n,i),this.menuEl.appendChild(o())},destroy:function(){this._super()}})}(),function(){"use strict";var e=netflix.cadmium,t=e.ui.Component,n=e.element,i=e.Logger.create("component.postplay.background"),r=t.extend({init:function(e){this.initialized||(this._super(e),this._rootEl=n.create("div",{"class":"player-postplay-background-image"}),n.create("div",{"class":"player-postplay-background-gradient"},this._rootEl))},destroy:function(){this.initialized&&(i.log("destroy"),n.remove(this._rootEl),this._super())}});Object.defineProperties(r.prototype,{source:{enumerable:!0,get:function(){return this._source},set:function(e){this._source=e,this._rootEl.style.cssText="background-image: url("+e+");",this.parentNode.contains(this._rootEl)||this.parentNode.appendChild(this._rootEl)}}}),r.createFromUrl=function(e,t){var n=new r(e);return n.source=t,n},r.create=function(e){return new r(e)},e.ui.PostPlayBackground=r}(),function(){"use strict";var e,t=netflix.cadmium,n=t.ui.Component,i=t.element,r=t.dom,o=r.get("DIV"),s=r.get("SPAN"),a=r.get("UL"),l=r.get("LI"),u=t.time,c=t.Logger.create("component.postplay.bob"),d=n.extend({init:function(t,n){c.log("init"),e=netflix.I18n,this._super(t),this._metadata=n,this._createElements()},destroy:function(){c.log("destroy"),i.remove(this._rootEl),this._super()},show:function(){this._rootEl.classList.add(i.classNames.active)},hide:function(){this._rootEl.classList.remove(i.classNames.active)},_createElements:function(){function t(t,i,r){if(t&&r){var o=i&&t.length>0,a=!i&&""!==t;(o||a)&&n.appendChild(l({},s({"class":"label"},e.get("ce-post-bob-"+r)+": "),document.createTextNode(o?t.slice(0,2).join(", "):t)))}}var n,i,r=this._metadata,c=r.duration||{};i="seconds"===c.unit?u.convertUsingKey(c.value,!1,!0,"ce-time"):c.unit&&c.value?e.getWithParams("ce-post-bob-duration-"+c.unit+(c.value>1?"-plural":""),["VALUE"],[c.value]):"",this._rootEl=o({"class":"player-postplay-recommendation-bob"},this._headerEl=o({"class":"bob-movie-header"},s({"class":"title"},r.title||""),s({"class":"year"},r.year||""),r.rating?s({"class":"mpaa-rating mpaa-"+r.rating},r.rating):null,s({"class":"duration"},i)),o({"class":"bob-movie-content"},r.synopsis||"",o({"class":"info"},n=a({})))),t(r.actors,!0,"actors"),t(r.directors,!0,"director"),t(r.primaryGenre,!1,"genre"),this.parentNode.appendChild(this._rootEl)}});d.create=function(e,t){return new d(e,t)},t.ui.PostPlayBob=d}(),function(){"use strict";var e=netflix.cadmium,t=e.ui.Component,n=e.element,i=e.ui.PostPlayBob,r=Rx.Observable,o=e.Logger.create("component.postplay.boxshot"),s=n.classNames.active,a=t.extend({init:function(e,t,n){this.initialized||(this._super(e,n),this._metadata=t,this._templateBuilder=n.template,this._index=n.index,this._eventsObservable=r.empty(),this._createElements(),this._createEventSubscriptions(),e.appendChild(this._rootEl))},destroy:function(){this.initialized&&(o.log("destroy"),n.remove(this._rootEl),this._super())},getData:function(){return this._metadata},onAction:function(){return this._eventsObservable},setHighlighted:function(e){this._rootEl.classList[e?"add":"remove"](s)},setBobVisibility:function(e){this._bob[e?"show":"hide"]()},_createElements:function(){this._rootEl=this._templateBuilder(this._metadata,this._index),this._bob=i.create(this._rootEl,this._metadata)},_createEventSubscriptions:function(){this.config.events&&this.config.events.forEach(function(e){var t=r.fromEvent(this._rootEl,e).map(function(e){return{instance:this,el:this._rootEl,type:e.type,data:this._metadata,id:this._metadata.id,event:e}}.bind(this));this._eventsObservable=this._eventsObservable.merge(t)},this)}});a.create=function(e,t,n){return new a(e,t,n)},e.ui.BoxShot=a}(),function(){"use strict";var e,t=netflix.cadmium,n=t.ui.Component,i=t.dom.DIV,r=t.ui.Button,o=t.fullscreen,s=t.UiEvents,a=Rx.Observable,l=t.util.NOOP,u=t.Logger.create("component.postplay.buttons"),c="exitFSBtn",d="b2bBtn",p=n.extend({init:function(t,n){this.initialized||(e=netflix.I18n,this._super(t),n=n||"action-buttons",this._rootEl=i({"class":n}),this._buttons={},this._eventsObservable=a.empty(),this._disposed=new Rx.Subject,t.appendChild(this._rootEl))},destroy:function(){if(this.initialized){u.log("destroy"),this._disposed.onNext();for(var e in this._buttons)this._buttons[e].destroy();this._super()}},addButton:function(e,t){var n=this.getButton(e.id);return n?n:(n=new r(t||this._rootEl,{"class":e["class"],contentsEl:e.contentsEl}),n.type=e.type,n.id=e.id,this._buttons[n.id]=n,e.events&&e.events.forEach(function(e){var t=a.fromEvent(n,e).map(function(e){return{id:n.id,type:e.type,event:e,component:n}}).takeUntil(this._disposed);this._eventsObservable=this._eventsObservable.merge(t)},this),n)},getButton:function(e){return this._buttons&&this._buttons[e]},hideButton:function(e){return this._showHideButton(e,!1)},showButton:function(e){return this._showHideButton(e,!0)},onAction:function(){return this._eventsObservable},_showHideButton:function(e,t){var n=this.getButton(e);return n&&n.buttonEl.classList[t?"remove":"add"]("display-none"),n}});p.create=function(e,t,n){var i=new p(e,n);return t.forEach(function(e){i.addButton(e)}),i},p.createBasic=function(n,i){e=netflix.I18n;var r=[{id:d,contentsEl:document.createTextNode(e.get("ce-back-to-browse")),"class":"back-to-browsing",events:["click"]}];o.isFullscreen()&&r.push({id:c,contentsEl:document.createTextNode(e.get("ce-post-exit-fullscreen")),"class":"exit-fullscreen",events:["click"]});var m=p.create(n,r,i);return m.onAction().takeUntil(m._disposed).doAction(function(e){switch(e.id){case d:t.ui.master.goBackToBrowsing();break;case c:t.fullscreen.exit()}}).subscribe(l,u.getErrorHandler("onAction handler"),l),a.fromEvent(s,s.knownEvents.FULLSCREEN_CHANGE).takeUntil(m._disposed).filter(function(e){return!e}).doAction(function(){m.hideButton(c)}).subscribe(l,u.getErrorHandler("fullscreen change handler"),l),m},t.ui.PostPlayActionButtons=p}(),function(){"use strict";var e=netflix.cadmium,t=e.ui.Component,n=Rx.Observable,i=e.ui.BoxShot,r=e.util.NOOP,o=e.Logger.create("component.postplay.sims"),s=Object.freeze({hoverover:["mouseover","MSPointerEnter"],hoverout:["mouseout","MSPointerLeave"],click:["click","MSPointerDown"],all:["click","MSPointerDown","mouseover","mouseout","MSPointerEnter","MSPointerLeave"]}),a=t.extend({init:function(e,t,i){this.initialized||(this._super(e),this._simList=t,this._template=i,this._sims=[],this._eventsObservable=n.empty(),this._disposed=new Rx.Subject,this._onHighlightSim=new Rx.Subject,this._activeSim=null,this._createElements(),this._initSubscriptions())},destroy:function(){o.log("destroy"),this._disposed.onNext(),this._sims.forEach(function(e){e.destroy()}),this._super()},getAt:function(e){return this._sims[e]},onHoverOver:function(){return this._getEventObservable("hoverover")},onHoverOut:function(){return this._getEventObservable("hoverout")},onHighlight:function(){return this._onHighlightSim},onClick:function(){return this._getEventObservable("click")},highlightSimAtIndex:function(e,t){var n=this._sims[e];this._highlightSim(n),t&&this._setBobVisibilityForSim(n,!0)},_highlightSim:function(e){this._activeSim&&this._activeSim.setHighlighted(!1),this._activeSim&&this._setBobVisibilityForSim(this._activeSim,!1),this._activeSim=e,e.setHighlighted(!0),this._onHighlightSim.onNext(e)},_setBobVisibilityForSim:function(e,t){e.setBobVisibility(t)},_getEventObservable:function(e){return function(e){return this._eventsObservable.filter(function(t){return e.some(function(e){return e===t.type})})}.bind(this)(s[e]||[])},_createElements:function(){this._simList.forEach(function(e,t){var n=i.create(this.parentNode,e,{events:s.all,template:this._template,index:t});this._sims.push(n),this._eventsObservable=this._eventsObservable.merge(n.onAction())},this)},_initSubscriptions:function(){this.onHoverOver().takeUntil(this._disposed).doAction(function(e){this._highlightSim(e.instance),this._setBobVisibilityForSim(e.instance,!0)}.bind(this)).subscribe(r,o.getErrorHandler("hover over handler"),r),this.onHoverOut().takeUntil(this._disposed).doAction(function(e){this._setBobVisibilityForSim(e.instance,!1)}.bind(this)).subscribe(r,o.getErrorHandler("hover out handler"),r)}});a.create=function(e,t,n){return new a(e,t,n)},e.ui.PostPlaySimsCollection=a}(),function(){"use strict";var e,t=netflix.cadmium,n=t.ui.Component,i=t.element,r=t.Logger.create("component.postplay.timer"),o=Rx.Observable,s=t.util.NOOP,a=15,l=n.extend({init:function(t,n){n=n||{},e=netflix.I18n,this._super(t),this._disposed=new Rx.Subject,this._stopped=new Rx.Subject,this._startTime=null,this._timer=null,this._maxTime=n.maxTime||a,this._pluralTemplate=n.pluralTemplate||function(t){return e.getWithParams("ce-post-autoplay",["SECONDS"],[t])},this._singularTemplate=n.singularTemplate||function(){return e.get("ce-post-autoplay-singular")},this._stoppedTemplate=n.stoppedTemplate||function(){return""},this._createElements(),this._createTimerObservable()},destroy:function(){r.log("destroy"),this._disposed.onNext(),i.remove(this._rootEl),this._super()},start:function(e){return this._timer.subscribe(s,r.getErrorHandler("timer error"),s),this.onTimerEnd().doAction(e||s).subscribe(s,r.getErrorHandler("timer end"),s),this},stop:function(){this._stopped.onNext(),this.parentNode&&(void 0!=this._stoppedTemplate()?this.parentNode.innerHTML=this._stoppedTemplate():this.parentNode.parentNode&&this.parentNode.parentNode.removeChild(this.parentNode))},onTimerEnd:function(){return this._timer.map(function(e){return 1>=e}).filter(function(e){return e}).delay(1e3).map(function(){return!0})},_createElements:function(){this.parentNode.innerHTML=this._pluralTemplate(this._maxTime)},_createTimerObservable:function(){this._timer=o.interval(1e3).takeUntil(this._disposed).takeUntil(this._stopped).timeInterval().map(function(e){return this._maxTime-e.value}.bind(this)).doAction(this._updateTimer.bind(this)).share()},_updateTimer:function(e){e>1?this.parentNode.innerHTML=this._pluralTemplate(e):1===e?this.parentNode.innerHTML=this._singularTemplate():this.stop()}});l.create=function(e,t){return new l(e,t)},t.ui.PostPlayTimer=l}(),function(){"use strict";var e,t=netflix.cadmium,n=t.ui.Component,i=t.element,r=t.fullscreen,o=t.UiEvents,s=t.dom,a=s.get("DIV"),l=s.get("SPAN"),u=t.Logger.create("component.postplay.exit.fullscreen"),c=t.util.NOOP,d=n.extend({init:function(t){u.log("init"),e=netflix.I18n,this._disposed=new Rx.Subject,this._super(t),this._createElements(),this._setupSubscriptions()},destroy:function(){u.log("destroy"),i.remove(this._rootEl),this._super()},hide:function(){this._rootEl.classList.add("display-none")},show:function(){this._rootEl.classList.remove("display-none")},_createElements:function(){this._rootEl=a({"class":"exit-fullscreen-button"},l({"class":"exit-fullscreen-text"},e.get("ce-post-exit-fullscreen")),l({"class":"exit-fullscreen-icon"})),this.parentNode.appendChild(this._rootEl)},_setupSubscriptions:function(){Rx.Observable.fromEvent(this._rootEl,"click").takeUntil(this._disposed).take(1).doAction(function(){r.exit(),this.hide()}.bind(this)).subscribe(c,u.getErrorHandler("event|click"),c),Rx.Observable.fromEvent(o,o.knownEvents.FULLSCREEN_CHANGE).takeUntil(this._disposed).take(1).doAction(function(e){e?this.show():this.hide()}.bind(this)).subscribe(c,u.getErrorHandler("event|FULLSCREEN_CHANGE"),c)}});d.create=function(e){var t=new d(e);return r.isFullscreen()?t.show():t.hide(),t},t.ui.PostPlayExitFullscreen=d}(),function(){"use strict";var e,t=netflix.cadmium,n=t.ui.Component,i=t.element,r=t.dom.get("DIV"),o=t.dom.get("SPAN"),s=t.Logger.create("component.postplay.starbar"),a=Rx.Observable,l=t.xhr,u=t.util.NOOP,c=1e4,d=5,p=1e3,m=n.extend({init:function(t,n){n=n||{},e=netflix.I18n,this._titleId=n.id,this._endpoint=n.endpoint,this._apiRevision=n.apiRevision,this._super(t),this._disposed=new Rx.Subject,this._selectedRating=n.value||0,this._createElements(),this._createEventSubscriptions(),this._resetStars()},destroy:function(){s.log("destroy"),this._disposed.onNext(),i.remove(this._rootEl),this._super()},_rateTitle:function(e){if(e===this._selectedRating)return a.empty();s.log("Rating title "+this._titleId+" rating="+e),this._selectedRating=e,this._resetStars();var t={withCredentials:!0,urlEncoded:!0,data:{titleid:this._titleId,rating:this._selectedRating}};this._apiRevision&&(t.data.revision=this._apiRevision);var n=l.post(this._endpoint,t).takeUntil(this._disposed).timeout(c).retryWithBackoff(d,p).doAction(function(e){s.log("data received",e)})["catch"](function(){this._resetStars()}.bind(this));return n.subscribe(u,s.getErrorHandler("xhr|rating"),u),n},_resetStars:function(){var e=Array.prototype.slice.call(this._rootEl.querySelectorAll(".postplay-star"));e.forEach(function(e){var t=parseInt(e.getAttribute("data-id"));e.classList[t>this._selectedRating?"remove":"add"]("selected")},this)},_createElements:function(){this._rootEl=r({"class":"postplay-starbar"},o({"class":"postplay-star-text"},e.get("ce-post-rate")),r({"class":"postplay-starbar-wrapper"},o({"class":"postplay-star","data-id":"1"}),o({"class":"postplay-star","data-id":"2"}),o({"class":"postplay-star","data-id":"3"}),o({"class":"postplay-star","data-id":"4"}),o({"class":"postplay-star","data-id":"5"}))),this.parentNode.appendChild(this._rootEl)},_createEventSubscriptions:function(){a.fromEvent(this._rootEl,"click").takeUntil(this._disposed).doAction(function(e){var t=parseInt(e.target.getAttribute("data-id"));isNaN(t)||this._rateTitle(t)}.bind(this)).subscribe(u,s.getErrorHandler("event|click"),u),a.fromEvent(this._rootEl,"mouseover").takeUntil(this._disposed).doAction(function(e){var t=e.target,n=parseInt(t.getAttribute("data-id"));if(!isNaN(n))for(var i=1;5>=i;i++)e.currentTarget.querySelector('.postplay-star[data-id="'+i+'"]').classList[n>=i?"add":"remove"]("selected")}).subscribe(u,s.getErrorHandler("event|mouseover"),u),a.fromEvent(this._rootEl,"mouseout").takeUntil(this._disposed).filter(function(e){return!this._rootEl.querySelector(":hover")}.bind(this)).doAction(this._resetStars.bind(this)).subscribe(u,s.getErrorHandler("event|mouseout"),u)}});m.create=function(e,t){return new m(e,t)},t.ui.PostPlayStarbar=m}(),function(){"use strict";var e,t,n,i=netflix.cadmium,r=i.dom,o=r.get("DIV"),s=r.get("SPAN"),a=i.Logger.create("component.postplay.akira.starbar"),l=function(r,a){var l,u=this,c={};e=netflix.I18n,a=a||{},this._parentEl=r,this._config=a,t||(t=Requireify.require("react")),n||(n=Requireify.require("js/akira/components/title/basicStarBar.jsx")),t.stub||n.stub||(this._starBarNode=o({"class":"starbar-container"},s({"class":"postplay-star-text"},e.get("ce-post-rate")),this._starBarHolder=o({"class":"starbar-holder"})),this._parentEl.appendChild(this._starBarNode),c.videoId=this._config.id,c.onRating=function(e){u._starBar.setProps({userRating:e})},this._config.value&&(c.userRating=this._config.value),l=t.createElement(n,c),this._starBar=t.render(l,this._starBarHolder),this._starBar.context={videoId:i.objects.videoId(),trackId:i.objects.trackId()},this._parentEl.appendChild(this._starBarNode))};l.prototype.destroy=function(){a.log("destroy"),t&&t.unmountComponentAtNode(this._starBarHolder),this._parentEl.removeChild(this._starBarNode),this._starBar=null,this._starBarNode=null,this._starBarHolder=null,this._parentEl=null,this._config=null},i.ui.AkiraPostPlayStarbar={create:function(e,t){return new l(e,t)}}}(),function(){"use strict";var e,t=netflix.cadmium,n=t.ui.Component,i=t.ui.PostPlayStarbar,r=t.ui.AkiraPostPlayStarbar,o=t.dom,s=o.get("DIV"),a=o.get("IMG"),l=o.get("P"),u=t.Logger.create("component.postplay.horizontal"),c=n.extend({
init:function(t,n){n=n||{},e=netflix.I18n,this._super(t),this._metadata=n,this._starBar=null,this._createElements()},destroy:function(){u.log("destroy"),this._starBar&&this._starBar.destroy(),this._super()},_createElements:function(){var n=this._metadata||{};this._rootEl=s({"class":"trailer-horizontal trailer-merch"},this._wrapperEl=s({"class":"trailer-horizontal-wrapper"},this._imageEl=a({"class":"trailer-horizontal-image"}),s({"class":"trailer-replay"},l({"class":"trailer-replay-icon"}),l({"class":"trailer-replay-text"},e.get("ce-post-replay-trailer"))))),n.horizontal?this._imageEl.setAttribute("src",n.horizontal):this._imageEl.style.minHeight="22.5em",n.userRating&&(t.ui.master.isAkira()?this._starBar=r.create(this._rootEl,n.userRating):this._starBar=i.create(this._rootEl,n.userRating)),this.parentNode.appendChild(this._rootEl)}});c.create=function(e,t){return new c(e,t)},t.ui.PostPlayHorizontal=c}(),function(){"use strict";var e,t=netflix.cadmium,n=t.ui.Component,i=t.objects,r=t.element,o=t.url,s=t.Logger.create("component.postplay.mylist"),a=Rx.Observable,l=t.xhr,u=t.util.NOOP,c=1e4,d=3,p=1e3,m="save",h="add",f="remove",v=n.extend({init:function(t,n){n=n||{},e=netflix.I18n,this._myList=n.myList,this._trackId=n.trackId,this._element=n.element,this._disposed=new Rx.Subject,this._myListAction=null,this._myListRequest=null,this._super(t)},destroy:function(){s.log("destroy"),this._disposed.onNext(),r.remove(this._rootEl),this._super()},toggleMyList:function(){if(this._myListRequest)return this._myListRequest;var e=this._myList;return e&&e.endpoint?(this._myListRequest=a.defer(function(){return this._myListAction||(this._myListAction=e.action===m?h:e.action),a["return"](this._myListAction)}.bind(this)).map(function(e){return{action:e,xaction:this._getXAction(e)}}.bind(this)).doAction(function(e){s.log("My List action",e),this._updateUI(e.xaction)}.bind(this)).flatMap(this._makeXhr.bind(this)).doAction(function(e){this._myList.action=this._myListAction=e.xaction,this._myListRequest=null}.bind(this))["catch"](function(){this._myListRequest=null}.bind(this)),this._myListRequest.subscribe(u,s.getErrorHandler("xhr|mylist"),u),this._myListRequest):a["throw"]("Nothing to add; my list is not defined.")},_getXAction:function(e){var t;return t=e===m||e==h?f:this._myList.addAction},_makeXhr:function(e){var t={withCredentials:!0,urlEncoded:!1,data:{action:e.action,videoId:this._myList.id,trackId:this._trackId}};return l.post(this._myList.endpoint,t).takeUntil(this._disposed).timeout(c).retryWithBackoff(d,p).map(function(t){if(s.log("My list response",t),t=t||{},!t.status||"success"!==t.status.toLowerCase())throw new Error(t);return t.xaction=e.xaction,t}.bind(this))},_updateUI:function(t){this._element&&("add"===t||"remove"===t||"save"===t)&&(this._element.textContent=e.get("ce-post-"+t+"-to-my-list"))}});v.create=function(e,t){return new v(e,t)},v.getCurrentState=function(e){e=e||{};var t=i&&i.initParams()||{},n={withCredentials:!0,urlEncoded:!0,data:{action:"get",videoId:e.id}};return"prod"!==t.environment&&(n.data.forcepromo=o.urlContains(/forcepromo=true/)),l.get(e.endpoint,n)},t.ui.PostPlayMyList=v}(),function(){"use strict";var e=netflix.cadmium,t=e.mixins,n="save-to-list",i="more-info";t.ui.buttons={MY_LIST_BUTTON:n,MORE_INFO_BUTTON:i,getMyListButton:function(e){var t=netflix.I18n;return{id:n,contentsEl:document.createTextNode(t.get("ce-post-"+e+"-to-my-list")),"class":"my-list",events:["click"]}},getMoreInfoButton:function(){var e=netflix.I18n;return{id:i,contentsEl:document.createTextNode(e.get("ce-post-more-info")),"class":"more-info",events:["click"]}}}}(),function(){"use strict";var e=netflix.cadmium,t=e.mixins;t.ui.videoInterstitial={addVideoInterstitialComponent:function(t){this._interstitial=this._addComponent(e.ui.VideoInterstitialComponent.create(this._parentEl,t)),this._interstitial.hasVideoPlayer()?(this._rootEl.style.display="none",this._parentEl.appendChild(this._interstitial.getElement()),this._interstitial.startAutoPlay()):(this._interstitial.destroy(),this._interstitial=null)},_handleInterstitialReturnToPlayback:function(){this._interstitial&&this._interstitial.cancelAutoPlay()},_onInterstitialTransitionEnd:function(){var e=this._interstitial.getElement();e.removeEventListener("transitionend",this._onInterstitialTransitionEnd),this._interstitial.removeEventListener(this._interstitial.videoEvents.INTERSTITIAL_VIDEO_START,this._onInterstitialVideoStart),this._interstitial.removeEventListener(this._interstitial.videoEvents.INTERSTITIAL_VIDEO_END,this._onInterstitialVideoEnd),this._interstitial.destroy()},_onInterstitialVideoStart:function(){this._videoPlayer&&this._videoPlayer.close(),e.UiEvents.fireEvent(e.UiEvents.knownEvents.VIDEO_ENDED),e.ui.exitPlayback.init(this._parentEl)},_onInterstitialVideoEnd:function(){var t=this._interstitial.getElement();this._rootEl.style.display="",t.addEventListener("transitionend",this._onInterstitialTransitionEnd),e.ui.exitPlayback.deinit()},createVideoInterstitialEvents:function(){this._interstitial&&(this._onInterstitialTransitionEnd=this._onInterstitialTransitionEnd.bind(this),this._onInterstitialVideoStart=this._onInterstitialVideoStart.bind(this),this._onInterstitialVideoEnd=this._onInterstitialVideoEnd.bind(this),this._interstitial.addEventListener(this._interstitial.videoEvents.INTERSTITIAL_VIDEO_START,this._onInterstitialVideoStart),this._interstitial.addEventListener(this._interstitial.videoEvents.INTERSTITIAL_VIDEO_END,this._onInterstitialVideoEnd))}}}(),netflix.cadmium.ui.exitPlayback=function(){function e(){return null===p&&(r=l.create("p"),r.appendChild(document.createTextNode(s.get("ce-back-to-browse"))),p=l.create("a",{"class":"player-back-to-browsing no-select icon-player-back-to-browse"}),p.appendChild(r)),p}function t(){d&&(d=!1,p&&(p.removeEventListener("click",o.ui.master.goBackToBrowsing,!1),l.remove(p),p=null),u.removeEventListener(u.knownEvents.CINEMA_MODE_ENTER,m),u.removeEventListener(u.knownEvents.CINEMA_MODE_EXIT,h),u.removeEventListener(u.knownEvents.SHOW_AUTOPLAY_INTERRUPTER,m),u.removeEventListener(u.knownEvents.HIDE_AUTOPLAY_INTERRUPTER,h),i=null,p=null,r=null,o=null,s=null,a=null,l=null,u=null,c=null)}function n(n){d&&t(),d=!0,i=n,o=netflix.cadmium,s=netflix.I18n,a=o.metadata,l=o.element,u=o.UiEvents,c=o.objects,c.initParams().inPagePlayer||(i.appendChild(e()),p.addEventListener("click",o.ui.master.goBackToBrowsing,!1)),u.addEventListener(u.knownEvents.CINEMA_MODE_ENTER,m),u.addEventListener(u.knownEvents.CINEMA_MODE_EXIT,h),u.addEventListener(u.knownEvents.SHOW_AUTOPLAY_INTERRUPTER,m),u.addEventListener(u.knownEvents.HIDE_AUTOPLAY_INTERRUPTER,h)}var i,r,o,s,a,l,u,c,d=!1,p=null,m=function(){p&&o.animate.fadeOut(p)},h=function(){p&&o.animate.fadeIn(p)};return{init:n,deinit:t,getBackToBrowsingEl:function(){return p}}}(),netflix.cadmium.ui.master=function(){"use strict";function e(){if(P){h&&h.views&&h.views.show(h.ui.shutdown,[O]);var e=y&&y.initParams()&&y.initParams().referrerIsNetflix;t()&&e?window.history.back():window.location.replace(y.initParams().backToBrowsingUrl)}}function t(){try{return"akira"===y.initParams().uimode}catch(e){return!1}}function n(){if(!N){var e,t=document.getElementsByTagName("head")[0],n=0;if(N=document.createElement("style"),N.appendChild(document.createTextNode("")),t.appendChild(N),e=N.sheet,"webkit"===k.prefix().lowercase&&window.navigator.userAgent.indexOf("Edge/")<0)try{e.insertRule("::-webkit-scrollbar { background-color: #262626; border-left: 1px solid black; width: 1.5em; }",n++),e.insertRule("::-webkit-scrollbar-thumb { background: -webkit-linear-gradient(top, #ccc 0%, #aaa 100%); border-left: 1px solid black; border-radius: .3em; }",n++)}catch(i){f.info(i)}try{e.insertRule("body { background-color: #000; }",n++)}catch(i){f.info(i)}}}function i(){N&&(v.remove(N),N=null)}function r(){return H=!1,netflix.cadmium.fullscreen&&netflix.cadmium.fullscreen.isFullscreen()&&(window.location=window.location),Rx.Observable.create(function(e){function t(){e.onNext(!0),e.onCompleted(),_&&_.fireEvent(_.knownEvents.SHUTDOWN),c(!1,!0)}function n(){h&&h.views.deinit(),t()}return i(),x?x.close(n):n(),M})}function o(){if(null===O){var e=k.prefix();C=v.create("section",{id:"netflix-player-font-wrapper"}),O=v.create("section",{id:"netflix-player","class":e&&e.css?"ua"+e.css:""},C),S=v.create("div",{"class":"player-video-wrapper player-hidden"},O),I.appendChild(C),y.setPlayerWrapper(O),O.addEventListener("contextmenu",l)}}function s(){P&&(x=y.videoPlayer(),_.removeEventListener(b.NEW_PLAYER_CREATED,s),f.log("new player created, appending element to dom"),S.appendChild(x.getElement()),_.fireEvent(b.NEW_PLAYER_DOM_CREATED))}function a(){P&&H&&(h.views.show(h.ui.shutdown,[O]),r().doAction(c).subscribe(M,f.getErrorHandler("beforeUnload"),M))}function l(e){return/debug=true/.test(window.location.search)?void 0:(e.preventDefault(),!1)}function u(e){f.log("postplayEnterHandler, ev:",e);var t=y.playerWrapper();h.ui.PostPlay.preinit(t)}function c(e,t){if(P){P=!1,f.log("deinit"),h.ui.playback.deinit(),v.remove(S.childNodes),w.deinit(),h.playbackEvents.deinit(),A.deinit(),h.removeBeforeUnloadHandler(a),_.removeEventListener(b.VIDEO_POSTPLAY_ENTER,u),e||(v.remove(O),O=null,S=null,g.clear(),_.destroy(),T.deinit(),netflix.cadmium.PostPlayData.deinit(),netflix.cadmium.playbackShutdown&&netflix.cadmium.playbackShutdown.onNext());try{netflix.player.diag.togglePanel("log",!1)}catch(n){}y.drain(e,t),I=null,C=null,N=null,f=null,v=null,E=null,g=null,_=null,b=null,y=null,x=null,k=null,w=null,T=null,L=null,R=!1,D=!1,H=!1}}function d(e,i,r){P&&c(!0);var l,d;if(h=netflix.cadmium,g=h.metadata,f=h.Logger.create("view.master"),v=h.element,_=h.UiEvents,b=_.knownEvents,y=h.objects,k=h.browser,E=h.url,w=h.sizing,I=e||document.body,D=!1,T=h.session,L=h.ui.errors,A=h.fullscreen,f.log("init"),h.unloadActions.init(),h.ui.fatal.listenForFatalErrors(),i){i.breakOnError=!1,void 0==i.enableTrickPlay&&(i.enableTrickPlay=!0),h.playbackEvents.init(),A.init(),T.init();try{l=netflix.clientNotifications.getCurrentSession("appSession").sessionId,d=netflix.clientNotifications.getCurrentSession("userSession").sessionId,i.isBladerunner?(i.appId=l,i.sessionId=d):(i.nccpAppId=l,i.nccpSessionId=d)}catch(p){}i.disableVideoRightClickMenu=!1;var m=E.getNextVideo();(m.episodeId||m.videoId)&&(delete i.videoId,delete i.movieId,delete i.episodeId,r=m.videoId?null:r,h.util.mix(m,i));var x=i.episodeId||i.movieId||i.videoId||-1;i.recap&&i.recap.hasPlayed&&delete i.recap;var C=E.getQueryString().ad;C&&(i.assistiveAudioPreferred="true"===C),y.setInitParams(i);var S=parseInt(E.getQueryString()[E.CONSTANTS.BOOKMARK],10);if(isNaN(S)||y.overrideBookmark(x,1e3*S),y.createVideoSession(),n(),o(),w.init(O),i.movieId<=1||i.videoId<=1)return void L.throwUIError(L.type.UI_TITLE_UNAVAILABLE);r?g.setMetadata(x,r):g.retrieveData(x);var N=g.getActiveVideo()||{};h.ui.preplay.preplayNeeded()||h.clips.getClipValues(N.id)||_.addEventListener(b.VIDEO_POSTPLAY_ENTER,u),P=!0,H=!0,_.addEventListener(b.NEW_PLAYER_CREATED,s),netflix.cadmium.addBeforeUnloadHandler(a),t()&&(document.cookie="profilesNewSession=0; domain=.netflix.com; path=/;max-age=100000000;"),h.views.show(h.ui.loader.create(i),[O,i])}}function p(e,t){if(e&&!R){R=!0,x.close(),O.classList.add("player-mdx-mode");var n=y.videoId();netflix.mdx.ui.master.init(n),netflix.mdx.ui.master.showState(t,"loading",n)}else!e&&R&&(R=!1,netflix.mdx.ui.master.hide(),d(I,y.initParams(),h.metadata.getMetadata()),O.classList.remove("player-mdx-mode"))}function m(e,t){y&&y.setPlayContext(t),d(I,e)}var h,f,v,E,g,_,b,y,x,k,w,T,L,A,P=!1,I=null,C=null,O=null,S=null,N=null,R=!1,D=!1,M=netflix.cadmium.util.NOOP,H=!1;return{init:d,deinit:c,updateInitParams:m,goBackToBrowsing:e,toggleMdxMode:p,isAkira:t,shutdown:r}}(),netflix.cadmium.ui.fatal=function(){"use strict";function e(e,t){var n,i=!1;return e&&e.length>0&&e.some(function(e){return n=t+e+"-phone",i=u.getWithParams(n,d,p),(""===i||i.indexOf(n)>=0)&&(i=u.getWithParams(t+e,d,p)),""!==i&&!/---.*---/.test(i)&&!/{.*}/.test(i)}),i=i.indexOf("MISSINGRESOURCE")>-1?"":i,i||u.get(t+"default")}function t(e){var t=h.initParams(),n=t.errorSupportUrls||{};return n[e]?"https://help.netflix.com/support/"+n[e]:""}function n(n){if(null===c){c=v.create("section",{"class":"player-fatal-message"});var i,r=e(n.messageIdList,"ce-head-"),o=u.get("ce-support-text"),s="",a="-1",l=h.initParams().hideSupportUrl;n.display&&(a=u.getWithParams("ce-head-code",["CODE"],[n.display.code||a]),s=t(n.display.code||a),i=n.display.text?n.display.text:e(n.messageIdList,"ce-text-"));var d="";l||""===s||""===o||(d="<p class='player-help-center'>"+o+"<a href='"+s+"'>"+s+"</a></p>"),c.innerHTML="<h1>"+u.get("ce-header")+"</h1><h2>"+r+"</h2><p>"+i+"</p>"+d+"<h3>"+a+"</h3>"}return c}function i(){function e(e,t){t&&(d.push(e),p.push(t))}var t=h.initParams(),n=t.supportPhoneNumber,i=t.signoutUrl,r=t.chromeVersion,o=h&&h.getCountry().toUpperCase();e("PHONE",n),e("SIGNOUT_URL",i),e("CHROME_VERSION",r),e("ISO",o)}function r(e){var t=netflix.clientNotifications;if(t){var n=E.getHash(E.CONSTANTS.EPISODE_ID),i=E.getHash(E.CONSTANTS.VIDEO_ID),r=h.videoId(),o=E.getQueryString(),s=parseInt(o.movieid),a={category:"uiQOE",modalView:"errorDialog",data:{playable:r||-1,requested:isNaN(s)?-1:s,h_episode:n||-1,h_video:i||-1,code:e&&e.display&&e.display.code||-1,core:h.videoPlayer()&&h.videoPlayer().getAdditionalLogInfo()||"na"}};t.notify("uiModalViewChanged",a),t.flushBuffer&&t.flushBuffer()}}function o(e){l=h.playerWrapper(),u=netflix.I18n,i(),l.appendChild(n(e)),r(e),m.ui.exitPlayback.init(l)}function s(){m.views.show(m.ui.fatal,[h.videoPlayer().getError()])}function a(){f.addEventListener(f.knownEvents.NEW_PLAYER_CREATED,function e(){h.videoPlayer().addEventListener("error",s),f.removeEventListener(f.knownEvents.NEW_PLAYER_CREATED,e)}),f.addEventListener(f.knownEvents.ERROR,function t(e){m.views.show(m.ui.fatal,[e]),f.removeEventListener(f.knownEvents.ERROR,t)})}var l,u,c=null,d=[],p=[],m=netflix.cadmium,h=m.objects,f=m.UiEvents,v=m.element,E=m.url;return{init:o,listenForFatalErrors:a}}(),netflix.cadmium.views.register(netflix.cadmium.ui.fatal,netflix.cadmium.views.types.fatal),function(){"use strict";var e=netflix.cadmium,t=e.element,n=e.ui.Component.extend({_rootClassName:"player-shutdown",_initDOM:function(){this.rootEl=t.create("div",{"class":this._rootClassName},this.parentNode),this._logoEl=t.create("div",{id:"logo"},this.rootEl),this._lightingEl=t.create("div",{id:"light"},this.rootEl),this._shadowEl=t.create("div",{id:"shadow"},this.rootEl)},_show:function(){this.parentNode.appendChild(this.rootEl),setTimeout(function(){this.rootEl.classList.add(t.classNames.visible)}.bind(this),1)},init:function(e){e&&(this._super(e,{}),this._initDOM(),this._show())}});e.ui.shutdown=function(){var e=new n;return{init:e.init.bind(e)}}(),e.views.register(e.ui.shutdown,e.views.types.fatal)}(),netflix.cadmium.ui.mdx.playback=function(){function e(){}function t(t){d&&e(),d=!0,n=t,i=netflix.cadmium,s=i.metadata,a=i.UiEvents,o=i.element,l=i.objects,r=i.ui,u=i.logging,c=o.classNames.active,u.log("view.mdx.playback.init",t,d);var p=l.videoPlayer();p.getPaused()?p.play():p.pause()}var n,i,r,o,s,a,l,u,c,d=!1;return{init:t,deinit:e}}(),netflix.cadmium.views.register(netflix.cadmium.ui.mdx.playback,netflix.cadmium.views.types.standard),netflix.cadmium.ui.autoplayInterrupter=function(){"use strict";function e(e){R.log("setNextVideoIsAutoplay for id",e),O=O||{},e&&(O[e]=!0),N=!0}function t(){return Object.keys(O||{}).length}function n(){return t()>=h}function i(){R.info("Reset count."),O={}}function r(){N?(N=!1,n()&&(C=netflix.cadmium.objects.videoPlayer(),C&&C.addEventListener("currenttimechanged",o))):i(),R.log("Autoplay count "+t())}function o(){S&&(m=C.getCurrentTime(),m>=f&&p())}function s(){R.log("Continue playing."),l(),c()}function a(){R.log("Play from beginning."),C.seek(0),l(),c()}function l(){C.removeEventListener("currenttimechanged",o),C.play(),i()}function u(){if(null===E){E=w.create("div",{"class":"player-autoplay-interrupter no-select"});var e=I(I({"class":"nf-icons icon-player-play"}),T.get("ce-post-break-continue"));g=new k.ui.Button(E,{"class":"continue-playing",contentsEl:e}),g.addEventListener(g.knownEvents.CLICK,s);var t=I(I({"class":"nf-icons icon-player-prev-episode"}),T.get("ce-post-break-restart"));_=new k.ui.Button(E,{"class":"continue-playing",contentsEl:t}),_.addEventListener(_.knownEvents.CLICK,a);var n=I(I({"class":"nf-icons icon-player-cancel"}),T.get("ce-post-break-back-to-browse"));b=new k.ui.Button(E,{"class":"continue-playing",contentsEl:n}),b.addEventListener(b.knownEvents.CLICK,k.ui.master.goBackToBrowsing)}return E}function c(){S&&(R.log("deinit"),S=!1,E&&(g&&(g.removeEventListener(g.knownEvents.CLICK,s),g.destroy()),_&&(_.removeEventListener(_.knownEvents.CLICK,a),_.destroy()),b&&(b.removeEventListener(b.knownEvents.CLICK,k.ui.master.goBackToBrowsing),b.destroy()),v.classList.remove(y),w.remove(E),C&&C.removeEventListener("currenttimechanged",o),A.fireEvent(A.knownEvents.HIDE_AUTOPLAY_INTERRUPTER)),N=null,m=null,v=null,E=null,g=null,_=null,b=null,y=null,x=null,k=null,w=null,T=null,L=null,A=null,P=null,I=null,C=null)}function d(e){S&&c(),N=!1,y="player-autoplay-interrupter-mode",x="show-autoplay-interrupter",k=netflix.cadmium,w=k.element,T=netflix.I18n,L=k.objects,A=k.UiEvents,P=k.dom,I=P.SPAN,R.log("init"),h=L.initParams().maxConsecutiveAutoplays||2,f=L.initParams().autoplayInterrupterTimestamp||12e4,S=!0,v=e}function p(){C.pause(),v.classList.add(y),v.appendChild(u()),requestAnimationFrame(function(){E.classList.add(x),A.fireEvent(A.knownEvents.SHOW_AUTOPLAY_INTERRUPTER)})}var m,h,f,v,E,g,_,b,y,x,k,w,T,L,A,P,I,C,O,S=!1,N=!1,R=netflix.cadmium.Logger.create("subview.autoplay.interrupter");return netflix.cadmium.UiEvents.addEventListener(netflix.cadmium.UiEvents.knownEvents.AUTOPLAY_NEXT_EPISODE,e),netflix.cadmium.UiEvents.addEventListener(netflix.cadmium.UiEvents.knownEvents.VIDEO_FIRST_PLAY,r),{init:d,deinit:c}}(),netflix.cadmium.ui.trickplayPreview=function(){"use strict";function e(){function e(e){if(z){var n=_.classList.contains(r);e&&n&&(_.classList.remove(r),F=null),e||n||(_.classList.add(r),F=null),t()}}if(z){var n=Y+K.value,i=1e3*L.getFloored(n),r="no-preview";y.nodeValue=L.convert(n),T.setImageTagSourceAtTime(x,i,e)}}function t(){var e=K.relativePosition-1,t=F||A.getDimensions(_).w;_.style.left=Math.floor(e-t/2)+"px",k.style.left=Math.floor(e)+"px"}function n(t){var n=t?"add":"remove";_.classList[n](V),k.classList[n](V),window.requestAnimationFrame(e)}function i(){F=A.getDimensions(_).w}function r(e){_.contains(e.target)||(K=e.component.pointerEventData.drag.current,n(!1))}function o(e){e.dragging&&(K=e.pointerEventData.drag.current,n(K.animate))}function s(e){K=e.pointerEventData.drag.current,n(K.animate),k.classList.add(j),_.classList.add(j),window.requestAnimationFrame(function(){z&&(k.classList.add(W),_.classList.add(W),C.fireEvent(C.knownEvents.SHOWN_TRICKPLAY_PREVIEW))})}function a(e){var t=e.component;_.contains(e.target)?l(e):(K=t.pointerEventData.drag.current,n(!1))}function l(e){window.clearTimeout(X),F=null,X=window.setTimeout(p,Q)}function u(e){window.clearTimeout(X),K=e.component.pointerEventData.drag.current,F=A.getDimensions(_).w,X=window.setTimeout(d,Q)}function c(e){var t=O.getPaused();(k.classList.contains(W)||e.pointerType===N.touch)&&(K=e.component.pointerEventData.drag.current,O.seek(1e3*K.value),t||O.play(),u(e))}function d(){if(z){var e="add";window.clearTimeout(X),n(!1),k.classList[e](j),_.classList[e](j),window.requestAnimationFrame(function(){z&&(k.classList[e](W),_.classList[e](W),C.fireEvent(C.knownEvents.SHOWN_TRICKPLAY_PREVIEW))})}}function p(){z&&(window.clearTimeout(X),k.classList.remove(W),_.classList.remove(W),G.fromEvent(_,"transitionend").takeUntil(H).filter(function(e){return"opacity"===e.propertyName}).take(1).doAction(function(){_.classList.contains(W)||(k.classList.remove(j),_.classList.remove(j),C.fireEvent(C.knownEvents.HIDDEN_TRICKPLAY_PREVIEW))}).subscribe(U,R.getErrorHandler("event|transitionend"),U))}function m(){B=I.getActiveVideo();var e=S.getClipValues(B.id);Y=e&&e.start/1e3||0}function h(){x=null,b=A.create("time"),y=b.appendChild(document.createTextNode("0")),_=A.create("section",{"class":"trickplay-preview no-preview"}),_.appendChild(b),D.wrapperEl.appendChild(_),k=A.create("div",{"class":"trickplay-position"},D.progressEl),null!==x&&A.remove(x),x=A.create("img",{"class":"trickplay-image"},_)}function f(){function e(e,t,n){return G.fromEvent(e,t).takeUntil(H).doAction(n)}var t=D.knownEvents,n=G.merge(e(D,t.MOUSE_ENTER,u),e(D,t.MOUSE_MOVE,a),e(D,t.MOUSE_LEAVE,l),e(D,t.DRAG_START,i),e(D,t.NEW_VALUE,o),e(D,t.DRAG_END,r),e(D,t.CLICK,c)),d=G.fromEvent(D,t.NEW_VALUE),p=G.fromEvent(C,C.knownEvents.DRAG_MODE_ENTER),h=G.fromEvent(C,C.knownEvents.KEYBOARD_SEEK_ENTER);p.startWith(null).takeUntil(H).flatMap(function(){return n.takeUntil(h)}).subscribe(U,R.getErrorHandler("uievent|DRAG_MODE_ENTER"),U),h.takeUntil(H).flatMap(function(){return d.takeUntil(p).throttle(10)}).doAction(s).subscribe(U,R.getErrorHandler("uievent|KEYBOARD_SEEK_ENTER"),U),G.fromEvent(C,C.knownEvents.CINEMA_MODE_ENTER).takeUntil(H).doAction(l).subscribe(U,R.getErrorHandler("uievent|CINEMA_MODE_ENTER"),U),G.fromEvent(C,C.knownEvents.METADATA_LOADED).merge(G["return"](B&&B.id===P.videoId())).takeUntil(H).filter(function(e){return!!e}).doAction(m).subscribe(U,R.getErrorHandler("uievent|METADATA_LOADED"),U)}function v(){z&&(z=!1,H.onNext(),window.clearTimeout(X),A.remove([k,_]),g=null,_=null,b=null,y=null,x=null,k=null,F=null,w=null,T=null,L=null,A=null,P=null,I=null,C=null,O=null,S=null,N=null,R=null,D=null,M=null,H=null,U=null,B=null,K=null,q=null,X=null,V=null,j=null,W=null)}function E(e){z&&v(),z=!0,g=e,w=netflix.cadmium,T=w.trickplay,L=w.time,A=w.element,P=w.objects,C=w.UiEvents,I=w.metadata,S=w.clips,O=P.videoPlayer(),N=w.browser.pointerTypes,R=w.Logger.create("subview.trickplay.preview"),V=A.classNames.animate,j=A.classNames.visible,W=A.classNames.active,U=w.util.NOOP,K={value:null,relativePosition:null,absolutePosition:null,wrapperDimensions:null},H=new Rx.Subject,Y=0,D=w.ui.scrubber.getScrubberComponent(),B=I.getActiveVideo(),M=w.ui.scrubber.getLabelEl(),h(),f()}var g,_,b,y,x,k,w,T,L,A,P,I,C,O,S,N,R,D,M,H,U,B,V,j,W,z=!1,F=null,G=Rx.Observable,Y=0,q=null,K={value:null,relativePosition:null,absolutePosition:null,wrapperDimensions:null},X=null,Q=300;return{init:E,deinit:v,hideTrickplayPreview:p}}(),netflix.cadmium.ui.scrubber=function(){"use strict";function e(e,t){P&&I&&t&&g.update(R,e.duration,e.buffer)}function t(e){if(P&&(O.firstChild.nodeValue=b.convert(e.duration-R),!D||D!==e.duration)){D=e.duration;var t=D>M?"add":"remove",n="player-long-title";O.classList[t](n)}}function n(){if(P){var n=w.getCurrentTime()/1e3,i=w.getBufferedTime()/1e3;if(!g.dragging&&N&&n!==R){R=n;var r={currentTime:n,duration:w.getDuration()/1e3,buffer:i};e(r,!0),t(r)}}}function i(t){e({currentTime:t.value,duration:t.max},!1)}function r(){g.snapbackDragEl.classList.add(y.classNames.active),N||(N=!0,x.fireEvent(x.knownEvents.DRAG_MODE_ENTER)),x.fireEvent(x.knownEvents.DRAG_START_SCRUBBER)}function o(e,t){w.seek(1e3*t.value),t.pointerEventData.playing&&w.play(),g.snapbackDragEl.classList.remove(y.classNames.active),x.fireEvent(x.knownEvents.DRAG_FINISH_SCRUBBER)}function s(){C.classList.add(L)}function a(){C.classList.remove(L)}function l(){I=!1}function u(){I=!0,n()}function c(e){w.getPaused()||w.pause(),setTimeout(function(){g.incrementScrubberPosition(e),N&&(x.fireEvent(x.knownEvents.KEYBOARD_SEEK_ENTER),N=!1),g.fireEvent(g.knownEvents.NEW_VALUE,[g])},1)}function d(){c(S)}function p(){c(-1*S)}function m(){w.getPaused()||N||(w.seek(1e3*g.value),N=!0,x.fireEvent(x.knownEvents.DRAG_MODE_ENTER),A.hideTrickplayPreview())}function h(){g.incrementScrubberPosition(0),g.fireEvent(g.knownEvents.NEW_VALUE,[g])}function f(){O=y.create("label",{},C),O.appendChild(document.createTextNode(0))}function v(){P&&(A.deinit(),g.destroy(),g.removeEventListener(g.knownEvents.NEW_VALUE,i),g.removeEventListener(g.knownEvents.DRAG_END,o),g.removeEventListener(g.knownEvents.DRAG_START,r),x.removeEventListener(x.knownEvents.SHOW_MENU,s),x.removeEventListener(x.knownEvents.HIDE_MENU,a),x.removeEventListener(x.knownEvents.CINEMA_MODE_ENTER,l),x.removeEventListener(x.knownEvents.CINEMA_MODE_EXIT,u),x.removeEventListener(x.knownEvents.WINDOW_RESIZE,h),w.removeEventListener("currenttimechanged",n),w.removeEventListener("durationchanged",n),w.removeEventListener("bufferedtimechanged",n),T.removeEventListener(T.knownEvents.SEEK_FORWARD,d),T.removeEventListener(T.knownEvents.SEEK_BACKWARD,p),w.removeEventListener("pausedchanged",m),y.remove(O),C=null,O=null,g=null,_=null,b=null,y=null,x=null,k=null,w=null,T=null,L=null,R=0,A=null,P=!1,D=!1)}function E(t){P&&v(),P=!0,C=t,_=netflix.cadmium,x=_.UiEvents,y=_.element,b=_.time,k=_.objects,T=_.keyboard,w=k.videoPlayer(),L=y.classNames.hidden,f(),g=new _.ui.ScrubberComponent(C),A=_.ui.trickplayPreview,A.init(C),g.addEventListener(g.knownEvents.NEW_VALUE,i),g.addEventListener(g.knownEvents.DRAG_START,r),g.addEventListener(g.knownEvents.DRAG_END,o),x.addEventListener(x.knownEvents.SHOW_MENU,s),x.addEventListener(x.knownEvents.HIDE_MENU,a),x.addEventListener(x.knownEvents.CINEMA_MODE_ENTER,l),x.addEventListener(x.knownEvents.CINEMA_MODE_EXIT,u),x.addEventListener(x.knownEvents.WINDOW_RESIZE,h),T.addEventListener(T.knownEvents.SEEK_FORWARD,d),T.addEventListener(T.knownEvents.SEEK_BACKWARD,p),w.addEventListener("pausedchanged",m),w.addEventListener("currenttimechanged",n),w.addEventListener("durationchanged",n),w.addEventListener("bufferedtimechanged",n),e({currentTime:w.getCurrentTime()/1e3,buffer:w.getBufferedTime()/1e3,duration:w.getDuration()/1e3},!0)}var g,_,b,y,x,k,w,T,L,A,P=!1,I=!0,C=null,O=null,S=10,N=!0,R=0,D=!1,M=36e5;return{init:E,deinit:v,getLabelEl:function(){return O},getScrubberComponent:function(){return g}}}(),netflix.cadmium.ui.longpause=function(){"use strict";function e(e){L&&n(),c=netflix.cadmium,d=Rx.Observable,p=c.metadata,m=c.objects,h=c.element,f=c.time,v=c.animate,E=netflix.I18n,g=c.UiEvents,_=c.Logger.create("subview.longpause"),b=h.create,y=c.util.NOOP,x=h.classNames.hidden,k=e,A=new Rx.Subject,p.getMetadata()?t():d.fromEvent(g,g.knownEvents.METADATA_LOADED).takeUntil(A).take(1).doAction(t).subscribe(y,_.getErrorHandler("event|METADATA_LOADED"),y)}function t(){i(),s(),L=!0}function n(){L&&(L=!1,A.onNext(),h.remove(w),k=null,w=null,T=null,A=null,c=null,d=null,p=null,m=null,h=null,f=null,v=null,E=null,g=null,_=null,b=null,y=null,x=null)}function i(){var e=p.getMetadata();w=b("div",{"class":"playback-longpause-container opacity-transparent display-none player-hidden"}),T=b("div",{"class":"content"},w),b("p",{id:"p-label"},w).textContent=E.get("ce-long-pause-paused"),b("p",{id:"yw-label"},T).textContent=E.get("ce-long-pause-youre-watching"),p.isShowData(e)?o(e):r(e),k.appendChild(w)}function r(e){var t=b("h2",{},T),n=b("h3",{},T),i=b("span",{},n),r=b("span",{},n),o=b("span",{},n),s=b("p",{},T),a=e.video;a.title&&(t.textContent=a.title),a.year&&(i.textContent=a.year),a.rating&&(r.textContent=a.rating),a.runtime&&(o.textContent=f.convertUsingKey(a.runtime,!1,!0,"ce-time")),a.synopsis&&(s.textContent=a.synopsis)}function o(e){var t=b("h2",{},T),n=b("h3",{},T),i=b("h3",{},T),r=b("p",{},T),o=e.video,s=p.getActiveSeason(),a=p.getActiveVideo();o.title&&(t.textContent=o.title),s&&a&&(n.innerHTML=s.title+": "+E.get("ce-episode-abbreviation")+" "+a.seq,a.title&&(i.textContent=a.title),a.synopsis&&(r.textContent=a.synopsis))}function s(){var e=d.fromEvent(g,g.knownEvents.CINEMA_MODE_ENTER),t=d.fromEvent(g,g.knownEvents.CINEMA_MODE_EXIT),n=d.fromEvent(g,g.knownEvents.PAUSE_TOGGLED).filter(function(e){return e}),i=d.fromEvent(g,g.knownEvents.PAUSE_TOGGLED).filter(function(e){return!e});n.takeUntil(A).flatMap(function(){_.log("User initiated pause.");var n=e.filter(function(){return u()}).takeUntil(i).flatMap(function(){return d.timer(P).takeUntil(t).doAction(a)}),r=d.merge(i,t).doAction(l);return d.merge(n,r)}).subscribe(y,_.getErrorHandler("event|PAUSE_TOGGLED"),y)}function a(){return L?u()?void requestAnimationFrame(function(){v.fadeIn(w),requestAnimationFrame(function(){w.classList.remove(x)})}):void _.error("Show pause screen called but player is not in a paused state."):void 0}function l(){L&&(w.classList.add(x),v.fadeOut(w))}function u(){return m.videoPlayer().getPaused()}var c,d,p,m,h,f,v,E,g,_,b,y,x,k,w,T,L,A,P=1e4;return{init:e,deinit:n}}(),netflix.cadmium.ui.mdx=function(){function e(){return null===f&&(f=l.create("div",{"class":["player-mdx","player-control-button icon-player-mdx",p].join(" ")})),f}function t(){m.hasCastTargets=!1,f.classList.add(p)}function n(){m.hasCastTargets=!0,f.classList.remove(p)}function i(){d.isFullscreen()&&d.exit(),m.showCastDialog()}function r(){c.removeEventListener(c.knownEvents.MDX_LOADED,r),m=u.mdxManager(),f.addEventListener("click",i),m.addEventListener(m.EVENTS.castDevicesAvailable,n),m.addEventListener(m.EVENTS.castDevicesUnavailable,t),m.hasCastTargets&&n()}function o(t){return h&&s(),netflix.cadmium.objects.initParams().mdxEnabled?(h=!0,a=netflix.cadmium,u=a.objects,c=netflix.cadmium.UiEvents,d=netflix.cadmium.fullscreen,l=a.element,p=l.classNames.hidden,t.appendChild(e()),m=u.mdxManager(),m&&m.mdxEnabled?r():(c.addEventListener(c.knownEvents.MDX_LOADED,r),netflix.mdx.bootstrap.readyToInit()&&netflix.mdx.bootstrap.tryInitMdx()),f):void 0}function s(){h&&(c.removeEventListener(c.knownEvents.MDX_LOADED,this._mdxLoadedHandler,this),l.remove(f),m&&(f.removeEventListener("click",i),m.removeEventListener(m.EVENTS.castDevicesAvailable,n),m.removeEventListener(m.EVENTS.castDevicesUnavailable,t)),f=null,m=null,a=null,l=null,u=null,c=null,d=null,p=null,h=!1)}var a,l,u,c,d,p,m,h,f=null;return{init:o,deinit:s}}(),netflix.cadmium.ui.pauser=function(){"use strict";function e(){return null===_&&(_=m.create("div",{"class":"player-control-button player-play-pause pause "+T})),_}function t(){g&&(f.getPaused()?(_.classList.remove(k),_.classList.remove(T),_.classList.add(x),_.classList.add(w)):(_.classList.remove(x),_.classList.remove(w),_.classList.add(k),_.classList.add(T)))}function n(){f.getPaused()?f.play():f.pause(),v.fireEvent(v.knownEvents.PAUSE_TOGGLED,[f.getPaused()])}function i(){y=!1}function r(){y=!0}function o(e){(e.target===_||e.target===d)&&n()}function s(e){!b&&y&&e.target===document.body&&(e.preventDefault(),n())}function a(e){b="focus"===e.type}function l(){g&&(g=!1,f.removeEventListener("pausedchanged",t),_.removeEventListener("click",o),_.removeEventListener("focus",a),_.removeEventListener("blur",a),v.removeEventListener(v.knownEvents.SHOW_AUTOPLAY_INTERRUPTER,i),v.removeEventListener(v.knownEvents.HIDE_AUTOPLAY_INTERRUPTER,r),E.removeEventListener(E.knownEvents.TOGGLE_PLAY,s),m.remove(_),c=null,_=null,d=null,p=null,m=null,h=null,f=null,v=null,E=null)}function u(n){return g&&l(),g=!0,c=n,b=!1,p=netflix.cadmium,m=p.element,h=p.objects,f=h.videoPlayer(),v=p.UiEvents,E=p.keyboard,c.appendChild(e()),t(),f.addEventListener("pausedchanged",t),_.addEventListener("click",o),_.addEventListener("focus",a),_.addEventListener("blur",a),E.addEventListener(E.knownEvents.TOGGLE_PLAY,s),v.addEventListener(v.knownEvents.SHOW_AUTOPLAY_INTERRUPTER,i),v.addEventListener(v.knownEvents.HIDE_AUTOPLAY_INTERRUPTER,r),_}var c,d,p,m,h,f,v,E,g=!1,_=null,b=!1,y=!0,x="play",k="pause",w="icon-player-play",T="icon-player-pause";return{init:u,deinit:l}}(),netflix.cadmium.ui.volume=function(){function e(e){d.menuEl.contains(e.target)||d.toggleMute()}function t(){return null===l&&(l=o.create("div",{"class":"player-control-button volume icon-player-volume-full"}),d=new r.ui.VolumeMenuComponent(l,l,{id:"player-menu-volume",volumeTextNode:c})),l}function n(){l.removeEventListener("click",e),d&&d.destroy(),s=!1,a=null,l=null,u=null,c=null,d=null,r=null,o=null}function i(i){return s&&n(),s=!0,a=i,r=netflix.cadmium,
o=r.element,a.appendChild(t()),l.addEventListener("click",e),l}var r,o,s=!1,a=null,l=null,u=null,c=null,d=null;return{init:i,deinit:n}}(),netflix.cadmium.ui.status=function(){"use strict";function e(){var e,t,n,i=s.getMetadata();if(i)n="<span class='player-status-main-title'>"+i.video.title+"</span>",s.videoIsKnown(u.videoId())&&(e=s.getActiveVideo(),t=s.isShowData(i),t&&e&&(n+=netflix.I18n.getWithParams("ce-status-episodic-title",["SEASON_TITLE","EPISODE","EPISODE_TITLE"],[s.getActiveSeason().title,e.seq,e.title]))),d.innerHTML=n;else if(o.ui.preplay.preplayNeeded()){var r=u.initParams().preplay,a=r?r.movieTitle:"";a=decodeURIComponent(a.replace(/\+/g,"%20")),d.innerHTML="<span class='player-status-main-title'>"+a+"</span>"}}function t(){return null===d&&(d=a.create("div",{"class":"player-status"})),d}function n(){c&&(c=!1,l.removeEventListener(l.knownEvents.METADATA_LOADED,e),a.remove(d),r=null,d=null,o=null,s=null,a=null,l=null,u=null)}function i(i){return c&&n(),c=!0,r=i,o=netflix.cadmium,s=o.metadata,a=o.element,l=o.UiEvents,u=o.objects,l.addEventListener(l.knownEvents.METADATA_LOADED,e),r.appendChild(t()),e(),d}var r,o,s,a,l,u,c=!1,d=null;return{init:i,deinit:n}}(),netflix.cadmium.ui.nextEpisode=function(){function e(){return null===v&&(v=u.create("div",{"class":["player-control-button","player-next-episode icon-player-next-episode",h].join(" ")})),v}function t(e){if(v.contains(e.target)){var t=p.initParams()||{},n=l.getNextEpisode().id;c.setNextVideo(c.CONSTANTS.EPISODE_ID,n,t.trackIdNextEpisode||0),a.ui.master.updateInitParams(t,null)}}function n(){var e=p.videoId(),t=l.videoIsKnown(e),n=t&&null!==l.getNextEpisode();n&&!m.getClipValues(e)?(v.classList.remove(h),E=new a.ui.NextEpisodeMenuComponent(v,v,{id:"player-menu-next-episode"})):v.classList.add(h)}function i(){f&&(f=!1,null!==E&&E.destroy(),d.removeEventListener(d.knownEvents.METADATA_LOADED,n),v.removeEventListener("click",t),u.remove(v),o=null,v=null,s=null,E=null,a=null,l=null,u=null,c=null,d=null,p=null,m=null,h=null)}function r(r){return f&&i(),f=!0,o=r,a=netflix.cadmium,l=a.metadata,u=a.element,c=a.url,d=a.UiEvents,p=a.objects,m=a.clips,h=u.classNames.hidden,o.appendChild(e()),d.addEventListener(d.knownEvents.METADATA_LOADED,n),v.addEventListener("click",t),n(),v}var o,s,a,l,u,c,d,p,m,h,f=!1,v=null,E=null;return{init:r,deinit:i}}(),netflix.cadmium.ui.episodeSelector=function(){"use strict";function e(e){var t=d.initParams()||{};m.setNextVideo(m.CONSTANTS.EPISODE_ID,e.videoId,t.trackIdEpisodeSelector),a.ui.master.updateInitParams(d.initParams(),null)}function t(){return null===v&&(v=u.create("div",{"class":["player-control-button","player-episode-selector icon-player-episode-selector",h].join(" ")})),v}function n(){var t=d.videoId(),n=l.videoIsKnown(t),i=n&&l.getTotalEpisodeCount(t)>1;i&&!p.getClipValues(t)?(v.classList.remove(h),E=E||new a.ui.EpisodeSelectorMenuComponent(v,v,{id:"player-menu-episode-selector"}),E.addEventListener(E.CHANGE_VIDEO_EVENT,e)):v.classList.add(h)}function i(){f&&(f=!1,null!==E&&(E.removeEventListener(E.CHANGE_VIDEO_EVENT,e),E.destroy()),E=null,c.removeEventListener(c.knownEvents.METADATA_LOADED,n),u.remove(v),o=null,v=null,s=null,a=null,l=null,u=null,c=null,d=null,p=null,m=null,h=null)}function r(e){return a=netflix.cadmium,d=a.objects,f&&i(),f=!0,o=e,l=a.metadata,u=a.element,c=a.UiEvents,p=a.clips,m=a.url,h=u.classNames.hidden,o.appendChild(t()),c.addEventListener(c.knownEvents.METADATA_LOADED,n),n(),v}var o,s,a,l,u,c,d,p,m,h,f=!1,v=null,E=null;return{init:r,deinit:i}}(),netflix.cadmium.ui.audio=function(){"use strict";function e(){return null===E&&(E=u.create("div",{"class":["player-control-button","player-audio-select icon-player-subtitle-selector",f].join(" ")})),E}function t(){(m.getAudioTrackList().length>1||m.getTimedTextTrackList().length>1)&&E.classList.remove(f)}function n(){v&&(v=!1,s.destroy(),c.removeEventListener(d.METADATA_LOADED,t),u.remove(E),r=null,E=null,o=null,s=null,a=null,l=null,u=null,c=null,d=null,p=null,m=null,h=null,f=null)}function i(i){return v&&n(),v=!0,r=i,a=netflix.cadmium,l=a.metadata,u=a.element,c=a.UiEvents,d=c.knownEvents,p=a.objects,m=p.videoPlayer(),h=a.session,f=u.classNames.hidden,r.appendChild(e()),s=new a.ui.AudioSubtitleMenuComponent(E,E,{id:"player-menu-track-settings"}),c.addEventListener(d.METADATA_LOADED,t),t(),E}var r,o,s,a,l,u,c,d,p,m,h,f,v=!1,E=null;return{init:i,deinit:n}}(),netflix.cadmium.ui.fullscreen=function(){"use strict";function e(e){e?(E.classList.add(_),E.classList.remove(g)):(E.classList.add(g),E.classList.remove(_))}function t(){return null===E&&(E=d.create("div",{"class":"player-control-button player-fill-screen"})),e(m.isFullscreen()),E}function n(e){var t=e.target;E.contains(t)&&m.toggle()}function i(e){var t=e.target,n=a.parentNode;n.contains(t)||m.toggle()}function r(){E.addEventListener("click",n),l.addEventListener("dblclick",i,!1),p.addEventListener(p.knownEvents.FULLSCREEN_CHANGE,e)}function o(){v&&(v=!1,E.removeEventListener("click",n),l.removeEventListener("dblclick",i,!1),p.removeEventListener(p.knownEvents.FULLSCREEN_CHANGE,e),d.remove(E),a=null,E=null,l=null,u=null,c=null,d=null,p=null,m=null,h=null,f=null)}function s(e){return v&&o(),u=netflix.cadmium,d=u.element,c=u.objects,p=u.UiEvents,m=u.fullscreen,h=u.Logger.create("subview.fullscreen"),f=u.util,h.log("init"),l=c.playerWrapper(),a=e,E=t(),r(),a.appendChild(E),v=!0,E}var a,l,u,c,d,p,m,h,f,v=!1,E=null,g="icon-player-full-screen",_="icon-player-windowed-screen";return{init:s,deinit:o}}(),netflix.cadmium.ui.preplay=function(){"use strict";function e(){var e=netflix.cadmium&&netflix.cadmium.objects&&"function"==typeof netflix.cadmium.objects.initParams&&netflix.cadmium.objects.initParams().recap;return e&&e.movieId&&!e.hasPlayed}function t(){l.removeAttribute("style");var e=L.initParams();e.recap.hasPlayed=!0,T.ui.master.updateInitParams(e)}function n(){t()}function i(){t()}function r(t){if(k&&o(),e()){T=netflix.cadmium,L=T.objects,g=T.metadata,_=T.element,b=T.UiEvents,y=L.videoPlayer(),x=netflix.I18n,E=L.initParams().recap,k=!0,v=new Rx.Subject,l=document.getElementsByClassName("player-video-wrapper")[0],a=t,t.classList.add(w),c=_.create("div",{id:"preplay-bg"},t),c.style.cssText="background-image: url("+E.backgroundImage+");",u=_.create("div",{id:"video-bg"},l),d=_.create("div",{"class":"preplay-header"},l),p=_.create("div",{id:"preplay-logo"},d),m=_.create("span",{id:"preplay-text-recap"},d);var r=E.seasonNumber;p.style.cssText="background-image: url("+E.logoImage+");",m.textContent=x.getWithParams("ce-season-recap-text",["SEASON"],[r]),h=_.create("div",{},l),f=new T.ui.Button(h,{id:"preplay-skip-button",contentsEl:document.createTextNode(x.getWithParams("ce-start-next-season-button",["SEASON"],[r+1]))}),A.fromEvent(f,f.knownEvents.CLICK).takeUntil(v).take(1).subscribe(n);var I=y.getVideoSize();P=I.width/I.height,s(),A.fromEvent(b,b.knownEvents.WINDOW_RESIZE).takeUntil(v).subscribe(s),A.fromEvent(b,b.knownEvents.VIDEO_ENDED).takeUntil(v).take(1).subscribe(i)}}function o(){k&&(v.onNext(),a.classList.remove(w),f&&f.destroy(),_.remove(c),_.remove(d),_.remove(u),_.remove(h),L.clearTrackId(),k=!1,a=null,l=null,u=null,c=null,d=null,p=null,m=null,h=null,f=null,v=null,E=null,T=null,L=null,g=null,_=null,b=null,y=null,x=null,P=null)}function s(){window.requestAnimationFrame(function(){var e,t,n=_.getDimensions(a);n.w/n.h>P?(t=.7*n.h,e=t*P):(e=.7*n.w,t=e/P),l.style.width=e+"px",l.style.height=t+"px"})}var a,l,u,c,d,p,m,h,f,v,E,g,_,b,y,x,k=!1,w="player-preplay",T=netflix.cadmium,L=T.objects,A=Rx.Observable,P=null;return{init:r,deinit:o,preplayNeeded:e}}(),netflix.cadmium.ui.incognito=function(){function e(){return null===E&&(E=l.create("div",{"class":["player-control-button","player-incognito",p].join(" ")})),E}function t(){if(d&&d.enabled===!0){E.classList.remove(p),E.classList.add("player-incognito--"+d.mode);var e=_[d.mode];e?(m=l.create("span"),m.appendChild(document.createTextNode(_[d.mode])),E.appendChild(m)):(h=document.createElement("div"),h.innerHTML=b.SHARED,E.appendChild(h),Rx.Observable.fromEvent(c,c.knownEvents.INCOGNITO_CHANGED).takeUntil(f).subscribe(n)),g=g||new s.ui.IncognitoMenuComponent(E,E,{id:"player-menu--incognito"}),d.autoshow&&(g.showTickler(),g.sendIncognitoReq({method:"auto"})),Rx.Observable.fromEvent(E,"click").takeUntil(f).filter(function(e){return!g.isLoading()&&!g.menuEl.contains(e.target)}).subscribe(g.toggleIncognito)}}function n(e){h.innerHTML=e.isIncognito?b.PRIVATE:b.SHARED}function i(){v&&(v=!1,g&&g.destroy(),g=null,l.remove(E),c.removeEventListener(c.knownEvents.INCOGNITO_CHANGED,n),f.onNext(),E=null,o=null,s=null,a=null,l=null,u=null,c=null,d=null,p=null,m=null)}function r(n){v&&i(),s=netflix.cadmium,u=s.objects;var r=u.videoPlayer();return r&&r.getXid&&r.getXid()?(v=!0,o=n,a=s.metadata,l=s.element,c=s.UiEvents,p=l.classNames.hidden,d=u.initParams().incognitoConfig,f=new Rx.Subject,o.appendChild(e()),t(),E):void 0}var o,s,a,l,u,c,d,p,m,h,f,v=!1,E=null,g=null,_={history:"a",anonymous:"b","private":"c"},b={SHARED:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 144 144" enable-background="new 0 0 144 144" xml:space="preserve"><g class="sauron" id="sauron-open"><path d="M114.1,66.4c-7.5-8.5-23.6-24-42.3-24S37,57.8,29.6,66.4c-2.7,3.1-2.7,7.8,0,10.9c7.5,8.5,23.6,24,42.3,24s34.8-15.5,42.3-24C116.8,74.2,116.8,69.5,114.1,66.4zM105.5,76.2C99.5,83,86.7,95.3,71.8,95.3c-14.9,0-27.7-12.3-33.7-19.1c-2.2-2.5-2.2-6.2,0-8.7c5.9-6.8,18.8-19.1,33.7-19.1c14.9,0,27.7,12.3,33.7,19.1C107.7,70,107.7,73.7,105.5,76.2z"/><path d="M71.8,58C64.2,58,58,64.2,58,71.8s6.2,13.8,13.8,13.8s13.8-6.2,13.8-13.8S79.5,58,71.8,58zM71.8,82c-5.6,0-10.2-4.6-10.2-10.2c0-5.6,4.6-10.2,10.2-10.2c5.6,0,10.2,4.6,10.2,10.2C82,77.5,77.4,82,71.8,82z"/></g></svg>',PRIVATE:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 144 144" enable-background="new 0 0 144 144" xml:space="preserve"><g class="sauron" id="sauron-closed"><path fill="none" d="M72.5,83.1c5.6,0,10.2-4.6,10.2-10.2c0-2.4-0.8-4.5-2.2-6.3L66.2,80.9C68,82.3,70.1,83.1,72.5,83.1z"/><path fill="none" d="M91.5,55.7L83.1,64c2,2.4,3.3,5.5,3.3,8.9c0,7.6-6.2,13.8-13.8,13.8c-3.4,0-6.5-1.2-8.9-3.3l-8,8c5.1,2.9,10.8,5,16.8,5c14.9,0,27.7-12.3,33.7-19.1c2.2-2.5,2.2-6.2,0-8.7C103,64.9,97.8,59.7,91.5,55.7z"/><path d="M45,83.6l33.5-33.5l4.9-4.9c-3.5-1.1-7.2-1.7-11-1.7c-18.7,0-34.8,15.5-42.3,24c-2.7,3.1-2.7,7.8,0,10.9c2.5,2.8,5.9,6.4,10,9.9L45,83.6z"/><path d="M114.8,67.4c-4-4.6-10.6-11.2-18.7-16.4l9.1-9.1c0.6-0.6,0.6-1.7,0-2.4l-0.4-0.4c-0.6-0.6-1.7-0.6-2.4,0l-64.2,64.2c-0.6,0.6-0.6,1.7,0,2.4l0.4,0.4c0.6,0.6,1.7,0.6,2.4,0L51.1,96c6.4,3.7,13.7,6.4,21.4,6.4c18.7,0,34.8-15.5,42.3-24C117.5,75.3,117.5,70.6,114.8,67.4zM82.7,72.9c0,5.6-4.6,10.2-10.2,10.2c-2.4,0-4.5-0.8-6.3-2.2l14.2-14.2C81.8,68.4,82.7,70.5,82.7,72.9zM106.2,77.3c-5.9,6.8-18.8,19.1-33.7,19.1c-6.1,0-11.8-2.1-16.8-5l8-8c2.4,2,5.5,3.3,8.9,3.3c7.6,0,13.8-6.2,13.8-13.8c0-3.4-1.2-6.5-3.3-8.9l8.4-8.4c6.4,4.1,11.5,9.3,14.7,12.9C108.3,71.1,108.3,74.8,106.2,77.3z"/></g></svg>'};return{init:r,deinit:i}}(),netflix.cadmium.ui.popup=function(){"use strict";var e,t=netflix.cadmium,n=t.element,i=null,r=[],o=!1,s=!1,a={CONTAINER_CLASS:"popup-dialog-container",MESSAGE_CLASS:"popup-dialog-message",BUTTON_CONTAINER_CLASS:"popup-buttons-container"},l=function(){var t=r.pop();o=!0,i=n.create("div",{"class":a.CONTAINER_CLASS}),n.create("h2",{"class":a.MESSAGE_CLASS},i).appendChild(document.createTextNode(t.title)),n.create("p",{"class":a.MESSAGE_CLASS},i).appendChild(document.createTextNode(t.message));for(var s=n.create("div",{"class":a.BUTTON_CONTAINER_CLASS}),l=0;l<t.choices.length;l++){var u=t.choices[l],c=n.create("button",{},s);c.appendChild(document.createTextNode(u.text)),u.onClick&&c.addEventListener("click",u.onClick)}i.appendChild(s),e.appendChild(i)},u=function(){n.remove(i),i=null,o=!1,r.length>0&&l()},c=function(e,t){d(e,t,[{text:netflix.I18n.get("ce-error-dialog-button-ok"),onClick:u}])},d=function(e,t,n){r.push({title:e,message:t,choices:n}),o||l()},p=function(){n.remove(i),i=null,r=null,e=null,o=!1,s=!1},m=function(t){s||p(),s=!0,e=t,r=[]};return{init:m,deinit:p,queueDialog:d,showGenericError:c,closeDialog:u}}(),netflix.cadmium.ui.pinentry=function(){"use strict";function e(){F=g.create("div",{"class":"pin-entry"});var e=g.create("div",{id:"pin-buttons"},F),t=g.create("div",{"class":"play-button-content"}),n=g.create("span",{},t),i=g.create("p",{},t);n.textContent="",i.textContent=k.get("ce-pin-play"),K=new E.ui.PIN(F),Y=new E.ui.Button(e,{"class":"pin-play-button disabled",contentsEl:t}),q=new E.ui.Button(e,{"class":"pin-cancel-button",contentsEl:document.createTextNode(k.get("ce-pin-cancel"))}),J=[K,Y,q],G=g.create("h2",{"class":"pin-title"},F),G.textContent=k.get("ce-enter-pin"),X=g.create("p",{"class":"pin-forgot"},F),X.textContent=k.get("ce-forgot-pin"),Q=document.querySelector(".player-progress-loading")}function t(){var e;F=L({"class":"pin-entry"},A({},k.get("ce-adult-verification-message")),e=L({id:"pin-buttons"}));var t=new E.ui.Button(e,{"class":"pin-play-button",contentsEl:document.createTextNode(k.get("ce-verify-age"))}),n=new E.ui.Button(e,{"class":"pin-cancel-button",contentsEl:document.createTextNode(k.get("ce-pin-cancel"))});z.appendChild(F),y.fromEvent(t,"click").take(1).doAction(function(){window.location.replace(C)}).subscribe(),y.fromEvent(n,"click").take(1).doAction(function(){netflix.cadmium.ui.master.goBackToBrowsing(),v()}).subscribe(),requestAnimationFrame(function(){W&&F.classList.add(M)}),Q=document.querySelector(".player-progress-loading"),Q&&Q.classList.add(U)}function n(){var e=function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){}return{valid:e.success}},t=function(e){return 401===e.status?y["return"](e.responseText||{success:!1}):y["throw"](e)},n=function(e){return y["return"]({error:e.status})},s=function(){return Y.enabled},a=function(){Y.enabled=!1},u=y.fromEvent(q,"click"),d=function(){var i={withCredentials:!0,urlEncoded:!0,data:{pin:c()}};return b.post(P,i).takeUntil($).takeUntil(u).timeout(O)["catch"](t).retryWithBackoff(S,N).map(e)["catch"](n)};u.takeUntil($).take(1).doAction(o).subscribe(T,i,T),y.fromEvent(Y,"click").takeUntil($).filter(s).doAction(a).flatMap(d).doAction(r).subscribe(T,i,T),y.fromEvent(X,"click").takeUntil($).doAction(l).subscribe(T,i,T),y.fromEvent(K,"complete").takeUntil($).doAction(function(){Y.enabled=!0,Y.focus(),K.blur()}).subscribe(T,i,T),y.fromEvent(K,"input").takeUntil($).doAction(function(){Y.enabled=!1}).subscribe(T,i,T)}function i(e){w.log("subview.pin.entry",e&&e.stack||e)}function r(e){e=e||{},e.valid===!0?d():e.valid===!1?(a(k.get("ce-invalid-pin")),u(),K.clear().focus()):(a(k.get("ce-pin-network-error")),Y.enabled=!0)}function o(){p()}function s(e){var t=e.data||{};"pinReset"===t.state&&"success"===t.status&&d()}function a(e){G.innerHTML=e}function l(){var e="";try{e=netflix.constants.page.xsrf}catch(t){}Z=_.open({url:I+"?authurl="+e,name:V,features:j}),Z.doAction(s).subscribe(T,i,T)}function u(){y.fromEvent(F,"webkitAnimationEnd").merge(y.fromEvent(F,"animationend")).take(1).doAction(function(){F.classList.remove(B)}).subscribe(T,i,T),F.classList.add(B)}function c(){return K.getValue()}function d(){ee.onNext(R)}function p(){ee.onNext(D)}function m(e,t){return f(e),ee.flatMap(function(e){return h().map(function(){return{pinStatus:e}}).doAction(function(){t&&v()})})}function h(){return F.classList.remove(M),F.classList.add(H),Rx.Observable.fromEvent(F,"transitionend").take(1).map(function(){return te})}function f(i){W&&v(),W=!0,E=netflix.cadmium,g=E.element,_=E.popup,b=E.xhr,y=Rx.Observable,x=E.objects,k=netflix.I18n,w=E.logging,T=E.util.NOOP,L=E.dom.DIV,A=E.dom.H2,$=new Rx.Subject,ee=new Rx.Subject,z=i;var r=x.initParams().pinConfig||{},o=E.metadata.getActiveVideo()||{},s=!!o.requiresAdultVerification,a=!!r.isAdultVerified,l=!!r.adultVerificationEnabled;return C=r.adultVerificationURL||"/verifypin",s&&l&&!a?void t():(netflix.cadmium&&netflix.cadmium.ui&&netflix.cadmium.ui.master&&netflix.cadmium.ui.master.isAkira()?(P=r.pinApiEndpoint||"https://"+location.hostname+"/api/desktop/pin/service",I=r.resetURL||"https://"+location.hostname+"/player/pinreset"):(P=r.pinApiEndpoint||"https://api.netflix.com/desktop/pin/service",I=r.resetURL||"/player/pinreset"),e(),n(),z.appendChild(F),K.focus(),requestAnimationFrame(function(){W&&F.classList.add(M)}),Q&&Q.classList.add(U),te)}function v(){W&&(Q&&Q.classList.remove(U),$.onNext(),J&&J.forEach(function(e){e&&e.destroy()}),g.remove(F),W=!1,z=null,F=null,G=null,Y=null,q=null,K=null,X=null,Q=null,J=null,$=null,ee=null,E=null,g=null,_=null,b=null,y=null,x=null,k=null,w=null,T=null)}var E,g,_,b,y,x,k,w,T,L,A,P,I,C,O=1e4,S=4,N=1e3,R="valid",D="canceled",M=netflix.cadmium.element.classNames.visible,H=netflix.cadmium.element.classNames.hidden,U="pin-active",B="shake",V="nf-pin-reset-popup",j={menubar:!1,resizable:!1,location:!0,width:400,height:300,scrollBars:!1,chrome:!0,centered:!0},W=!1,z=null,F=null,G=null,Y=null,q=null,K=null,X=null,Q=null,J=null,Z=null,$=null,ee=null,te={init:f,deinit:v,show:m,hide:h,VALID:R,CANCELED:D};return te}(),netflix.cadmium.ui.dontShare=function(){"use strict";function e(){return null===E&&(E=p({"class":["player-control-button","player-dont-share icon-player-dont-share",f].join(" ")})),E}function t(){var e=s.getMetadata(),t=e&&e.video&&e.video.social&&e.video.social.facebook&&e.video.social.facebook.do_not_share&&e.video.social.facebook.do_not_share.enabled,n=h.get("ce-dontshare-prompt"),i=n&&n.indexOf("MISSINGRESOURCE")<0,r=u.initParams().incognitoConfig;!t||!i||r&&r.enabled?E.classList.add(f):(E.classList.remove(f),g=new o.ui.DontShareMenuComponent(E,E,{id:"player-menu-dont-share"}),g.showTickler(_))}function n(){v&&(v=!1,null!==g&&g.destroy(),g=null,l.removeEventListener(l.knownEvents.METADATA_LOADED,t),a.remove(E),E=null),o=r=s=h=a=l=u=c=f=d=p=m=null}function i(i){return v&&n(),v=!0,r=i,o=netflix.cadmium,s=o.metadata,a=o.element,l=o.UiEvents,u=o.objects,c=o.clips,f=a.classNames.hidden,h=netflix.I18n,d=o.dom,p=d.get("DIV"),m=d.get("SPAN"),r.appendChild(e()),l.addEventListener(l.knownEvents.METADATA_LOADED,t),t(),E}var r,o,s,a,l,u,c,d,p,m,h,f,v=!1,E=null,g=null,_=2e3;return{init:i,deinit:n}}(),function(){"use strict";function e(){!v&&f&&(v=!0,l.fireEvent(l.knownEvents.CINEMA_MODE_EXIT),c.deinit(),s.queueDialog(netflix.I18n.get("ce-head-internet_connection_problem"),netflix.I18n.get("ce-text-internet_connection_problem"),[{text:netflix.I18n.get("ce-error-dialog-button-ok"),onClick:function(){t(),h.onNext("closed")}}]))}function t(){f&&v&&(s.closeDialog(),c.init(),v=!1)}function n(){var n=a.fromEvent(d,"busychanged").throttle(100).map(function(){return d&&d.getBusy()}),i=n.filter(function(e){return e&&e.progress>=0&&!e.networkStalled}).map(function(e){return e&&e.progress}).distinctUntilChanged(),r=n.filter(function(e){return e&&e.networkStalled}).map(function(e){return e&&e.networkStalled}).distinctUntilChanged(),o=a.fromEvent(d,"currenttimechanged").sample(300).distinctUntilChanged().take(3).takeLast(),s=a.merge(o,i,n.filter(function(e){return!e}));r.takeUntil(m).flatMap(function(){return a.merge(a["return"](),h).takeUntil(s).delay(E).doAction(e)}).subscribe(p,u.getErrorHandler("progressStalled"),p),s.takeUntil(m).doAction(t).subscribe(p,u.getErrorHandler("hideErrorDialog"),p)}function i(){f&&r(),f=!0,o=netflix&&netflix.cadmium||{},u=o.Logger&&o.Logger.create("view.network.error"),s=o.ui&&o.ui.popup,a=Rx.Observable,l=o.UiEvents,d=o.objects&&o.objects.videoPlayer&&o.objects.videoPlayer(),p=o.util&&o.util.NOOP,c=o.cinemamode,m=new Rx.Subject,h=new Rx.Subject,n()}function r(){f&&(f=!1,m&&m.onNext(),m=null,o=null,s=null,a=null,d=null,v=!1,p=null,l=null,c=null,h=null)}var o,s,a,l,u,c,d,p,m,h,f=!1,v=!1,E=3e3;netflix.cadmium.ui.NetworkError={init:i,deinit:r}}(),netflix.cadmium.ui.reportProblem=function(){function e(){return a({"class":"player-control-button player-report-problem"},a({"class":"border"},"?"))}function t(){p&&(p=!1,m&&m.destroy(),m=null,i=null,r=null,c=null,u=null,o=null,d.onNext())}function n(n){return p&&t(),r=netflix.cadmium,o=r.fullscreen,f()?(p=!0,i=n,s=r.dom,a=s.get("div"),l=s.get("span"),u=e(),d=new Rx.Subject,Rx.Observable.fromEvent(u,"click").takeUntil(d).doAction(h).subscribe(),m=new r.ui.ReportProblemMenuComponent(u,u,{id:"player-menu-report-problem"}),i.appendChild(u),u):void 0}var i,r,o,s,a,l,u,c,d,p=!1,m=null,h=function(){o.isFullscreen()&&o.exit(),r.objects.videoPlayer().pause(),r.cinemamode.disableCinemaMode(),r.keyboard.disableShortcut(),r.ui.reportProblemPopup.showPopup()},f=function(){var e=r.objects.initParams();return e&&e.reportProblemEnabled?!0:!1};return{init:n,deinit:t,showPopup:h}}(),netflix.cadmium.ui.reportProblemPopup=function(){"use strict";var e,t,n,i,r,o,s,a,l,u,c,d,p,m,h,f,v,E,g,_,b,y,x,k,w,T="reportproblem",L=null,A=null,P=!1,I=!1,C=!1,O=function(){I&&(n.remove(A),e=null,t=null,n=null,i=null,r=null,o=null,s=null,a=null,l=null,u=null,c=null,d=null,p=null,m=null,h=null,f=null,v=null,E=null,g=null,L=null,A=null,_=null,P=!1,I=!1)},S=function(){L=null,x.onNext(),e.cinemamode.enableCinemaMode(),e.keyboard.enableShortcut(),A.classList.add("hidden"),setTimeout(function(){_.removeChild(A)},350)},N=function(e){var n,i,o,s,a;e.connection&&(a=r.get("ce-report-buffering-confirmation-subtext"),i=f({"class":"report-problem-subtitle"},r.get("ce-report-buffering-confirmation-subtext")),o=c({"class":"report-problem-help-center-link",target:"_blank",href:"https://help.netflix.com/help"},r.get("ce-report-buffering-confirmation-link"))),n=h({"class":"report-problem-title"},r.get("ce-report-confirmation-title")),s=u({"class":"report-problem-confirmation-container opacity-transparent"},n,i,u({"class":"report-problem-confirmation-button-row"},p({"class":"report-problem-button report-problem-finish"},r.get("ce-report-confirmation-finish")),o)),L.appendChild(s),requestAnimationFrame(function(){t.fadeOut(b),t.fadeIn(s)})},R=function(e){var n=u({"class":"report-problem-confirmation-container opacity-transparent"},f({"class":"report-problem-subtitle"},r.get("ce-social-error")),u({"class":"report-problem-confirmation-button-row"},p({"class":"report-problem-button report-problem-finish"},r.get("ce-report-confirmation-finish"))));L.appendChild(n),requestAnimationFrame(function(){t.fadeOut(b),t.fadeIn(n)});var i=netflix.clientNotifications;if(i){var o={category:"uiQOE",modalView:"reportProblem",data:e};i.notify("reportProblemError",o),i.flushBuffer&&i.flushBuffer()}},D=function(){var e;e=netflix.cadmium&&netflix.cadmium.ui&&netflix.cadmium.ui.master&&netflix.cadmium.ui.master.isAkira()?o.getSecureApiPath()+T:o.getSecureApiPath()+"desktop/playback/"+T,"test"===netflix.cadmium.objects.initParams().environment&&(e+="?revision=latest");for(var n=document.getElementsByClassName("checkbox selected"),i={movieID:netflix.cadmium.objects.videoId(),authURL:netflix.constants.page.xsrf},r=0;r<n.length;r++){var a=n[r].getAttribute("data-category");i[a]="true"}var c=document.getElementsByClassName("report-problem-details-text")[0].value;c.length>0&&(i.comments=c),i.isPlayer="true",i.contentTime=g.getCurrentTime();var d={withCredentials:!0,data:i},p=document.getElementsByClassName("report-problem-dialog-container",L)[0];t.fadeOut(p),b=u({"class":"loading display-none opacity-transparent"}),L.appendChild(b),t.fadeIn(b),s.post(e,d).takeUntil(x).doAction(function(){N(i)},function(){R(i)},k).subscribe(k,l.getErrorHandler("submit post request"))},M=function(e){var t=e.getElementsByClassName("checkbox")[0];if(t.classList.toggle("selected"),t.classList.contains("selected")){if(t.appendChild(u({"class":"icon-player-checked"})),y.classList.remove("hidden"),!C){var n=10,i=0,r=setInterval(function(){++i<n?y.scrollIntoView():clearInterval(r)},30);C=!0}}else{t.innerHTML="";var o=document.getElementsByClassName("checkbox selected");0==o.length&&y.classList.add("hidden")}},H=function(e){for(var t=e.target;!t.classList.contains("report-problem-popup-bg");){if(t.classList.contains("checkbox-row-container")){M(t);break}if(t.classList.contains("report-problem-close")||t.classList.contains("report-problem-finish")){S();break}if(t.classList.contains("report-problem-submit")){D();break}t=t.parentNode}e.stopPropagation()},U=function(e){e.stopPropagation()},B=function(e){return u({"class":"checkbox-row-container"},u({"class":"checkbox","data-category":e.category}),u({"class":"text-container"},h({"class":"title-text"},e.text),f({"class":"subtext-text"},e.subtext)))},V=function(){A=u({"class":"report-problem-popup-bg hidden"},L=u({"class":"report-problem-popup"},u({"class":"report-problem-close"},d({"class":"icon-player-thin-cancel"})),u({"class":"report-problem-dialog-container"},m({"class":"report-problem-title"},r.get("ce-report-problem-title")),h({"class":"report-problem-subtitle"},r.get("ce-report-problem-subtext")),u({"class":"report-problem-rows-container"},w.map(B)),y=u({"class":"report-problem-details-container hidden"},u({"class":"report-problem-details-title-container"},d({"class":"report-problem-details-title"},r.get("ce-report-problem-details-text")),d({"class":"report-problem-details-subtext"},"("+r.get("ce-report-problem-details-optional")+")")),v({"class":"report-problem-details-text",rows:5,cols:30}),p({"class":"report-problem-button report-problem-submit"},r.get("ce-report-problem-submit")))))),x=new Rx.Subject,Rx.Observable.fromEvent(A,"click").takeUntil(x).doAction(H).subscribe(k,l.getErrorHandler("clickhandler")),Rx.Observable.fromEvent(A,"dblclick").takeUntil(x).doAction(U).subscribe(k,l.getErrorHandler("dblclick handler"),k),_.appendChild(A),setTimeout(function(){A.classList.remove("hidden")},30)},j=function(b){I&&O(),I=!0,_=b,e=netflix.cadmium,t=e.animate,n=e.element,i=e.util,r=netflix.I18n,o=e.url,s=e.xhr,a=e.dom,l=e.Logger.create("reportProblem.popup"),u=a.DIV,c=a.A,d=a.SPAN,p=a.BUTTON,m=a.H1,h=a.H2,f=a.H3,v=a.get("textarea"),k=i.NOOP,E=e.objects,g=E.videoPlayer(),w=[{text:r.get("ce-report-problem-label-problem-title"),subtext:r.get("ce-report-problem-label-problem-subtext"),category:"mislabel"},{text:r.get("ce-report-problem-video-problem-title"),subtext:r.get("ce-report-problem-video-problem-subtext"),category:"video"},{text:r.get("ce-report-problem-sound-problem-title"),subtext:r.get("ce-report-problem-sound-problem-subtext"),category:"sound"},{text:r.get("ce-report-problem-subtitle-problem-title"),subtext:r.get("ce-report-problem-subtitle-problem-subtext"),category:"subtitle"},{text:r.get("ce-report-problem-buffering-problem-title"),subtext:r.get("ce-report-problem-buffering-problem-subtext"),category:"connection"}]};return{init:j,deinit:O,showPopup:V}}(),netflix.cadmium.ui.controlDivider=function(){function e(){n=i=r=null}function t(e){return n=netflix.cadmium,i=n.dom,r=i.get("div"),o=r({"class":"player-control-divider"}),e.appendChild(o),o}var n,i,r,o;return{init:t,deinit:e}}(),netflix.cadmium.ui.playback=function(){"use strict";function e(){return null===C&&(C=_.create("div",{"class":["player-controls-wrapper",A,"no-select"].join(" ")})),C.innerHTML="<section class='player-slider' role='slider'></section><section class='player-control-bar no-select' role='control-bar'></section>",C}function t(){S.update(100)}function n(e){S.update((100*e).toFixed(0))}function i(e){p||(p=_.create("div",{id:"fademask"},document.body)),T.fromEvent(p,"transitionend").take(1).takeUntil(L).doAction(function(){_.remove(p),p=null}).subscribe(P,k.getErrorHandler("fadeEl|transitionend"),P),T.timer(e).doAction(function(){d.classList.remove(_.classNames.hidden),p.style.opacity=0}).subscribe(P,k.getErrorHandler("timer|hidden"),P)}function r(){o()}function o(e){if(I){var t=w.ui&&w.ui.timedText&&w.ui.timedText.setBounds&&w.ui.timedText.setBounds.bind(w.ui.timedText)||P;if(void 0!==e&&null!==e)return void t({bottom:e});var n=document.querySelector(".player-controls-wrapper"),i=n&&n.classList.contains("display-none");if(n&&i===!1){var r=x.playerWrapper(),o=r&&r.getBoundingClientRect().height,s=n.getBoundingClientRect().top,a=Math.floor(o-s);!isNaN(a)&&w?t({bottom:a}):k.log("view.playback: could not set timed text bounds.")}else t({bottom:0})}}function s(){var e=T.fromEvent(y,y.knownEvents.CINEMA_MODE_ENTER),i=T.fromEvent(y,y.knownEvents.CINEMA_MODE_EXIT),s=T.fromEvent(w,"busychanged").throttle(100).map(function(){return w&&w.getBusy()});s.takeUntil(L).filter(function(e){return e&&e.progress>=0&&!e.networkStalled}).map(function(e){return e&&e.progress}).distinctUntilChanged().doAction(n).subscribe(P,k.getErrorHandler("VideoPlayer|progressChanged"),P),s.takeUntil(L).filter(function(e){return!e}).doAction(t).subscribe(P,k.getErrorHandler("VideoPlayer|progressCompleted"),P),T.fromEvent(y,y.knownEvents.SHOW_AUTOPLAY_INTERRUPTER).merge(e).takeUntil(L).doAction(U).subscribe(P,k.getErrorHandler("UiEvents|autoplay_interrupt"),P),T.fromEvent(y,y.knownEvents.HIDE_AUTOPLAY_INTERRUPTER).merge(i).takeUntil(L).doAction(H).subscribe(P,k.getErrorHandler("UiEvents|hide_interrupt"),P),T.fromEvent(y,y.knownEvents.WINDOW_RESIZE).takeUntil(L).doAction(r).subscribe(P,k.getErrorHandler("UiEvents|window_resize"),P),T.fromEvent(d,"transitionend").merge(T.fromEvent(d,"webkitTransitionEnd")).merge(T.fromEvent(d,"msTransitionEnd")).filter(function(e){return"width"===e.propertyName}).takeUntil(T.fromEvent(y,y.knownEvents.VIDEO_FIRST_PLAY)).doAction(r).subscribe(P,k.getErrorHandler("UiEvents|first_play"),P),Rx.Observable.fromEvent(w,"timedtexttrackchanged").takeUntil(L).doAction(o.bind(null,null)).subscribe(P,k.getErrorHandler("timedtexttrackchanged"),P),e.takeUntil(L).delay(D).doAction(o.bind(null,0)).subscribe(P,k.getErrorHandler("cinemaModeEnter"),P),r(),E.MutationUtils.observeAndRemoveUnsafeNodes(m,v).takeUntil(L).subscribe(P,k.getErrorHandler("mutationObserver"),P)}function a(){I&&(k.log("deinit"),clearTimeout(N),c.classList.remove(M),c.style.cursor="auto",I=!1,L.onNext(),S.destroy(),f.forEach(function(e){e.deinit()}),netflix.cadmium.cinemamode.deinit(),_.remove(C),p&&_.remove(p),u=null,C=null,c=null,d=null,p=null,m=null,h=null,f=null,v=null,O=null,S=null,N=null,E=null,g=null,_=null,b=null,y=null,x=null,k=null,w=null,T=null,L=null,A=null,R=null,P=null)}function l(t){I&&a(),I=!0,u=t,E=netflix.cadmium,b=E.metadata,y=E.UiEvents,_=E.element,x=E.objects,g=E.ui,k=E.Logger.create("view.playback"),T=Rx.Observable,P=E.util.NOOP,A=_.classNames.active,R="webkit"===E.browser.prefix().lowercase,k.log("init",{masterView:!!t,initialized:I}),O=[],L=new Rx.Subject,w=x.videoPlayer(),c=x.playerWrapper(),S=new E.ui.RadialProgressComponent(u,{hideWhenEmpty:!0,hideWhenFull:!0,id:"player-playback-buffering"}),e(),O.push(C),d=document.getElementsByClassName("player-video-wrapper")[0],g.preplay.preplayNeeded()?(d.appendChild(C),i(500)):(u.appendChild(C),d.classList.remove(_.classNames.hidden)),m=C.getElementsByClassName("player-control-bar")[0],h=C.getElementsByClassName("player-slider")[0],E.cinemamode.init(),v=[],f=[g.pauser,g.volume,g.status,g.incognito,g.nextEpisode,g.episodeSelector,g.mdx,g.controlDivider,g.audio,g.dontShare,g.fullscreen,g.reportProblem],f.forEach(function(e){try{v.push(e.init(m))}catch(t){k.error(t)}}),f.push(g.exitPlayback),g.exitPlayback.init(t),O.push(g.exitPlayback.getBackToBrowsingEl()),f.push(g.autoplayInterrupter),g.autoplayInterrupter.init(t),f.push(g.preplay),g.preplay.init(t),f.push(g.popup),g.popup.init(t),f.push(g.reportProblemPopup),g.reportProblemPopup.init(t),f.push(g.scrubber),g.scrubber.init(h),f.push(g.longpause),g.longpause.init(t),f.push(g.NetworkError),g.NetworkError.init(),E.cinemamode.addExclusionEls(O),s()}var u,c,d,p,m,h,f,v,E,g,_,b,y,x,k,w,T,L,A,P,I=!1,C=null,O=[],S=null,N=null,R=!1,D=100,M="player-cinema-mode",H=function(){c.classList.remove(M),netflix.cadmium.animate.fadeIn(C),requestAnimationFrame(o.bind(null,null))},U=function(){c.classList.add(M),netflix.cadmium.animate.fadeOut(C)};return{init:l,deinit:a}}(),netflix.cadmium.views.register(netflix.cadmium.ui.playback,netflix.cadmium.views.types.standard),
function(){"use strict";var e=netflix.cadmium,t=e.objects,n=e.UiEvents,i=e.PostPlayData,r=e.element,o=e.dom.get("DIV"),s=e.Class,a=e.UITracking,l=Rx.Observable,u=e.util.NOOP,c=e.Logger.create("subview.postplay.base"),d=e.url,p=2e3,m="postplay",h=2e3,f=s.extend({_initialized:!1,_disposed:null,_metadata:null,_rootEl:null,_playerWrapperEl:null,_videoPlayer:null,_components:null,_uiTrackingEnabled:!1,_videoCloseDelayTime:p,init:function(e,n){this._initialized||(this._initialized=!0,this._disposed=new Rx.Subject,this._parentEl=e,this._metadata=n,this._rootEl=o({"class":"player-postplay"}),this._videoPlayer=t.videoPlayer(),this._components=[],this._playerWrapperEl=e.querySelector(".player-video-wrapper"),this._uiTrackingEnabled=!!(t&&t.initParams()&&t.initParams().uiTrackingEnabled),c.log("init",n),this._createElements(),this._createEventSubscriptions())},destroy:function(){this._initialized&&(c.log("destroy"),a.deinit(),this._parentEl&&this._parentEl.classList.remove("video-ended"),this._disposed.onNext(),this._components.forEach(function(e){e&&(e.destroy&&e.destroy(),e.deinit&&e.deinit())}),r.remove(this._rootEl),this._disposed=null,this._parentEl=null,this._metadata=null,this._rootEl=null,this._playerWrapperEl=null,this._videoPlayer=null,this._components=null,this._initialized=!1)},show:function(){return this._parentEl.contains(this._rootEl)||this._parentEl.appendChild(this._rootEl),this._uiTrackingEnabled&&setTimeout(function(){c.log("start tracking UI."),this._trackUI()}.bind(this),h),this},hide:function(){},fallback:function(){c.error("Postplay unavailable. Metadata:",this._metadata)},_createElements:function(){},_addComponent:function(e){return this._components.push(e),e},_createEventSubscriptions:function(){var e=l.fromEvent(n,n.knownEvents.VIDEO_ENDED);l.fromEvent(this._videoPlayer.getElement(),"click").takeUntil(this._disposed).takeUntil(e).doAction(this._returnToPlayback.bind(this)).subscribe(u,c.getErrorHandler("video click"),u),e.takeUntil(this._disposed).delay(this._videoCloseDelayTime).doAction(function(){this._parentEl&&this._parentEl.classList.add("video-ended"),this._rootEl&&this._rootEl.classList.add("video-ended")}.bind(this)).flatMap(function(){return this._parentEl?l.fromEvent(this._parentEl,"transitionend").takeUntil(this._disposed).merge(l.timer(2e3).doAction(function(){c.log("transitionend did not fire for postplay parent.")})).take(1):l.empty()}.bind(this)).doAction(this._closeVideoPlayer.bind(this)).subscribe(u,c.getErrorHandler("video ended"),u)},_returnToPlayback:function(){e.views.show(e.ui.playback,[this._parentEl])},_closeVideoPlayer:function(){c.log("closing video player"),this._videoPlayer&&this._videoPlayer.close()},_startPlayback:function(n){c.log("Requesting playback with uicontext",n),n=n||{row:0,rank:-99,request_id:i.getRequestId(),location:m},e.ui.master.updateInitParams(t.initParams(),n)},_trackUI:function(){var e=t.initParams()||{};a.init({requestId:i.getRequestId(),location:m,enabled:this._uiTrackingEnabled,maxRecords:e.uiTrackingMaxRecords,localStorageKey:e.uiTrackinglocalStorageKey,endpoint:e.uiTrackingEndpoint,debug:d.urlContains(/ptdebug=true/)}),a.scan()},_getUiContextForEl:function(e){return e?(e=e.hasAttribute(a.TRACKING_ATTRIBUTE)?e:e.querySelector("["+a.TRACKING_ATTRIBUTE+"]"),a.getTrackingContext(e)):null},_setUiContextForEl:function(e,t){return this._uiTrackingEnabled&&a.trackElement(e,t),t},_navToMoreInfo:function(){var e=this._metadata.experience.moreInfoLink;c.info("Navigate to info:"+e),window.location.replace(e)}});f.create=function(e,t){return new f(e,t)},e.ui.PostPlayBase=f}(),function(){"use strict";var e,t=netflix.cadmium,n=t.ui,i=(t.metadata,t.url),r=t.dom,o=r.DIV,s=r.H1,a=n.PostPlayBase,l=n.PostPlayBackground,u=n.PostPlayActionButtons,c=t.util.NOOP,d=t.Logger.create("subview.postplay.character"),p=a.extend({init:function(t,n){e=netflix.I18n,this._super(t,n),this._sims.highlightSimAtIndex(0,!0),this._autoPlayTimer&&this._autoPlayTimer.start(function(){this._playSim(this._sims.getAt(0).getData())}.bind(this))},_createElements:function(){this._super();var e,n,i=this._metadata.list;this._background=this._addComponent(l.create(this._rootEl)),this._rootEl.appendChild(o({"class":"player-postplay-background-gradient-left"})),this._footerEl=o({"class":"player-postplay-footer player-postplay-character-test"},e=o({"class":"player-postplay-character-test-logo-container"}),n=o({"class":"right-panel"},this._stillContainerEl=o({"class":"player-postplay-character-stills-container"}))),e.style.cssText="background-image: url("+this._metadata.logo+");",this._sims=this._addComponent(t.ui.PostPlaySimsCollection.create(this._stillContainerEl,i,this._boxshotTemplate.bind(this))),this._actionButtons=this._addComponent(u.createBasic(n)),this._rootEl.appendChild(this._footerEl)},_boxshotTemplate:function(n,i){n=n||{},i>0&&this._stillContainerEl.appendChild(o({"class":"postplay-character-still-gap"}));var r,a,l=n.annotatedTitle||n.title||"",u=n.autoplay&&0===i,c=n.boxart,d=o({"class":"player-postplay-character-still","data-id":n.id},r=s({"class":"player-postplay-character-still-scene-header"}),a=o({"class":"player-postplay-character-still-art"},o({"class":"player-postplay-character-still-hover"})));return this._setUiContextForEl(a,{video_id:n.id,track_id:n.trackId,row:0,rank:i,location:"postplay",request_id:t.PostPlayData.getRequestId()}),c?a.style.cssText="background-image: url("+c+");":a.style.cssText="background: #ccc;",u?this._autoPlayTimer=t.ui.PostPlayTimer.create(r,{pluralTemplate:function(t){return e.getWithParams("ce-post-autoplay-character-test",["TITLE","SECONDS"],[l,t])},singularTemplate:function(){return e.getWithParams("ce-post-autoplay-character-test-singular",["TITLE"],[l])},stoppedTemplate:function(){return l}}):r.innerHTML=l,d},_createEventSubscriptions:function(){this._super(),this._sims.onHighlight().takeUntil(this._disposed).doAction(function(e){var t=e&&e.getData&&e.getData()||{};this._autoPlayTimer&&this._autoPlayTimer.stop(),this._background.source=t.background}.bind(this)).subscribe(c,d.getErrorHandler("Sims highlight error."),c),this._sims.onClick().takeUntil(this._disposed).doAction(this._playSim.bind(this)).subscribe(c,d.getErrorHandler("Sims click error."),c)},_playSim:function(e){d.log("play next video",e.id),i.setNextVideo(i.CONSTANTS.EPISODE_ID,e.id,e.trackId),this._startPlayback(this._getUiContextForEl(e.el))}});p.create=function(e,t){return new p(e,t)},t.ui.PostPlayCharacterVideos=p}(),function(){"use strict";var e,t=netflix.cadmium,n=t.ui,i=t.url,r=t.UiEvents,o=t.dom,s=o.get("DIV"),a=o.get("SECTION"),l=o.get("H1"),u=o.get("H2"),c=o.get("P"),d=o.get("IMG"),p=t.time,m=Rx.Observable,h=n.PostPlayBase,f=n.PostPlayBackground,v=n.PostPlayActionButtons,E=t.util.NOOP,g=t.Logger.create("subview.postplay.continue"),_=h.extend({init:function(){e=netflix.I18n,this._onSelectEpisode=this._onSelectEpisode.bind(this),this._super.apply(this,arguments),this._autoPlayTimer&&this._autoPlayTimer.start(function(){r.fireEvent(r.knownEvents.AUTOPLAY_NEXT_EPISODE,[this._nextEpisode&&this._nextEpisode.id]),this._playNextEpisode(!0)}.bind(this))},_createElements:function(){this._super();var n,i,r=this._nextEpisode=this._metadata.list,o="ce-show-member-type-"+(r.memberType||"season"),m=e.getWithParams(o,["SEQ"],[r.seasonNumber])+" "+netflix.I18n.get("ce-episode-abbreviation")+" "+r.episodeNumber+"  "+r.title,h=r.duration&&r.duration.value,E=r.year+" "+(r.rating?r.rating:"")+(h?" "+p.convertUsingKey(h,!1,!0,"ce-time"):""),g=r.boxart,_="https://assets.nflxext.com/en_us/buttons/play-button-114.png",b=this._metadata.list;this._background=r.background&&this._addComponent(f.createFromUrl(this._rootEl,r.background)),this._footerEl=s({"class":"player-postplay-footer"},a({"class":"player-postplay-show-metadata"},s({"class":"postplay-metadata-container"},l({"class":"player-postplay-show-title"},document.createTextNode(r.showTitle)),u({"class":"player-postplay-episode-title"},document.createTextNode(m)),c({"class":"player-postplay-episode-metadata"},document.createTextNode(E)),c({"class":"player-postplay-episode-synopsis"},document.createTextNode(r.synopsis)))),n=a({"class":"player-postplay-show-autoplay"},this._stillEl=s({"class":"postplay-still-container"},i=l({"class":"player-postplay-autoplay-header"}),d({"class":"player-postplay-autoplay-still",src:g}),s({"class":"player-postplay-still-hover-container"},d({"class":"player-postplay-still-hover",src:_}))))),r.autoplay?this._autoPlayTimer=this._addComponent(t.ui.PostPlayTimer.create(i)):i.appendChild(document.createTextNode(e.get("ce-post-no-autoplay"))),this._actionButtons=this._addComponent(v.createBasic(n,"action-buttons episodic-action-buttons"));var y=s({"class":"more-episodes-container"});this._moreEpisodesMenu=new t.ui.EpisodeSelectorMenuComponent(y,y,{id:"player-menu-episode-selector",showEvent:"click"}),this._actionButtons.addButton({id:"meBtn",contentsEl:document.createTextNode(e.get("ce-post-more-episodes")),"class":"more-episodes",events:["click"]},y),this._actionButtons._rootEl.appendChild(y),this._playContext=this._setUiContextForEl(this._stillEl,{video_id:b.id,track_id:b.trackId,row:0,rank:0,location:"postplay",request_id:t.PostPlayData.getRequestId()}),this._rootEl.appendChild(this._footerEl)},_createEventSubscriptions:function(){this._super(),m.fromEvent(this._stillEl,"click").takeUntil(this._disposed).doAction(this._playNextEpisode.bind(this,!1)).subscribe(E,g.getErrorHandler("still click"),E),m.fromEvent(this._moreEpisodesMenu,this._moreEpisodesMenu.CHANGE_VIDEO_EVENT).takeUntil(this._disposed).doAction(this._onSelectEpisode).subscribe(E,g.getErrorHandler("episode selector handler"),E),this._actionButtons.onAction().takeUntil(this._disposed).doAction(function(){this._autoPlayTimer&&this._autoPlayTimer.stop()}.bind(this)).subscribe(E,g.getErrorHandler("action button handler"),E)},_onSelectEpisode:function(e){i.setNextVideo(i.CONSTANTS.EPISODE_ID,e.videoId,null),this._startPlayback()},_playNextEpisode:function(e){g.log("play next episode",this._nextEpisode.id),i.setNextVideo(i.CONSTANTS.EPISODE_ID,this._nextEpisode.id,this._nextEpisode.trackId);var n=1e3*this._nextEpisode.offsetStart;n>=0&&t.objects.overrideBookmark(this._nextEpisode.id,e?n:0),this._startPlayback(this._playContext)},_returnToPlayback:function(){this._autoPlayTimer&&this._autoPlayTimer.stop(),this._super()}});_.create=function(e,t){return new _(e,t)},t.ui.PostPlayContinueWatching=_}(),function(){"use strict";var e,t=netflix.cadmium,n=t.ui,i=t.element,r=t.dom.DIV,o=n.PostPlayBase,s=n.PostPlayBackground,a=n.PostPlayActionButtons,l=n.PostPlaySimsCollection,u=n.PostPlayHorizontal,c=t.objects,d=t.url,p=t.util.NOOP,m=t.Logger.create("subview.postplay.sims"),h=o.extend({init:function(){e=netflix.I18n,this._super.apply(this,arguments),this._sims.highlightSimAtIndex(0)},_createElements:function(){this._super(),this._createSections(),this._background=this._addComponent(s.create(this._rootEl)),this._actionButtons=this._addComponent(a.createBasic(this._leftSection)),this._sims=this._addComponent(l.create(this._rightSection,this._getSims(),this._boxshotTemplate.bind(this))),this._horizontal=this._addComponent(u.create(this._rootEl,this._metadata.experience||{}))},_createSections:function(){e=e||netflix.I18n,this._leftSection=i.create("section",{"class":"player-postplay-recommend-text"},this._rootEl),this._rightSection=i.create("div",{"class":"player-postplay-recommendations"},this._rootEl);var t=i.create("h1",{"class":"player-postplay-recommend-header"},this._leftSection),n=i.create("h2",{"class":"player-postplay-recommend-subheader"},this._leftSection);t.appendChild(document.createTextNode(e.get("ce-post-recommend-head"))),n.appendChild(document.createTextNode(e.get("ce-post-recommend-body")))},_boxshotTemplate:function(e,n){e=e||{};var i,o=r({"class":"player-postplay-recommendation","data-id":e.id},i=r({"class":"player-postplay-recommendation-boxshot"},r({"class":"player-postplay-recommendation-hover"})));return this._setUiContextForEl(i,{video_id:e.id,track_id:e.trackId,row:0,rank:n,location:"postplay",request_id:t.PostPlayData.getRequestId()}),i.style.cssText="background-image: url("+e.boxart+");",o},_createEventSubscriptions:function(){this._super(),this._sims.onHighlight().takeUntil(this._disposed).doAction(function(e){var t=e.getData();this._background.source=t&&t.background}.bind(this)).subscribe(p,m.getErrorHandler("Sims highlight error."),p),this._sims.onClick().takeUntil(this._disposed).doAction(this._playSim.bind(this)).subscribe(p,m.getErrorHandler("Sims click error."),p)},_getSims:function(){return this._metadata&&this._metadata.list||[]},_playSim:function(e){var t=e.data||{},n="show"===t.type?t.episodeId:t.id;d.setNextVideo(d.CONSTANTS.VIDEO_ID,n,t.trackId);var i=c.initParams()||{},r=this._getUiContextForEl(e.el);i.commentarySettings&&delete i.commentarySettings,this._startPlayback(r)}});h.create=function(e,t){return new h(e,t)},t.ui.PostPlaySims=h}(),function(){"use strict";var e,t=netflix.cadmium,n=t.ui,i=t.dom.get("H2"),r=(t.element,t.dom.DIV),o=t.ui.PostPlaySims,s=(t.objects,t.url,t.util.NOOP),a=t.mixins.ui.buttons,l=t.Logger.create("subview.postplay.sims.dab"),u=n.PostPlayActionButtons,c=n.PostPlayMyList,d=o.extend({init:function(){e=netflix.I18n,l.log("init"),this._super.apply(this,arguments)},_createElements:function(){var e=this._metadata.experience;this._super(),this._dabEl=r({"class":"postplay-promo postplay-dab"},r({"class":"promo-postplay-metadata"},r({"class":"logo",style:"background-image: url("+e.horizontal+");"}),e.tagline&&i({"class":"tagline"},e.tagline))),this._actionButtons=this._addComponent(u.create(this._dabEl,[a.getMyListButton(e.myList.action),a.getMoreInfoButton()])),this._rootEl.appendChild(this._dabEl),this._myList=this._addComponent(c.create(this._rootEl,{myList:e.myList,trackId:e.trackId,element:this._rootEl.querySelector(".my-list")}))},_createEventSubscriptions:function(){this._super(),this._actionButtons.onAction().takeUntil(this._disposed).doAction(function(e){switch(e.id){case a.MY_LIST_BUTTON:this._myList.toggleMyList();break;case a.MORE_INFO_BUTTON:this._navToMoreInfo()}}.bind(this)).subscribe(s,l.getErrorHandler("actionButtons|onAction"),s)}});d.create=function(e,t){return new d(e,t)},n.PostPlaySimsDAB=d}(),function(){"use strict";var e,t=netflix.cadmium,n=t.ui,i=t.mixins,r=(t.UiEvents,t.dom.DIV,t.ui.PostPlaySims,n.PostPlaySimsDAB),o=t.Logger.create("subview.postplay.sims.specialmessage"),s=r.extend({init:function(){e=netflix.I18n,o.log("init"),this._super.apply(this,arguments)},_createElements:function(){var e=this._metadata.experience;this._super(),e.specialMessageEnabled&&this.addVideoInterstitialComponent({videoId:e.trailer.id,trackId:e.trailer.trackId,title:e.trailer.title,background:e.trailer.background,autoPlayTimer:e.trailer.autoPlayTimerOverride})},_createEventSubscriptions:function(){this._super(),this.createVideoInterstitialEvents()},_returnToPlayback:function(){this._handleInterstitialReturnToPlayback(),this._super()}});s.create=function(e,t){return new s(e,t)},i.mixin(s.prototype,i.ui.videoInterstitial),n.PostPlaySimsSpecialMessage=s}(),function(){"use strict";var e,t=netflix.cadmium,n=t.ui,i=t.dom,r=i.get("DIV"),o=i.get("SPAN"),s=t.PostPlayData,a=n.PostPlayBase,l=n.PostPlayBackground,u=n.PostPlayExitFullscreen,c=n.exitPlayback,d=t.Logger.create("subview.postplay.trailer.base"),p=t.url,m=t.animate,h="play-trailer",f="play-show",v=a.extend({_metadata:null,_background:null,_exitPlaybackButton:null,_exitFullScreenButton:null,_promoUiContext:null,init:function(t,n){d.log("init"),e=netflix.I18n,this._videoCloseDelayTime=0,this._super(t,n)},destroy:function(){this._playerWrapperEl&&m.fadeIn(this._playerWrapperEl),this._super()},show:function(){this._super();var e=this._metadata&&this._metadata.experience&&this._metadata.experience.impression;return e&&s.recordImpression(e),this},_createElements:function(){this._rootEl.classList.add("trailer-merch");var e=this._metadata.experience;this._exitPlaybackButton=this._addComponent(c).init(this._parentEl),this._background=this._addComponent(l.createFromUrl(this._rootEl,e.background)),this._exitFullScreenButton=this._addComponent(u.create(this._parentEl)),c.getBackToBrowsingEl().classList.add("trailer-merch")},_playPromotedVideo:function(){var e=this._metadata.experience.promotedVideo.id;d.log("play promoted title",e),t.PostPlayData.deinit(),this._playVideo(e)},_playTrailer:function(){var e=this._metadata.experience.trailerId;d.log("play trailer",e),this._playVideo(e)},_replayTrailer:function(){d.log("Replay trailer."),this._playerWrapperEl&&m.fadeIn(this._playerWrapperEl),t.PostPlayData.repeatCurrentPostPlayData(),this._playTrailer()},_playVideo:function(e){p.setNextVideo(p.CONSTANTS.VIDEO_ID,e,this._metadata.experience.trackId),this._startPlayback(this._promoUiContext)},_setPromoUiContextForEl:function(e,n){if(this._uiTrackingEnabled){n=n||{};var i={video_id:n.trailerId,track_id:n.trackId,row:0,rank:0,location:"postplay",request_id:s.getRequestId()};this._promoUiContext=i,t.UITracking.trackElement(e,i)}}});v.create=function(e,t){return new v(e,t)},v.getPlayPromotedVideoButton=function(t){return t=t||{},{id:f,contentsEl:r({"class":"play-button-content"},o({"class":"play-button-text"},null!=t.seasonNumber?e.getWithParams("ce-post-play-promo-episode",["SEASON","EPISODE"],[t.seasonNumber,t.episodeNumber]):e.get("ce-post-play-promo-title"))),"class":"play-button",events:["click"]}},v.getPlayTrailerButton=function(t){t=t||"play-button-trailer";var n=e.get("ce-post-play-trailer"),i="play-button"===t?r({"class":"play-button-content"},o({"class":"play-button-text"},n)):document.createTextNode(n);return{id:h,contentsEl:i,"class":t,events:["click"]}},n.PostPlayTrailerBase=v}(),function(){"use strict";var e,t=netflix.cadmium,n=t.ui,i=t.dom,r=i.get("DIV"),o=i.get("IMG"),s=i.get("H1"),a=i.get("P"),l=i.get("A"),u=(i.get("SPAN"),n.PostPlayTrailerBase),c=n.PostPlayActionButtons,d=n.PostPlayHorizontal,p=n.PostPlayMyList,m=t.util.NOOP,h=t.Logger.create("subview.postplay.trailer.merch"),f=t.mixins.ui.buttons,v="play-trailer",E="play-show",g=u.extend({init:function(t,n){h.log("init"),e=netflix.I18n,this._super(t,n)},_createElements:function(){this._super();var t,n=this._metadata.experience,i=r({"class":"promo-postplay-metadata"},t=o({"class":"logo"}),s({"class":"tagline"},n.tagline||""),n.synopsis&&a({"class":"synopsis"},n.synopsis,l({"class":"more-info",href:n.moreInfoLink},e.get("ce-post-more-info"))));n.logo&&t.setAttribute("src",n.logo);var u=function(){this._setPromoUiContextForEl(t,n)}.bind(this);t.width&&u(),t.onload=u,this._horizontal=this._addComponent(d.create(this._rootEl,n)),this._rootEl.appendChild(i),this._actionButtons=this._createButtons(i),this._myList=this._addComponent(p.create(this._rootEl,{myList:n.myList,trackId:n.trackId,element:this._rootEl.querySelector(".my-list")}))},_createEventSubscriptions:function(){this._super(),this._actionButtons.onAction().takeUntil(this._disposed).doAction(function(e){switch(this._autoPlayTimer&&this._autoPlayTimer.stop(),e.id){case v:this._playTrailer();break;case E:this._playPromotedVideo();break;case f.MY_LIST_BUTTON:this._myList.toggleMyList();break;case f.MORE_INFO_BUTTON:this._navToMoreInfo()}}.bind(this)).subscribe(m,h.getErrorHandler("actionButtons|onAction"),m)},_createButtons:function(e){var t=this._metadata.experience||{},n=[u.getPlayPromotedVideoButton(t.promotedVideo),u.getPlayTrailerButton(),f.getMyListButton(t.myList.action)];return c.create(e,n)}});g.create=function(e,t){return new g(e,t)},n.PostPlayTrailerMerch=g}(),function(){"use strict";var e,t=netflix.cadmium,n=t.ui,i=t.dom,r=i.get("H1"),o=t.dom.get("H2"),s=i.get("SECTION"),a=n.PostPlayTrailerBase,l=n.PostPlayActionButtons,u=n.PostPlayTrailerMerch,c=t.Logger.create("subview.postplay.trailer.merch.post"),d=t.util.NOOP,p=Rx.Observable,m=t.mixins.ui.buttons,h=u.extend({init:function(t,n){c.log("init"),e=netflix.I18n,this._super(t,n)},_createElements:function(){this._super(),this._horizontal._rootEl.classList.remove("trailer-merch"),this._rootEl.appendChild(s({"class":"trailer-recommend-text"},r({"class":"trailer-recommend-header"},e.get("ce-post-original-promote-header")),o({"class":"trailer-recommend-subheader"},e.get("ce-post-original-promote-text"))))},_createEventSubscriptions:function(){this._super(),p.fromEvent(this._horizontal._rootEl,"click").takeUntil(this._disposed).take(1).doAction(this._replayTrailer.bind(this)).subscribe(d,c.getErrorHandler("event|click"))},_createButtons:function(e){var t=this._metadata.experience,n=[a.getPlayPromotedVideoButton(t.promotedVideo),m.getMyListButton(t.myList.action)];return l.create(e,n)}});h.create=function(e,t){return new h(e,t)},n.PostPlayTrailerMerchPost=h}(),function(){"use strict";var e,t=netflix.cadmium,n=t.ui,i=t.dom.get("H2"),r=t.objects,o=n.PostPlayTrailerBase,s=n.PostPlayActionButtons,a=n.PostPlayTimer,l=t.Logger.create("subview.postplay.trailer.promo"),u=(t.url,t.mixins.ui.buttons),c=n.PostPlayTrailerMerch.extend({init:function(t,n){l.log("init"),e=netflix.I18n,this._super(t,n);r&&r.initParams()||{};this._autoPlayTimer&&this._autoPlayTimer.start(this._playTrailer.bind(this))},_createElements:function(){this._super();var t=this._metadata.experience,n=this._rootEl.querySelector(".promo-postplay-metadata"),r=i({"class":"autoplay-timer"});n.insertBefore(r,n.lastChild),t.autoplay&&(this._autoPlayTimer=a.create(r,{maxTime:t.autoplayTime,singularTemplate:function(){return e.get("ce-post-autoplay-prepromo-trailer-singular")},pluralTemplate:function(t){return e.getWithParams("ce-post-autoplay-prepromo-trailer-plural",["SECONDS"],[t])},stoppedTemplate:function(){return null}}))},_createButtons:function(e){var t=this._metadata.experience.myList,n=[o.getPlayTrailerButton("play-button"),u.getMyListButton(t.action)];return s.create(e,n)}});c.create=function(e,t){return new c(e,t)},n.PostPlayTrailerPromo=c}(),function(){"use strict";var e=netflix.cadmium,t=e.ui,n=e.dom.get("DIV"),i=e.dom.get("H2"),r=t.PostPlayActionButtons,o=t.PostPlayBackground,s=t.PostPlaySimsCollection,a=t.PostPlayHorizontal,l=t.PostPlayTrailerMerch,u=t.PostPlaySims,c=t.PostPlayTrailerBase,d=t.PostPlayMyList,p=e.Logger.create("subview.postplay.trailer.promo.recs"),m=e.util.NOOP,h=Rx.Observable,f=e.mixins.ui.buttons,v=l.extend({init:function(e,t){p.log("init"),this._super(e,t),this._sims.highlightSimAtIndex(0)},_createElements:function(){var e,t,r,l=this._metadata.experience;c.prototype._createElements.call(this),u.prototype._createSections.call(this),this._background=this._addComponent(o.create(this._rootEl)),this._sims=this._addComponent(s.create(this._rightSection,this._getSims(),this._boxshotTemplate.bind(this))),this._promoEl=n({"class":"postplay-promo"},e=n({"class":"postplay-promo-horizontal-container"}),t=n({"class":"promo-postplay-metadata"},r=n({"class":"logo",style:"background-image: url("+l.logo+");"}),i({"class":"tagline"},l.tagline))),this._setPromoUiContextForEl(r,l),this._horizontal=this._addComponent(a.create(e,l)),this._actionButtons=this._addComponent(this._createButtons(t)),this._myList=this._addComponent(d.create(this._rootEl,{myList:l.myList,trackId:l.trackId,element:t.querySelector(".my-list")})),this._horizontal._rootEl.classList.remove("trailer-merch"),this._rootEl.appendChild(this._promoEl)},_boxshotTemplate:function(t,n){t=t||{};var i=u.prototype._boxshotTemplate.apply(this,arguments),r=i.querySelector(".player-postplay-recommendation-boxshot");return this._setUiContextForEl(r,{video_id:t.id,track_id:t.trackId,row:1,rank:n,request_id:e.PostPlayData.getRequestId(),location:"postplay"}),i},_getSims:function(){var e=this._metadata||{};return e.experience&&e.experience.recommendations||e.experience.recommendations||[]},_createEventSubscriptions:function(){this._super(),this._sims.onHighlight().takeUntil(this._disposed).doAction(function(e){var t=e.getData();this._background.source=t&&t.background}.bind(this)).subscribe(m,p.getErrorHandler("sims|onHighlight"),m),this._sims.onClick().takeUntil(this._disposed).doAction(function(t){e.PostPlayData.deinit(),u.prototype._playSim.call(this,t)}.bind(this)).subscribe(m,p.getErrorHandler("sims|onClick"),m),h.fromEvent(this._horizontal._rootEl,"click").takeUntil(this._disposed).take(1).doAction(this._replayTrailer.bind(this)).subscribe(m,p.getErrorHandler("event|click"))},_createButtons:function(e){return this._addComponent(r.create(e,[f.getMyListButton(this._metadata.experience.myList.action),f.getMoreInfoButton()]))}});v.create=function(e,t){return new v(e,t)},t.PostPlayTrailerPromoRecs=v}(),function(){"use strict";function e(e){E.log("createPostPlayExperience"),E.log("createPostPlayExperience.doAction",e.type);var n;switch(e.type){case T.WATCH_NEXT:n=a.ui.PostPlayContinueWatching;break;case T.CHARACTER:n=a.ui.PostPlayCharacterVideos;break;case T.TRAILER_MERCH:n=a.ui.PostPlayTrailerMerch;break;case T.POST_TRAILER_MERCH:n=a.ui.PostPlayTrailerMerchPost;break;case T.PROMO_PHASE:n=a.ui.PostPlayTrailerPromo;break;case T.POST_PROMO_PHASE:n=a.ui.PostPlayTrailerPromoRecs;break;case T.SIMILARS:n=a.ui.PostPlaySims;break;case T.SIMILARS_DAB:n=a.ui.PostPlaySimsDAB;break;case T.SIMILARS_SPECIAL_MESSAGE:n=a.ui.PostPlaySimsSpecialMessage;break;default:return E.error("Could not create a post play experience for "+e.type),void t()}y=n.create(_,e).show(),_.classList.add(w)}function t(){E.info("Failed to get post play data. Falling back...")}function n(){a=netflix.cadmium,l=a.views,u=a.objects,c=a.element,d=a.UiEvents,p=Rx.Observable,m=a.dom.DIV,h=a.PostPlayData,v=a.util.NOOP,E=E||a.Logger.create("view.postplay.factory")}function i(e){n(),E.log("preinit");p.fromEvent(d,d.knownEvents.VIDEO_ENDED).doAction(function(){E.log("postplay fallback. videoEnded; going back home."),t()});h.getData().flatMap(s).doAction(function(t){l.show(a.ui.PostPlay,[e,t])}).subscribe(v,E.getErrorHandler("preinit.postplayexperience"),v)}function r(t,i){k&&o(),x=x||new Rx.Subject,n(),E.log("init"),g=m({"class":"player-postplay"}),_=t,f=u.videoPlayer(),b=f.getElement(),e(i),k=!0}function o(){k&&(E.log("destroy"),x&&x.onNext(),x=null,_.classList.remove(w),_.classList.remove("player-postplay-video-ended"),y&&y.destroy(),c.remove(g),_=null,g=null,y=null,b=null,a=null,l=null,u=null,c=null,d=null,p=null,m=null,h=null,f=null,v=null,E=null,k=!1)}function s(e){return e&&e.experience&&e.experience.myList&&e.type===T.POST_TRAILER_MERCH||e.type===T.POST_PROMO_PHASE?(E.log("Getting my list status."),a.ui.PostPlayMyList.getCurrentState(e.experience.myList).map(function(t){return e.experience.myList.action=t.action,e})):p["return"](e)}var a,l,u,c,d,p,m,h,f,v,E,g,_,b,y,x,k=!1,w="player-postplay",T=Object.freeze({WATCH_NEXT:"watchNext",SIMILARS:"recommendations",SIMILARS_DAB:"recommendationsDAB",SIMILARS_SPECIAL_MESSAGE:"specialMessage",CHARACTER:"character",TRAILER_MERCH:"trailerMerch",POST_TRAILER_MERCH:"postTrailerMerch",PROMO_PHASE:"promoTrailerMerch",POST_PROMO_PHASE:"postPromoTrailer"});netflix.cadmium.ui.PostPlay={preinit:i,init:r,deinit:o},netflix.cadmium.views.register(netflix.cadmium.ui.PostPlay,netflix.cadmium.views.types.standard)}(),function(){"use strict";var e=netflix.cadmium,t=e.element,n=e.Logger.create("loader.manager"),i=e.metadata,r=e.UiEvents,o=e.objects,s=Rx.Observable,a=e.ui.pinentry,l=e.session,u=(e.url,e.PostPlayData),c=e.util.NOOP,d=e.Eventable.extend({parentNode:null,rootEl:null,knownEvents:Object.freeze({METADATA_READY:"metadataReady",START_LOAD:"startLoad",PROGRESS_CHANGED:"progressChanged"}),_initialized:!1,_components:[],_disposed:null,_videoPlayer:null,_videoDOMNodesAvailable:!1,_attemptedBuffering:!1,_bookmarkOverride:null,_loadingVideoId:null,_attemptLoadVideo:function(){this._initialized&&(n.log("attemptLoadVideo",{attemptedBuffering:this._attemptedBuffering,id:this._loadingVideoId}),this._attemptedBuffering||null===this._loadingVideoId||(this._attemptedBuffering=!0,n.log("attemptLoadVideo, create video player",{attemptedBuffering:this._attemptedBuffering,id:this._loadingVideoId}),o.createVideoPlayer(o.videoId(),o.trackId(),function(e,t){e||(this._videoPlayer=t,s.fromEvent(this._videoPlayer,"busychanged").takeUntil(this._disposed).doAction(this._busyChangedHandler).subscribe(c,function(e){console.error(e)},c),s.fromEvent(this._videoPlayer,"loaded").take(1).takeUntil(this._disposed).doAction(this._loadedVideoHandler).subscribe(c,function(e){console.error(e)},c))}.bind(this))))},_loadedVideoHandler:function(){this._initialized&&(r.fireEvent(r.knownEvents.VIDEO_FIRST_PLAY),n.log("video start time: "+performance.now().toFixed(2)+"ms"),e.views.show(e.ui.playback,[this.parentNode]),u.init())},_busyChangedHandler:function(){if(this._initialized){var e=o.videoPlayer().getBusy()||{};this.fireEvent(this.knownEvents.PROGRESS_CHANGED,[{progress:e.progress,isStalled:e.networkStalled}])}},_metadataLoadedHandler:function(){this._initialized&&(null===this._loadingVideoId&&(this._loadingVideoId=i.getActiveVideo().id,o.setVideoId(this._loadingVideoId)),this.fireEvent(this.knownEvents.METADATA_READY))},_checkMetadataForId:function(e){if(this._initialized){var t=i.getActiveVideo();t&&t.id===e&&this._metadataLoadedHandler()}},_preparePlayableAndTrackId:function(t){if(this._initialized){var n,i,r=e.ui.preplay.preplayNeeded();r?(n=t.recap.movieId,i=t.preplay.trackId):(n=t.episodeId||t.movieId||t.videoId||null,i=t.trackingId),this._loadingVideoId=n,o.setVideoId(n),o.setTrackId(i||0),null!==this._loadingVideoId?r?this.fireEvent(this.knownEvents.METADATA_READY):this._checkMetadataForId(this._loadingVideoId):this._checkMetadataForId(t.videoId)}},_verifyPinThenStartPlayback:function(){var t=this,r=s.fromEvent(this,this.knownEvents.METADATA_READY).map(function(){return i.getActiveVideo()}),o=s["return"](i.getActiveVideo());s.merge(r,o).takeUntil(this._disposed).filter(function(e){return!!e}).take(1).flatMap(function(e){return e&&e.requiresPin?a.show(t.rootEl,!0).map(function(e){return!(e&&e.pinStatus&&e.pinStatus===a.CANCELED)}).doAction(function(e){e&&l.setSessionData(l.SESSION_TYPES.PIN,!0)}):s["return"](!0)}).doAction(function(n){n?t._attemptLoadVideo():e.ui.master.goBackToBrowsing()}).subscribe(c,function(e){var t=netflix&&netflix.cadmium&&netflix.cadmium.ui&&netflix.cadmium.ui.errors||{};t.throwUIError&&t.throwUIError(t.type.UI_UNKNOWN),n.error(e)},c)},init:function(e,i){if(e){i=i||{},this._disposed=new Rx.Subject,this._initialized&&this.destroy(),this._initialized=!0,this._super();var o=i.initParams||{},a=i.components,u=this;this.parentNode=e,this.rootEl=t.create("section",{"class":"loading-view-v2"},this.parentNode),a&&a.length>0&&(this._components=[],a.forEach(function(e){this._components.push(e.create(this,i))},this)),this.fireEvent(this.knownEvents.START_LOAD),this._loadedVideoHandler=this._loadedVideoHandler.bind(this),this._busyChangedHandler=this._busyChangedHandler.bind(this),this._metadataLoadedHandler=this._metadataLoadedHandler.bind(this),s.fromEvent(r,r.knownEvents.NEW_PLAYER_DOM_CREATED).takeUntil(this._disposed).doAction(function(){u._initialized&&(u._videoDOMNodesAvailable=!0)}).subscribe(c,n.getErrorHandler("event|NEW_PLAYER_DOM_CREATED"),c),s.fromEvent(r,r.knownEvents.METADATA_LOADED).takeUntil(this._disposed).doAction(this._metadataLoadedHandler).subscribe(c,n.getErrorHandler("event|METADATA_LOADED"),c),this._preparePlayableAndTrackId(o),o.pinConfig&&o.pinConfig.isEnabled?l.isExpired(l.SESSION_TYPES.PIN)?this._verifyPinThenStartPlayback():(l.setSessionData(l.SESSION_TYPES.PIN,!0),this._attemptLoadVideo()):this._attemptLoadVideo()}},destroy:function(){this._initialized&&(this._disposed.onNext(),t.remove(this.rootEl),this._components&&this._components.forEach(function(e){e&&e.destroy()}),this.rootEl=null,this.parentNode=null,this.events=null,this._components=null,this._videoDOMNodesAvailable=!1,this._attemptedBuffering=!1,this._bookmarkOverride=null,this._loadingVideoId=null,this._videoPlayer=null,this._disposed=null,this._initialized=!1)}}),p=function(){var t=new d;return{init:function(n,i){
var r=[e.ui.LoaderMetadata,e.ui.LoaderProgress];netflix.cadmium&&netflix.cadmium.ui&&netflix.cadmium.ui.master&&netflix.cadmium.ui.master.isAkira()&&r.push(e.ui.ExitPlaybackComponent),t.init(n,{initParams:i,components:r})},deinit:t.destroy.bind(t)}}();netflix.cadmium.views.register(p,netflix.cadmium.views.types.standard);var m=function(){var t=new d;return{init:function(n,i){t.init(n,{initParams:i,components:[e.ui.LoaderProgressPrePlay]})},deinit:t.destroy.bind(t)}}();netflix.cadmium.views.register(m,netflix.cadmium.views.types.standard),e.ui.loader={create:function(t){var n;return n=e.ui.preplay.preplayNeeded()?m:p}}}();